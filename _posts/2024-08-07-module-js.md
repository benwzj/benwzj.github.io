---
layout: post
title: JavaScript Module
date: 2024-08-07
category: JavaScript
tags: JavaScript CommonJS
toc:
  - name: CommonJS and ES modules
  - name: ECMAScript modules Syntax
---

There are tow major module specifications: CommonJS and ES modules.

## CommonJS and ES modules

CommonJS was primarily intended for server-side development with Node.js. It is named ServerJS before.
CommonJS's specification of how modules should work is widely used today for **server-side** JavaScript with Node.js.
It is also used for browser-side JavaScript, but that code must be packaged with a transpiler since browsers don't support CommonJS. 

The other major module specification in use is the ECMAScript (ES) modules specification (ES6 modules aka ES2015 modules). CommonJS can be recognized by the use of the `require()` function and `module.exports`, while ES modules use `import` and `export` statements for similar (though not identical) functionality.

### CommonJS and ES modules have different syntax.
CommonJS module that exports two functions:
```js
module.exports.add = function(a, b) {
  return a + b;
} 
module.exports.subtract = function(a, b) {
  return a - b;
} 
```
We can also import the public functions into another Node.js script using require, just as we do here:
```js
const {add, subtract} = require('./util')

console.log(add(5, 5)) // 10
console.log(subtract(10, 5)) // 5
```

ES modules:
```js
export function add(a, b) {
  return a + b;
}
export function subtract(a, b) {
  return a - b;
}
```
We can then import both functions using the import statement:
```js
import {add, subtract} from './util.mjs'

console.log(add(5, 5)) // 10
console.log(subtract(10, 5)) // 5
```

### CommonJS vs ECMAScript modules
- Node.js support for ES modules too.
- CommonJS offers flexibility with module imports.
- CommonJS loads modules synchronously, ES modules are asynchronous.
- All in all, ECMAScript modules are the future of JavaScript.

## ECMAScript modules Syntax

### Export

After the `export` keyword, you can use `let`, `const`, and `var` declarations, as well as `function` or `class` declarations. You can also use the `export { name1, name2 }` syntax to export a list of names declared elsewhere. 

> Note that `export {}` does not export an empty object â€” it's a no-op declaration that exports nothing (an empty name list).

JS have default export and named export. JS have `export from` syntax as well.

#### Default exports
Default export is used to export a single value as the default value for a module. This value can be a variable, function, class, or any other JavaScript entity. When importing a default export, you can assign it any name you want in the importing module.

Example:
```JS
// moduleA.js
const myDefault = 'Default Value';
export default myDefault;

// moduleB.js
import myAlias from './moduleC';
```

#### Named exports
Named exports allow you to export multiple values from a module and give each of them a specific name. You can import these values by using their respective names when importing in another module.

Example:
```js
// moduleC.js
export const foo = 'Foo';
export function bar() {
    // function implementation
}
const foobar = 'FooBar';
export {foobar};

// moduleD.js
import { foo, bar, foobar } from './moduleA';
```

#### Mix them
you can mix both named and default exports in the same module:
```js
// moduleE.js
export const namedExport = 'Named Export';
const defaultExport = 'Default Export';
export default defaultExport;

// moduleF.js
import myDefault, { namedExport } from './moduleE';
```

> More info at [here](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export).

### Import

The static import declaration is used to import read-only live bindings which are exported by another module. The imported bindings are called live bindings because they are updated by the module that exported the binding, but cannot be re-assigned by the importing module.

There are four forms of import declarations:

- Named import: `import { export1, export2 } from "module-name";`
- Default import: `import defaultExport from "module-name";`
- Namespace import: `import * as name from "module-name";`
- Side effect import: `import "module-name";`

```js
import myDefault, * as myModule from "/modules/my-module.js";
// or
import { default as myDefault } from "/modules/my-module.js";
// or
import myDefault, { foo, bar } from "/modules/my-module.js";
```

