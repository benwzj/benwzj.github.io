<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Understand DOM | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2020/DOM-intruduce/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">Understand DOM</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <h2 id="what-is-the-dom">What is the DOM</h2> <p>The DOM (Document Object Model) is a <strong>programming interface</strong> for web documents.</p> <ul> <li>Programming interface means API.</li> <li>Web document mean web page. web page is document.</li> </ul> <p>The DOM represents the document with a <strong>logical tree</strong>. Each branch of the tree ends in a node, and each node contains objects. That way, programming languages, e.g. JavaScrpt, can interact with the document, can change the document structure, style, and content. Nodes can have event handlers attached to them. Once an event is triggered, the event handlers get executed.</p> <h3 id="dom-tree">DOM tree</h3> <p>A DOM tree is a tree structure whose nodes represent an HTML or XML document’s contents.</p> <blockquote class="block-tip"> <h5 id="note">NOTE</h5> <p>Each HTML or XML document has a DOM tree representation.</p> </blockquote> <p>When a web browser parses an HTML document, it builds a DOM tree and then uses it to display the document.</p> <p>Example:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>My Document<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Header<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;p&gt;</span>Paragraph<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div> <p>It has a DOM tree that looks like this:</p> <figure> <picture> <img src="/assets/img/using_the_w3c_dom_level_1_core-doctree.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="dom-api">DOM API</h3> <p>The DOM API, also sometimes called the Document API, allows you to modify a DOM tree in any way you want.</p> <p>DOM API including:</p> <ul> <li> <strong>core DOM</strong>: defines the entities describing any document and the objects within it. For example, <code class="language-plaintext highlighter-rouge">document</code>, <code class="language-plaintext highlighter-rouge">window</code> are most popular interfaces to access page.</li> <li>HTML DOM API: adds support for representing HTML documents to the core DOM,</li> <li>SVG API: adds support for representing SVG documents.</li> </ul> <h2 id="the-terminology">The Terminology</h2> <h3 id="dom-and-html-source-code">DOM and HTML source code</h3> <p>It seems that HTML source code and the DOM are the same thing. But They are different. You can regard web page represented by the DOM tree. DOM tree conposite with HTML, CSS, JavaScript, etc. And DOM is the thing who implement DOM tree.</p> <p>Let’s make an example: When you use a web browser to request a page like https://example.com the server returns HTML like this:</p> <pre><code class="language-HTML">&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Hello, world!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Hello, world!&lt;/h1&gt;
    &lt;p&gt;This is a hypertext document on the World Wide Web.&lt;/p&gt;
    &lt;script src="/script.js" async&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre> <p>The browser parses the HTML and creates a tree of objects like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>html
  head
    title
  body
    h1
    p
    script

</code></pre></div></div> <p>This tree of objects, or nodes, representing the page’s content is called the DOM. Right now it looks the same as the HTML, but suppose that the script referenced at the bottom of the HTML runs this code:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">h1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">h1</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">h1</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">.</span><span class="nf">removeChild</span><span class="p">(</span><span class="nx">h1</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">p</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">p</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Wildcard!</span><span class="dl">'</span><span class="p">;</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nf">appendChild</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
</code></pre></div></div> <p>That code removes the h1 node and adds another p node to the DOM. The complete DOM now looks like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>html
  head
    title
  body
    p
    script
    p
</code></pre></div></div> <p>The page’s HTML is now different than its DOM. In other words, HTML represents initial page content, and the DOM represents current page content. When JavaScript adds, removes, or edits nodes, the DOM becomes different than the HTML.</p> <h3 id="dom-and-javascript">DOM and JavaScript</h3> <p>DOM is not a language, you can say it is interface for language, like JavaScript, which want to interact with the page. The DOM is not part of the JavaScript language, but is instead a Web API used to build webpage.</p> <blockquote class="block-tip"> <h5 id="note-1">NOTE</h5> <p>JavaScript is a language, DOM is the entity which are really accessing the page. And you use the language to access DOM so that you can control the document and its elements.</p> </blockquote> <h3 id="dom-and-node">DOM and Node</h3> <p>All items in the DOM are defined as <strong>nodes</strong>. There are many types of nodes, but there are three main ones that we work with most often:</p> <ul> <li>Element nodes</li> <li>Text nodes</li> <li>Comment nodes</li> </ul> <p>When an HTML element is an item in the DOM, it is referred to as an element node. Any lone text outside of an element is a text node, and an HTML comment is a comment node. In addition to these three node types, the <code class="language-plaintext highlighter-rouge">document</code> itself is a document node, which is the root of all other nodes.</p> <p>Every node in a document has a node type, which can be accessed through the <code class="language-plaintext highlighter-rouge">nodeType</code> property.</p> <p>Below is a chart of the most common node types:</p> <table> <thead> <tr> <th style="text-align: left">Node</th> <th style="text-align: left">Type Value</th> <th style="text-align: left">Example</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">ELEMENT_NODE</code></td> <td style="text-align: left">1</td> <td style="text-align: left">The <code class="language-plaintext highlighter-rouge">&lt;body&gt;</code> element</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">TEXT_NODE</code></td> <td style="text-align: left">3</td> <td style="text-align: left">Text that is not part of an element</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">COMMENT_NODE</code></td> <td style="text-align: left">8</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">&lt;!-- an HTML comment --&gt;</code></td> </tr> </tbody> </table> <h3 id="dom-and-html-element">DOM and HTML element.</h3> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"index.html"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
</code></pre></div></div> <p>Here we have an anchor element, which is a link to <code class="language-plaintext highlighter-rouge">index.html</code>.</p> <ul> <li> <code class="language-plaintext highlighter-rouge">a</code> is the tag</li> <li> <code class="language-plaintext highlighter-rouge">href</code> is the attribute</li> <li> <code class="language-plaintext highlighter-rouge">index.html</code> is the attribute value</li> <li> <code class="language-plaintext highlighter-rouge">Home</code> is the text. Everything between the opening and closing tag combined make the entire HTML element. The simplest way to access an element with JavaScript is by the <code class="language-plaintext highlighter-rouge">id</code> attribute, using the <code class="language-plaintext highlighter-rouge">getElementById()</code> method.</li> </ul> <h3 id="dom-and-event">DOM and Event</h3> <p>Every Node support specific events and can have event handlers attached to their events. Once an event is triggered, the event handlers get executed.</p> <h3 id="dom-and-browser">DOM and Browser</h3> <p>Browser the software which implement DOM, run JavaScript, display page.</p> <h3 id="dom-and-document">DOM and Document</h3> <ul> <li>DOM is Document Object Model.</li> <li>The DOM API, also sometimes called the Document API.</li> </ul> <p>The Document also refer to <code class="language-plaintext highlighter-rouge">Document</code> interface. The <code class="language-plaintext highlighter-rouge">Document</code> interface represents any web page loaded in the browser and serves as an <strong>entry point</strong> into the web page’s content, which is the DOM tree.</p> <p>The Document interface describes the common properties and methods for any kind of document. Depending on the document’s type (e.g. HTML, XML, SVG, …), a larger API is available: HTML documents, served with the “text/html” content type, also implement the HTMLDocument interface, whereas XML and SVG documents implement the XMLDocument interface.</p> <h3 id="virtual-dom-and-shadow-dom">Virtual DOM and Shadow DOM</h3> <p>In short, the Shadow DOM is a browser technology whose main objective is to provide encapsulation when creating elements. On the other hand, the Virtual DOM is managed by JavaScript libraries—e.g., React and it’s mostly a strategy to optimize performance.</p> <p>Virtual DOM</p> <ul> <li>VueJS and ReactJS both use Virtual DOM.</li> <li>Virtual DOM, in simple terms, is nothing but the complete and full representation of an actual DOM.</li> <li>Since any changes to the DOM cause the page to re-render more often than not, Virtual DOM primarily attempts to avoid any unnecessary and expensive changes to the DOM.</li> <li>It make following action easier: grouping changes and doing a single re-render instead of several small ones.</li> <li>A copy of the DOM is saved in the memory and is used to compare any changes being done anywhere in the DOM, it’s compared to find differences. Thus, only those parts of the application are re-rendered which are updated instead of re-rendering the entire DOM.</li> </ul> <p>Shadow DOM</p> <ul> <li>Shadow DOM, on the other hand, relates mostly to the concept of encapsulation. It is a tool that allows developers to overcome DOM encapsulation.</li> <li>It refers to the browser’s potential to add a subtree of DOM elements into the rendering of a document, but not into the DOM tree of the main document.</li> <li>Thus, it isolates the DOM and ensures that the DOM of a component is a separate element that won’t appear in a global DOM.</li> <li>Contrary to the DOM, Shadow DOM occurs in smaller pieces, implying that (unlike the Virtual DOM) it is not a complete representation of the entire DOM.</li> <li>It is also proven to be helpful with CSS scoping. The styles used in an application can overlap which makes it cumbersome to handle them. Shadow DOM ensures that the styles created inside a single Shadow DOM element remain isolated and within their own scope.</li> </ul> <h3 id="htmlcollection-vs-nodelist">HTMLCollection vs NodeList</h3> <p>When traversing the DOM sometimes you will get returned a collection of elements/nodes (querySelector, children). This will either be an HTMLCollection or a NodeList.</p> <ul> <li> <p>An <strong>HTMLCollection</strong> is pretty simple to understand since it can only contain elements. Methods such as <code class="language-plaintext highlighter-rouge">getElementsByClassName</code> and <code class="language-plaintext highlighter-rouge">children</code> return an HTMLCollection. These collections are very similar to arrays, but Things like forEach, map, and reduce are not available on an HTMLCollection. Also, HTMLCollections are live updating. This means that if you have an HTMLCollection of all elements with the class active and you add a new element to the DOM with that class it will automatically be added to the HTMLCollection. This is honestly a bit of a pain to deal with as it can cause unexpected bugs.</p> </li> <li> <p>A <strong>NodeList</strong> on the other hand can contain any type of node including elements. NodeLists are also similar to arrays, but they again lack most higher order functions. The only higher order function on a NodeList is the forEach function. Some examples of methods that return NodeLists are <code class="language-plaintext highlighter-rouge">querySelectorAll</code> and <code class="language-plaintext highlighter-rouge">childNodes</code>. NodeLists are also live updating similar to HTMLCollections, but only in some cases. For example, querySelectorAll is not a live updating list, but childNodes is live updating.</p> </li> </ul> <p>Generally, I try to avoid NodeLists since they can contain non-HTML elements, but <code class="language-plaintext highlighter-rouge">querySelectorAll</code> will only ever return elements inside the NodeList so I use <code class="language-plaintext highlighter-rouge">querySelectorAll</code> constantly.</p> <p>In general I prefer working with elements inside a NodeList whenever possible as they are the easiest to work with in my opinion.</p> <h2 id="conclusion">Conclusion</h2> <p>In many situation, DOM is referred to as the DOM tree. But DOM tree just part of DOM. DOM also include the interfaces which are used to interact with DOM tree.</p> <h2 id="reference">Reference</h2> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model" rel="external nofollow noopener" target="_blank">Mozilla Developer Network</a></p> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable post-side-sticky"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">Mar 3, 2020</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/html"> <i class="fas fa-tag fa-sm"></i> HTML</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/javasript"> <div class="tag"> JavaSript </div> </a> <a href="/blog/tag/css"> <div class="tag"> CSS </div> </a> <a href="/blog/tag/dom"> <div class="tag"> DOM </div> </a> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>