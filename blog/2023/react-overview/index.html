<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>React Overview with Hook | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2023/react-overview/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">React Overview with Hook</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <p>I have writen a React Overview years ago, but that was based on Class Component. Now React have ditched Class Component and focus on Function Component and Hooks.</p> <p>This Overview will follow new trend of React.</p> <p>Components are one of the core concepts of React. Components are the foundation upon which you build user interfaces (UI).</p> <p>The <code class="language-plaintext highlighter-rouge">export default</code> prefix lets you mark the main function in a file so that you can later import it from other files.</p> <h2 id="react-frameworks">React frameworks</h2> <p>If you want to build a new app or a new website fully with React, use frameworks.</p> <h3 id="why-frameworks">Why Frameworks</h3> <p>If you just want to run React, then what you need just grab react and react-dom from npm. But as a Web App, it still need routing, data fetching, and generating HTML for good performance. Frameworks provide features that most apps and sites eventually need, including routing, data fetching, and generating HTML.</p> <ul> <li> <strong>Next.js</strong> is a full-stack React framework</li> <li> <strong>Remix</strong> is a full-stack React framework with nested routing</li> <li> <strong>Gatsby</strong> is a React framework for fast CMS-backed websites</li> <li> <strong>Expo</strong> (for native apps) is a React framework that lets you create universal Android, iOS, and web apps with truly native UIs.</li> </ul> <h2 id="root-component">root component</h2> <p>The React application begins at a “root” component. Usually, it is created automatically when you start a new project. For example, if you use CodeSandbox or if you use the framework Next.js, the root component is defined in pages/index.js.</p> <h2 id="defining-a-component">Defining a component</h2> <p>React components are regular JavaScript functions, but their names must start with a capital letter or they won’t work! React don’t recommend to use Class components for new code.</p> <h2 id="react-state-system">React State system</h2> <p>Call <code class="language-plaintext highlighter-rouge">useState</code> at the top level of your component to declare a state variable.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">[</span><span class="nx">state</span><span class="p">,</span> <span class="nx">setState</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="nx">initialState</span><span class="p">);</span>
</code></pre></div></div> <p>useState returns an array with exactly two items:</p> <ol> <li>The current state of this state variable, initially set to the initial state you provided.</li> <li>The set function that lets you change it to any other value in response to interaction.</li> </ol> <blockquote class="block-warning"> <h5 id="important"><strong>Important</strong></h5> <ol> <li>Calling the set function does not change the current state in the already executing code.</li> <li>State is considered read-only, When state is objects or arrays, you should <strong>replace</strong> it rather than mutate your existing objects.</li> <li>About the initial state, React saves it once and ignores it on the next renders. So don’t do this: <code class="language-plaintext highlighter-rouge">const [todos, setTodos] = useState(createInitialTodos());</code>, because React run this function every <strong>render</strong> and means nothing. But you can do this: <code class="language-plaintext highlighter-rouge">const [todos, setTodos] = useState(createInitialTodos);</code> </li> </ol> </blockquote> <h3 id="setstate-function"> <code class="language-plaintext highlighter-rouge">setState</code> function</h3> <p>The set function returned by <code class="language-plaintext highlighter-rouge">useState</code> lets you update the state to a different value and trigger a re-render. You can pass</p> <ol> <li>the next state directly, OR</li> <li>a ‘updater function’ that calculates it from the previous state.</li> </ol> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">[</span><span class="nx">name</span><span class="p">,</span> <span class="nx">setName</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="dl">'</span><span class="s1">Edward</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">[</span><span class="nx">age</span><span class="p">,</span> <span class="nx">setAge</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="mi">28</span><span class="p">);</span>

<span class="kd">function</span> <span class="nf">handleClick</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">setName</span><span class="p">(</span><span class="dl">'</span><span class="s1">Taylor</span><span class="dl">'</span><span class="p">);</span>
  <span class="nf">setAge</span><span class="p">(</span><span class="nx">a</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div> <p><strong>setState function Caveats</strong></p> <ul> <li> <p>The set function only updates the state variable for the next render. If you read the state variable after calling the set function, you will still get the old value that was on the screen before your call. It is Async.</p> </li> <li> <p>If the new value you provide is identical to the current state, as determined by an Object.is comparison, React will skip re-rendering the component and its children.</p> </li> <li> <p>React batches state updates. It updates the screen after all the event handlers have run and have called their set functions.</p> </li> <li> <p>Calling the set function during rendering is only allowed from within the currently rendering component. React will discard its output and immediately attempt to render it again with the new state. This pattern is rarely needed, but you can use it to store information from the previous renders.</p> </li> <li> <p>In Strict Mode, React will call your updater function twice in order to help you find accidental impurities. This is development-only behavior and does not affect production.</p> </li> <li> <p>Don’t do this:</p> </li> </ul> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">[</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">setFn</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="nx">someFunction</span><span class="p">);</span>

<span class="kd">function</span> <span class="nf">handleClick</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">setFn</span><span class="p">(</span><span class="nx">someOtherFunction</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>You have to put <code class="language-plaintext highlighter-rouge">() =&gt;</code> before them in both cases. Then React will store the functions you pass.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">[</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">setFn</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">someFunction</span><span class="p">);</span>

<span class="kd">function</span> <span class="nf">handleClick</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">setFn</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">someOtherFunction</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="react-rules">React Rules</h2> <h3 id="component-ruels">Component Ruels</h3> <ul> <li>Keeping Components Pure</li> <li>If you can, update all the relevant state in the event handlers.</li> <li>If you want to reset the entire component tree’s state, pass a <strong>different key</strong> to your component.</li> <li>Avoid updating state in an effect</li> <li>You can store information from previous renders, but need to use condition, and also, the logic is hard to read. try to avoid.</li> <li>When you call the <code class="language-plaintext highlighter-rouge">set</code> function of useState hook during render, React will re-render that component immediately after your component exits with a <code class="language-plaintext highlighter-rouge">return</code> statement, and before rendering the children.</li> <li>State behaves more like a snapshot. Setting it does not change the state variable you already have, but instead triggers a re-render.</li> <li>React will ignore your update if the next state is equal to the previous state, as determined by an Object.is comparison.</li> <li>In Strict Mode, React will call some of your functions twice instead of once.</li> </ul> <h2 id="questions">Questions</h2> <h3 id="what-is-render-how-render-works">What is render(), How render works.</h3> <p>when states or props change, React will render the component. How to render? Simply say, React will execute the function again. But this process have some rules to follow. For exemple,</p> <ul> <li>the initialer of useState will just run at the first time.</li> <li>When you call the <code class="language-plaintext highlighter-rouge">set</code> function of useState hook during render, React will re-render that component immediately after your component exits with a <code class="language-plaintext highlighter-rouge">return</code> statement, and before rendering the childre.</li> </ul> <h3 id="what-is-life-cycle-of-function-component">What is life cycle of function component.</h3> <h3 id="how-to-upward-communication">How to Upward Communication</h3> <p>To communicate from a child to a parent component we can pass a function handler from parent to child.</p> <p>Take a look at this child component. Whenever the user clicks on the button, it tries to call a function passed down to it through the props system.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">Child</span><span class="p">({</span> <span class="nx">onFunctionFromParent</span> <span class="p">})</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">onFunctionFromParent</span><span class="p">(</span><span class="dl">'</span><span class="s1">i am very good!</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
 
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Click</span> <span class="nx">Here</span><span class="o">!&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span><span class="p">}</span>
</code></pre></div></div> <p>To use this component and be told when a user clicks the button</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">Parent</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">handleMessageFromChild</span> <span class="o">=</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">message from child is </span><span class="dl">"</span><span class="o">+</span> <span class="nx">message</span><span class="p">)</span>
  <span class="p">}</span>
 
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Child</span> <span class="nx">onFunctionFromParent</span><span class="o">=</span><span class="p">{</span><span class="nx">handleMessageFromChild</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span><span class="p">}</span>
</code></pre></div></div> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">Oct 12, 2023</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/react"> <i class="fas fa-tag fa-sm"></i> React</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/react"> <div class="tag"> React </div> </a> <a href="/blog/tag/web-page"> <div class="tag"> Web-page </div> </a> <a href="/blog/tag/redux"> <div class="tag"> Redux </div> </a> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>