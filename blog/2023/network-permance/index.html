<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Network and Performance | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2023/network-permance/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">Network and Performance</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <p>Here will try to a bit deep dive in <strong>Lighthouse</strong>, <strong>Network</strong> and <strong>performance</strong> panel in Chrome DevTools.</p> <h2 id="lighthouse">Lighthouse</h2> <p>It is design to help to optimize website speed. It provide two important functions:</p> <ul> <li>It creates a baseline for you to measure subsequent changes against.</li> <li>It gives you actionable tips on what changes will have the most impact.</li> </ul> <h3 id="build-initial-report">Build Initial Report</h3> <p>The baseline is a record of how the site performed before you made any performance improvements. <em>Analyze page load</em> to create a report at the very first.</p> <p>The report will</p> <ul> <li>tell scores for your selected categories.</li> <li>Metric section provides quantitative measurements of the site’s performance. Each metric provides insight into a different aspect of the performance. <ul> <li>Largest Contentful Paint (LCP) measures when the largest content element in the viewport is rendered to the screen. This approximates when the main content of the page is visible to users.</li> </ul> </li> <li>Screenshots section show collection of screenshots that show you how the page looked as it loaded.</li> <li>Opportunities section that provides specific tips on how to improve this particular page’s load performance. For example choose smaller size pictures, compress js files.</li> <li>Diagnostics section provides more information about factors that contribute to the page’s load time.</li> <li>Passed audits section shows you what the site is doing correctly.</li> </ul> <p>Some tips:</p> <ul> <li>Enabling <em>Clear Storage checkbox</em> clears all storage associated with the page, This will audit how first-time visitors experience your site.</li> </ul> <h3 id="actions-according-to-report">Actions according to Report</h3> <ul> <li>Enable text compression Go to Network panel to check! <ul> <li>Compare download size anf uncompression size.</li> <li>Search file Response Headers section for a <code class="language-plaintext highlighter-rouge">content-encoding</code> header.</li> </ul> </li> </ul> <p>If haven’t compression, then use commpression. For example, if you are using Node Express, then install the Node.js compression middleware via <code class="language-plaintext highlighter-rouge">npm compression</code>.</p> <ul> <li> <p>Resize images Create multiple sizes of each image during the build process and then use srcset in your code. At runtime, the browser takes care of choosing what size is best for the device it’s running on.</p> </li> <li>Eliminate render-blocking resources A render-blocking resource is an external JavaScript or CSS file that the browser must download, parse, and execute before it can show the page. The goal is to only run the core CSS and JavaScript code that is required to display the page properly. <ul> <li>The <code class="language-plaintext highlighter-rouge">Coverage tab</code> provides an overview of how much of the code in js files,like main.js, bundle.js, jquery.js, and lodash.js is being executed while the page loads. The <code class="language-plaintext highlighter-rouge">Coverage tab</code> can help you analyze your code, line-by-line, and only ship the code that’s needed for page load.</li> <li>The<code class="language-plaintext highlighter-rouge"> Request Blocking tab</code> can show you what happens when resources aren’t available. Which can help you remove the thing we don’t need.</li> </ul> </li> <li>Do less main thread work The main thread is where the browser does most of the work needed to display a page, such as parsing and executing HTML, CSS, and JavaScript. <ul> <li>Diagnostics section in the Lighthouse report will show you the main thread activity.</li> <li>The goal is to use the <code class="language-plaintext highlighter-rouge">Performance panel</code> to analyze what work the main thread is doing while the page loads, and find ways to defer or remove unnecessary work.</li> </ul> </li> <li>Improve Largest Contentful Paint (LCP)</li> </ul> <p>LCP represents how quickly the main content of a web page is loaded. Specifically, LCP measures the time from when the user initiates loading the page until the largest image or text block is rendered within the viewport. To provide a good user experience, sites should strive to have an LCP of <strong>2.5 seconds</strong> or less for at least 75% of page visits. To improve LCP, breakdown it and looking at two:</p> <ul> <li>The initial HTML document</li> <li>The LCP resource</li> </ul> <figure> <picture> <img src="/assets/img/a-breakdown-lcp-showing.png" class="img-fluid rounded z-depth-1" width="80%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Check <a href="https://web.dev/articles/optimize-lcp" rel="external nofollow noopener" target="_blank">here</a> for more info to Optimize LCP.</p> <ul> <li>Reduce Cumulative Layout Shift (CLS)</li> </ul> <p>CLS is a measure of the largest burst of layout shift scores for every unexpected layout shift that occurs during the entire lifespan of a page. Check <a href="https://web.dev/articles/cls" rel="external nofollow noopener" target="_blank">here</a> for more info to Optimize CLS.</p> <h2 id="performance-panel">Performance Panel</h2> <p>the Performance panel is the most common way to understand what activity your site does as it loads, and find ways to remove unnecessary activity.</p> <h2 id="network-panel">Network Panel</h2> <p>Network Panel only logs network activity while it’s open.</p> <h3 id="the-network-log">The Network Log</h3> <p>Each row of the Network Log represents a <strong>resource</strong>. By default the resources are listed chronologically. The top resource is usually the main HTML document. The bottom resource is whatever was requested last.</p> <p>Let’s take a look at default columes:</p> <ul> <li>Status. The HTTP response code.</li> <li>Type. The resource type.</li> <li>Initiator. What caused a resource to be requested. Clicking a link in the Initiator column takes you to the source code that caused the request.</li> <li>Time. How long the request took.</li> <li>Waterfall. A graphical representation of the different stages of the request. Hover over a Waterfall to see a breakdown.</li> </ul> <h3 id="some-tips">Some tips</h3> <ul> <li> <p>Simulate a slower network connection By throttling the page you can get a better idea of how long a page takes to load on a mobile device. Find the Throttling menu,(it is No Throttling by default)</p> </li> <li> <p>Empty Cache And Hard Reload On repeat visits, the browser usually serves some files from its cache, which speeds up the page load. Empty Cache And Hard Reload forces the browser to go the network for all resources. This is helpful when you want to see how a first-time visitor experiences a page load.</p> </li> <li> <p>Capture screenshots Tick <em>Capture Screenshots</em> Capture Screenshots.</p> </li> <li>Inspect a resource’s details Click a resource to learn more information about it. <ul> <li>Use <strong>Headers</strong> tab to inspect HTTP headers.</li> <li>Click the Preview tab. A basic rendering of the HTML is shown.</li> <li>Click the Response tab. The HTML source code is shown.</li> <li>Click the Timing tab. A breakdown of the network activity for this resource is shown.</li> </ul> </li> <li> <p>Use the <strong>Search</strong> pane when you need to search the <em>HTTP headers</em> and <em>responses</em> of all resources for a certain string or regular expression.</p> </li> <li> <p>Filter resources DevTools provides numerous workflows for filtering out resources that aren’t relevant to the task at hand.</p> </li> <li>Block requests How does a page look and behave when some of its resources aren’t available? Does it fail completely, or is it still somewhat functional? Block requests to find out: <ul> <li>Command+Shift+P (Mac) to open the Command Menu.</li> <li>Type <code class="language-plaintext highlighter-rouge">block</code>, select Show Request Blocking, and press Enter.</li> <li>Click Add Pattern</li> <li>Then Reload the page.</li> </ul> </li> </ul> <p>Reload the page again via the Empty Cache And Hard Reload workflow</p> <h2 id="questions">Questions</h2> <ul> <li>What is Site Speed Test</li> <li>What is routing, data fetching, and generating HTML</li> <li>What is Network Waterfall. How to read waterfall charts. Network Waterfall charts show what network requests are made when loading a web page. They are often used to analyze website speed and identify opportunities for optimization. Many DevTools provide Network Waterfall charts, Like Chrome DevTools.</li> </ul> <p>It provides you with a visual representation of how all the assets on your website load. This includes CSS, JavaScript, HTML, images, plugins, and third-party content.</p> <figure> <picture> <img src="/assets/img/waterfall-chart.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h2 id="reference">Reference</h2> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">Oct 14, 2023</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/website"> <i class="fas fa-tag fa-sm"></i> Website</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/web-page"> <div class="tag"> Web-page </div> </a> <a href="/blog/tag/chrome"> <div class="tag"> Chrome </div> </a> <a href="/blog/tag/devtools"> <div class="tag"> DevTools </div> </a> <a href="/blog/tag/network"> <div class="tag"> Network </div> </a> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>