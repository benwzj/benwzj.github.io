<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>NPM YARN and PNPM | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2024/npm-pnpm-yarn/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">NPM YARN and PNPM</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <h2 id="npm">NPM</h2> <p>NPM stands for Node Package Manager. npm is a package manager for the JavaScript programming language maintained by Microsoft’s npm, Inc. npm is the default package manager for the JavaScript runtime environment Node.js and is included as a recommended feature in the Node.js installer.</p> <h3 id="packages">Packages</h3> <p>A package in Node.js contains all the files you need for a module. Modules are JavaScript libraries you can include in your project. A package is registered in npmjs.com registry.</p> <h3 id="about-scopes">About scopes</h3> <p>When you sign up for an npm user account or create an organization, you are granted a scope that matches your user or organization name. You can use this scope as a namespace for related packages.</p> <blockquote class="block-warning"> <p>A scope allows you to create a package with the same name as a package created by another user or organization without conflict.</p> </blockquote> <p>When listed as a dependent in a package.json file, scoped packages are preceded by their scope name. The scope name is everything between the <code class="language-plaintext highlighter-rouge">@</code> and the slash <code class="language-plaintext highlighter-rouge">/</code>:</p> <ul> <li>“npm” scope: <code class="language-plaintext highlighter-rouge">@npm/package-name</code> </li> <li>“npmcorp” scope: <code class="language-plaintext highlighter-rouge">@npmcorp/package-name</code> </li> </ul> <h4 id="scopes-and-package-visibility">Scopes and package visibility</h4> <p>Unscoped packages are always public. Private packages are always scoped. Scoped packages are private by default; you must pass a command-line flag when publishing to make them public.</p> <h3 id="commonjs">CommonJS</h3> <p>CommonJS is a project to <strong>standardize the module ecosystem</strong> for JavaScript outside of web browsers (e.g. on web servers or native desktop applications).</p> <p>CommonJS’s specification of how modules should work is widely used today for server-side JavaScript with Node.js. It is also used for browser-side JavaScript, but that code must be packaged with a transpiler since browsers don’t support CommonJS.</p> <p>The other major module specification in use is the ECMAScript (ES) modules specification (<strong>ES6 modules</strong> aka ES2015 modules). CommonJS can be recognized by the use of the <code class="language-plaintext highlighter-rouge">require()</code> function and <code class="language-plaintext highlighter-rouge">module.exports</code>, while ES modules use <code class="language-plaintext highlighter-rouge">import</code> and <code class="language-plaintext highlighter-rouge">export</code> statements for similar (though not identical) functionality.</p> <h3 id="use-npm-command">Use npm command</h3> <p>npm manages downloads of dependencies of your project.</p> <ul> <li>If a project has a package.json file, by running <code class="language-plaintext highlighter-rouge">npm install</code>, it will install everything the project needs, in the <code class="language-plaintext highlighter-rouge">node_modules</code> folder, creating it if it’s not existing already.</li> <li>You can also install a specific package by running <code class="language-plaintext highlighter-rouge">npm install &lt;package-name&gt;</code>.</li> <li>Updating packages <code class="language-plaintext highlighter-rouge">npm update</code> </li> <li>Running Tasks <code class="language-plaintext highlighter-rouge">npm run &lt;task-name&gt;</code> </li> </ul> <h3 id="npx">npx</h3> <p>Run packages without downloading using npx.</p> <h2 id="yarn">YARN</h2> <p>YARN stands for Yet Another Resource Negotiator. It is an alternative package manager for JavaScript that was created in 2016 by Facebook, Google, Exponent, and Tilde. It was designed to address some of the issues and limitations of NPM, such as speed, reliability, and security.</p> <p>YARN has a similar command-line interface as NPM, but with some differences and improvements. It also uses the same package.json file as NPM, but it adds another file called yarn.lock that locks the exact versions of your dependencies. It also creates a node_modules folder where it stores the installed packages.</p> <h3 id="advantages">Advantages</h3> <ul> <li>It is faster and more efficient than NPM when installing or updating packages</li> <li>It uses a flat dependency structure that avoids duplication and nesting of packages</li> <li>It supports offline installation of packages from a local cache</li> <li>It has a better resolution algorithm that ensures consistent and deterministic versions of packages across different environments <h3 id="disadvantages">Disadvantages</h3> </li> <li>It is not as widely used or supported as NPM by the JavaScript community</li> <li>It may not be compatible with some NPM packages or features</li> <li>It may have some bugs or issues that are not yet fixed or resolved</li> </ul> <h2 id="pnpm">PNPM</h2> <p>When using npm, if you have 100 projects using a dependency, you will have 100 copies of that dependency saved on disk. With pnpm, the dependency will be stored in a content-addressable store, so:</p> <ul> <li>If you depend on different versions of the dependency, only the files that differ are added to the store. For instance, if it has 100 files, and a new version has a change in only one of those files, pnpm update will only add 1 new file to the store, instead of cloning the entire dependency just for the singular change.</li> <li>All the files are saved in a single place on the disk. When packages are installed, their files are hard-linked from that single place, consuming no additional disk space. This allows you to share dependencies of the same version across projects.</li> </ul> <p>As a result, you <strong>save a lot of space</strong> on your disk proportional to the number of projects and dependencies, and you have a lot faster installations!</p> <h3 id="boosting-installation-speed">Boosting installation speed</h3> <p>pnpm perfoms installation in three stages:</p> <ul> <li>Dependency resolution. All required dependencies are identified and fetched to the store.</li> <li>Directory structure calculation. The <code class="language-plaintext highlighter-rouge">node_modules</code> directory structure is calculated based on the dependencies.</li> <li>Linking dependencies. All remaining dependencies are fetched and hard linked from the store to <code class="language-plaintext highlighter-rouge">node_modules</code>.</li> </ul> <h3 id="pnpm-creating-a-non-flat-node_modules-directory">pnpm Creating a non-flat node_modules directory</h3> <p><code class="language-plaintext highlighter-rouge">npm</code> and <code class="language-plaintext highlighter-rouge">Yarn</code> create flat node_modules directory.</p> <p>But by default, <code class="language-plaintext highlighter-rouge">pnpm</code> uses <strong>symlinks</strong> to add only the direct dependencies of the project into the root of the modules directory. pnpm Creating a non-flat node_modules directory</p> <h2 id="npm-vs-yarn-vs-pnpm">npm vs yarn vs pnpm</h2> <table> <thead> <tr> <th style="text-align: left">Feature</th> <th style="text-align: left">NPM</th> <th style="text-align: left">YARN</th> <th style="text-align: left">PNPM</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">Speed</td> <td style="text-align: left">Slow</td> <td style="text-align: left">Fast</td> <td style="text-align: left">Faster</td> </tr> <tr> <td style="text-align: left">Disk Space</td> <td style="text-align: left">High</td> <td style="text-align: left">Low</td> <td style="text-align: left">Lower</td> </tr> <tr> <td style="text-align: left">Security</td> <td style="text-align: left">Low</td> <td style="text-align: left">High</td> <td style="text-align: left">Higher</td> </tr> <tr> <td style="text-align: left">Compatibility</td> <td style="text-align: left">High</td> <td style="text-align: left">Medium</td> <td style="text-align: left">Medium</td> </tr> <tr> <td style="text-align: left">Popularity</td> <td style="text-align: left">High</td> <td style="text-align: left">Medium</td> <td style="text-align: left">Low</td> </tr> <tr> <td style="text-align: left">Ecosystem</td> <td style="text-align: left">Rich</td> <td style="text-align: left">Medium</td> <td style="text-align: left">Medium</td> </tr> <tr> <td style="text-align: left">CLI</td> <td style="text-align: left">Simple</td> <td style="text-align: left">Complex</td> <td style="text-align: left">Similar to NPM</td> </tr> <tr> <td style="text-align: left">directory</td> <td style="text-align: left">flattened</td> <td style="text-align: left">flattened</td> <td style="text-align: left">symlinks</td> </tr> </tbody> </table> <h2 id="fqa">FQA</h2> <h3 id="is-it-a-problem-if-mix-using-them-in-a-project">Is it a problem if mix using them in a project?</h3> <p>You can switch between them if you want, as long as you delete the existing node_modules folder and lockfile before installing with a different package manager.</p> <h3 id="lockfile">lockfile?</h3> <p>Use a lockfile to ensure reproducible installs across different machines and environments. A lockfile is a file that records the exact versions and sources of the packages that your project depends on, so that you can install them consistently every time. NPM uses a package-lock.json file, YARN uses a yarn.lock file, and PNPM uses a pnpm-lock.yaml file. You should commit these files to your version control system and update them whenever you add, remove, or update a package</p> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable post-side-sticky"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">May 10, 2024</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/programming"> <i class="fas fa-tag fa-sm"></i> Programming</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/npm"> <div class="tag"> npm </div> </a> <a href="/blog/tag/node-js"> <div class="tag"> Node.js </div> </a> </div> <div class="detail-item"> <div class="item-title">Content : </div> </div> <div class="toc-container"> <div class="toc-item"> <a href="#npm"> # NPM </a> </div> <div class="toc-item"> <a href="#yarn"> # YARN </a> </div> <div class="toc-item"> <a href="#pnpm"> # PNPM </a> </div> <div class="toc-item"> <a href="#npm-vs-yarn-vs-pnpm"> # npm vs yarn vs pnpm </a> </div> <div class="toc-item"> <a href="#fqa"> # FQA </a> </div> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>