<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Type in Python | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2024/py-type/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <style>html{scroll-behavior:smooth}</style> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">Type in Python</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <ul> <li>Almost everything in Python is an object, with its properties and methods.</li> <li>JavaScript have primitive type concept. But Python don’t.</li> <li>Python is dynamic type language.</li> <li>Dynamic typing have it’s shortcoming.</li> <li>Python provide library to help type check.</li> <li>Must Clear Concepts that are related to type: <strong>Generic type</strong>, <strong>interface</strong>, <strong>ABC</strong>, <strong>type annotations</strong>.</li> </ul> <h2 id="classes-vs-types">Classes vs Types</h2> <h3 id="history">History</h3> <p>Once upon a time, Python had both types and classes. Types were built-in objects defined in C; classes were what you built when using a class statement. The two were named differently because you couldn’t mix these; classes could not extend types.</p> <p>This difference was artificial, a limitation in the language implementation. Starting with Python 2.2, the developers of Python have slowly moved towards unifying the two concepts, with the difference all but gone in Python 3. Built-in types are now also labelled classes, and you can extend them at will.</p> <h3 id="built-in-function-type">built-in function type()</h3> <h4 id="typeobj">type(obj)</h4> <p><code class="language-plaintext highlighter-rouge">type(obj)</code> built-in function can return the class of the obj.</p> <h4 id="typeclassname-superclasses-attributes_dict">type(classname, superclasses, attributes_dict)</h4> <p><code class="language-plaintext highlighter-rouge">type()</code> can be called with three parameters:</p> <ul> <li>If type is called with three arguments, it will return a new type object. This provides us with a dynamic form of the class statement.</li> <li> <code class="language-plaintext highlighter-rouge">classname</code> is a string defining the class name and becomes the name attribute;</li> <li> <code class="language-plaintext highlighter-rouge">superclasses</code> is a list or tuple with the superclasses of our class. This list or tuple will become the bases attribute;</li> <li> <code class="language-plaintext highlighter-rouge">attributes_dict</code> is a dictionary, functioning as the namespace of our class. It contains the definitions for the class body and it becomes the dict attribute.</li> </ul> <h2 id="type-hints-pep-0483">Type Hints (pep-0483)</h2> <p>https://peps.python.org/pep-0483/ pep-0484</p> <h3 id="type-checkers">type checkers</h3> <p>type checker for Python is third library for now. e.g. Mypy. (PyCharm have type checker as well)</p> <p>It is important for the user to be able to define types in a form that can be understood by type checkers. The goal of this PEP 0483 is to propose such a systematic way of defining types for type annotations of variables and functions using PEP 3107 syntax.</p> <h3 id="gradual-typing">Gradual typing</h3> <ul> <li> <p>dynamic type language, like python, javascript, perl, etc. is very popular, Static type langage, like Java, C++, C#, C is very popular as well, The main reason is both of them have some good points and bad points. They can’t substitute each other.</p> </li> <li> <p>Gradual typing is a type system developed by Jeremy Siek and Walid Taha in 2006</p> </li> <li>Gradual typing allows parts of a program to be dynamically typed and other parts to be statically typed.</li> <li>The programmer controls which parts are which by either leaving out type annotations or by adding them in. Thus leverage desirable aspects of both dynamic and static typing.</li> </ul> <h3 id="subtype-what-is-subtype-relationships">Subtype? what is Subtype relationships?</h3> <p>A crucial notion for static type checker is the subtype relationship.</p> <h4 id="it-arises-from-the-question">It arises from the question:</h4> <p>If first_var has type first_type, and second_var has type second_type, is it safe to assign first_var = second_var? (It is safe when second_type is subtype of first_type)</p> <h4 id="a-strong-criterion-for-when-it-should-be-safe-is">A strong criterion for when it should be safe is:</h4> <ul> <li>every value from second_type is also in the set of values of first_type; and</li> <li>every function from first_type is also in the set of functions of second_type.</li> </ul> <p>By this definition:</p> <ul> <li>Every type is a subtype of itself.</li> <li>The set of values becomes smaller for subtype, while the set of functions becomes larger.</li> </ul> <p>#### Subtype concept Conclusion</p> <ul> <li>If B is subtype of A, then var_A = var_B is safe. </li> <li>The values of subtype will be smaller, but functions will be larger. - Every type is a subtype of itself.</li> <li>Int is subtype of real number.</li> <li>But List[int] is not a subtype of List[float]. Although list[int] value is set of list[float], but  appending a real number only works with List[float]</li> </ul> <h4 id="a-formal-example">A formal example:</h4> <p>Integers are subtype of real numbers. Indeed, every integer is of course also a real number, and integers support more operations, such as, e.g., bitwise shifts « and »</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lucky_number</span> <span class="o">=</span> <span class="mf">3.14</span>    <span class="c1"># type: float
</span><span class="n">lucky_number</span> <span class="o">=</span> <span class="mi">42</span>      <span class="c1"># Safe
</span><span class="n">lucky_number</span> <span class="o">*</span> <span class="mi">2</span>       <span class="c1"># This works
</span><span class="n">lucky_number</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span>      <span class="c1"># Fails
</span>
<span class="n">unlucky_number</span> <span class="o">=</span> <span class="mi">13</span>    <span class="c1"># type: int
</span><span class="n">unlucky_number</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span>    <span class="c1"># This works
</span><span class="n">unlucky_number</span> <span class="o">=</span> <span class="mf">2.72</span>  <span class="c1"># Unsafe
</span></code></pre></div></div> <p>#### Two widespread approaches to declare subtype information to type checker. In nominal subtyping, the type tree is based on the class tree. But this approach should be used under control of the type checker, because in Python one can override attributes in an incompatible way:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Base</span><span class="p">:</span>
    <span class="n">answer</span> <span class="o">=</span> <span class="sh">'</span><span class="s">42</span><span class="sh">'</span> <span class="c1"># type: str
</span><span class="k">class</span> <span class="nc">Derived</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">answer</span> <span class="o">=</span> <span class="mi">5</span> <span class="c1"># should be marked as error by type checker
</span></code></pre></div></div> <p>In structural subtyping the subtype relation is deduced from the declared methods.</p> <p>#### is-consistent-with vs. is-subtype-of <code class="language-plaintext highlighter-rouge">is-consistent-with</code>, which is similar to <code class="language-plaintext highlighter-rouge">is-subtype-of</code>, except new type <code class="language-plaintext highlighter-rouge">Any</code>. </p> <p>The is-consistent-with relationship is defined by three rules:</p> <ul> <li>A type t1 is consistent with a type t2 if t1 is a subtype of t2. (But not the other way around.)</li> <li>Any is consistent with every type. (But Any is not a subtype of every type.)</li> <li>Every type is consistent with Any. (But every type is not a subtype of Any.)</li> </ul> <h3 id="types-vs-classes">Types vs. Classes</h3> <p>Class is a dynamic, runtime concept.</p> <h4 id="the-distinction-between-classes-and-types-the-following-general-rules-apply">the distinction between classes and types the following general rules apply:</h4> <ul> <li>No types defined below (i.e. Any, Union, etc.) can be instantiated, an attempt to do so will raise TypeError. (But non-abstract subclasses of Generic can be.)</li> <li>No types defined below can be subclassed, except for Generic and classes derived from it.</li> <li>All of these will raise TypeError if they appear in isinstance or issubclass (except for unparameterized generics).</li> </ul> <h4 id="types-appear-in-variable-and-function-type-annotations-can-be-constructed-from-building-blocks-described-below-and-are-used-by-static-type-checkers">types appear in variable and function type annotations, can be constructed from building blocks described below, and are used by static type checkers.</h4> <ul> <li>Any.</li> <li>Union[t1, t2, …].</li> <li>Optional[t1]</li> <li>Tuple[t1, t2, …, tn].</li> <li>Callable[[t1, t2, …, tn], tr]</li> <li>Intersection[t1, t2, … ]</li> </ul> <h2 id="generic-type">Generic type</h2> <h3 id="what-is-generic-programming">What is Generic programming</h3> <p>Generic programming is a style of computer programming in which algorithms are written in terms of types to-be-specified-later that are then instantiated when needed for specific types provided as parameters.</p> <h3 id="why-generic">Why Generic</h3> <ul> <li>Stronger type checks at compile time.</li> <li>Enabling programmers to implement generic algorithms.</li> </ul> <h3 id="what-is-generic-type-in-python">What is Generic type in Python</h3> <ul> <li>Use generic type constructor to construct new types in a generic manner. It is common when a particular class or a function behaves in such a type generic manner.</li> <li>Using Union[t1, t2,…], Callable[[t1, t2, …, tn], tr] or Tuple[t1, t2, …, tn], etc. to construct new types.</li> <li>For example, Tuple can take concrete type float and make a concrete type Vector = Tuple[float, …], Such semantics is known as generic type constructor</li> <li>it is similar to semantics of functions, but a function takes a value and returns a value, while generic type constructor takes a type and “returns” a type.</li> </ul> <h4 id="generic-type-example1">Generic type Example1:</h4> <p>Container classes, such as list or dict, typically contain only values of a particular type. Therefore, a user might want to type annotate them as such:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">users</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># type: List[UserID]
</span><span class="n">users</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="nc">UserID</span><span class="p">(</span><span class="mi">42</span><span class="p">))</span> <span class="c1"># OK
</span><span class="n">users</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="sh">'</span><span class="s">Some guy</span><span class="sh">'</span><span class="p">)</span> <span class="c1"># Should be rejected by the type checker
</span>
<span class="n">examples</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># type: Dict[str, Any]
</span><span class="n">examples</span><span class="p">[</span><span class="sh">'</span><span class="s">first example</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="nf">object</span><span class="p">()</span> <span class="c1"># OK
</span><span class="n">examples</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>   
</code></pre></div></div> <p>To allow type annotations in these situations, built-in containers and container abstract base classes are extended with type parameters, so that they behave as generic type constructors. Classes, that behave as generic type constructors are called generic types. Example:</p> <p>from typing import Iterable</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Task</span><span class="p">:</span>
    <span class="bp">...</span>
<span class="k">def</span> <span class="nf">work</span><span class="p">(</span><span class="n">todo_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Task</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">...</span>
</code></pre></div></div> <p>Here Iterable is a generic type that takes a concrete type Task and returns a concrete type Iterable[Task].</p> <h4 id="generic-function-example">Generic function example:</h4> <p>The following function can take two arguments of type int and return an int, or take two arguments of type float and return a float, etc.:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="nf">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
<span class="nf">add</span><span class="p">(</span><span class="sh">'</span><span class="s">1</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">2</span><span class="sh">'</span><span class="p">)</span> <span class="o">==</span> <span class="sh">'</span><span class="s">12</span><span class="sh">'</span>
<span class="nf">add</span><span class="p">(</span><span class="mf">2.7</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">)</span> <span class="o">==</span> <span class="mf">6.2</span>
</code></pre></div></div> <p>Functions that behave in the type generic manner are called generic functions. Type annotations of generic functions are allowed by type variables. Their semantics with respect to generic types is somewhat similar to semantics of parameters in functions. But one does not assign concrete types to type variables, it is the task of a static type checker to find their possible values and warn the user if it cannot find. Example:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">take_first</span><span class="p">(</span><span class="n">seq</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span> <span class="c1"># a generic function
</span>    <span class="k">return</span> <span class="n">seq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">accumulator</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># type: int
</span>
<span class="n">accumulator</span> <span class="o">+=</span> <span class="nf">take_first</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>   <span class="c1"># Safe, T deduced to be int
</span><span class="n">accumulator</span> <span class="o">+=</span> <span class="nf">take_first</span><span class="p">((</span><span class="mf">2.7</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">))</span>  <span class="c1"># Unsafe
</span></code></pre></div></div> <p>Type variables are used extensively in type annotations, also internal machinery of the type inference in type checkers is typically build on type variables</p> <h3 id="type-variables">Type variables</h3> <p><code class="language-plaintext highlighter-rouge">X = TypeVar('X')</code> declares a unique type variable. (TypeVar() is defined in typing.py)</p> <ul> <li>The name must match the variable name.</li> <li>By default, a type variable ranges over all possible types.</li> <li>type variables Example: (it work for PyCharm’s static type checker)</li> </ul> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span>
<span class="n">T</span> <span class="o">=</span> <span class="nc">TypeVar</span><span class="p">(</span><span class="sh">'</span><span class="s">T</span><span class="sh">'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">do_nothing</span><span class="p">(</span><span class="n">one_arg</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">other_arg</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="nf">do_nothing</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>               <span class="c1"># OK, T is int
</span><span class="nf">do_nothing</span><span class="p">(</span><span class="sh">'</span><span class="s">abc</span><span class="sh">'</span><span class="p">,</span> <span class="nc">UserID</span><span class="p">(</span><span class="mi">42</span><span class="p">))</span>  <span class="c1"># also OK, T is object
</span></code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">Y = TypeVar('Y', t1, t2, ...)</code>. Ditto, constrained to t1, etc. Behaves similar to <code class="language-plaintext highlighter-rouge">Union[t1, t2, ...]</code>.</p> <p>Function type annotation with a constrained type variable:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span>
<span class="n">AnyStr</span> <span class="o">=</span> <span class="nc">TypeVar</span><span class="p">(</span><span class="sh">'</span><span class="s">AnyStr</span><span class="sh">'</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">longest</span><span class="p">(</span><span class="n">first</span><span class="p">:</span> <span class="n">AnyStr</span><span class="p">,</span> <span class="n">second</span><span class="p">:</span> <span class="n">AnyStr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyStr</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">first</span> <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">first</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nf">len</span><span class="p">(</span><span class="n">second</span><span class="p">)</span> <span class="k">else</span> <span class="n">second</span>

<span class="n">result</span> <span class="o">=</span> <span class="nf">longest</span><span class="p">(</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">abc</span><span class="sh">'</span><span class="p">)</span>  <span class="c1"># The inferred type for result is str
</span><span class="n">result1</span> <span class="o">=</span> <span class="nf">longest</span><span class="p">(</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">,</span> <span class="sa">b</span><span class="sh">'</span><span class="s">abc</span><span class="sh">'</span><span class="p">)</span>  <span class="c1"># Fails static type check
</span></code></pre></div></div> <p>both arguments to <code class="language-plaintext highlighter-rouge">longest()</code> must have the same type (str or bytes)</p> <h3 id="defining-your-own-generic-types">Defining your own generic types</h3> <ul> <li>Users can declare their classes as generic types using the special building block Generic. The definition class MyGeneric(Generic[X, Y, …]): … defines a generic type MyGeneric over type variables X, etc.</li> <li>MyGeneric itself becomes parameterizable, e.g. MyGeneric[int, str, …] is a specific type with substitutions X -&gt; int, etc.</li> </ul> <p>Example:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">TypeVar</span>
<span class="n">T</span> <span class="o">=</span> <span class="nc">TypeVar</span><span class="p">(</span><span class="sh">'</span><span class="s">T</span><span class="sh">'</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">CustomQueue</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">...</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="bp">...</span>

<span class="k">def</span> <span class="nf">communicate</span><span class="p">(</span><span class="n">queue</span><span class="p">:</span> <span class="n">CustomQueue</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="bp">...</span>
</code></pre></div></div> <ul> <li>Classes that derive from generic types become generic.</li> <li>A class can subclass multiple generic types.</li> <li>However, classes derived from specific types returned by generics are not generic.</li> </ul> <p>Examples:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">TodoList</span><span class="p">(</span><span class="n">Iterable</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">Container</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">...</span>

<span class="k">def</span> <span class="nf">check_all</span><span class="p">(</span><span class="n">todo</span><span class="p">:</span> <span class="n">TodoList</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>  <span class="c1"># TodoList is generic
</span>    <span class="bp">...</span>

<span class="k">class</span> <span class="nc">URLList</span><span class="p">(</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]):</span>
    <span class="k">def</span> <span class="nf">scrape_all</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">...</span>

<span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">urls</span><span class="p">:</span> <span class="n">URLList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span>  <span class="c1"># URLList is not generic
</span>    <span class="bp">...</span>
</code></pre></div></div> <h3 id="covariance-and-contravariance-concepts">Covariance and Contravariance concepts</h3> <p>If t2 is a subtype of t1, then a generic type constructor GenType is called:</p> <ul> <li>Covariant, if GenType[t2] is a subtype of GenType[t1] for all such t1 and t2.</li> <li>Contravariant, if GenType[t1] is a subtype of GenType[t2] for all such t1 and t2.</li> <li>Invariant, if neither of the above is true.</li> </ul> <h3 id="predefined-generic-types-and-protocols-in-typingpy">Predefined generic types and Protocols in typing.py</h3> <p>Like:</p> <ul> <li>Any.</li> <li>Union[t1, t2, …].</li> <li>Optional[t1]</li> <li>Tuple[t1, t2, …, tn].</li> <li>Callable[[t1, t2, …, tn], tr]</li> <li>Intersection[t1, t2, … ]</li> </ul> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable post-side-sticky"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">Dec 26, 2024</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/python"> <i class="fas fa-tag fa-sm"></i> Python</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/python"> <div class="tag"> Python </div> </a> </div> <div class="detail-item"> <div class="item-title">Content : </div> </div> <div class="toc-container"> <div class="toc-item"> <a href="#classes-vs-types"> # Classes vs Types </a> </div> <div class="toc-item"> <a href="#type-hints-pep-0483"> # Type Hints (pep-0483) </a> </div> <div class="toc-item"> <a href="#generic-type"> # Generic type </a> </div> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>