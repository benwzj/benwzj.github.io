<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Next.js Starter App Conclusion | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2024/nextjs-demo/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">Next.js Starter App Conclusion</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <p>Next.js application is Node.js application.</p> <h2 id="main-concepts">Main concepts</h2> <ul> <li>Routing &amp; navigation</li> <li>Metadata</li> <li>Styling: Tailwind CSS</li> <li>Image component</li> <li>Client vs Server components</li> <li>Server actions</li> <li>Suspense and streaming</li> <li>Caching</li> <li>static &amp; dynamic rendering</li> <li>Middleware</li> <li>Folder structure</li> <li>Static export</li> <li>Deployment options</li> <li>Push to GitHub</li> <li>Environment variables in Next.js</li> <li>Hostinger VPS deployment</li> </ul> <h2 id="styling">Styling</h2> <h3 id="add-a-global-css-file">add a global CSS file</h3> <p>You can import <code class="language-plaintext highlighter-rouge">global.css</code> in any component in your application, but it’s usually good practice to add it to your top-level component. In Next.js, this is the root layout.</p> <h3 id="tailwind">Tailwind</h3> <p>Tailwind is a CSS framework that speeds up the development process by allowing you to quickly write utility classes directly in your TSX markup. Next support Tailwind natively.</p> <h3 id="css-modules">CSS Modules</h3> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">styles</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@/app/ui/home.module.css</span><span class="dl">'</span><span class="p">;</span>
<span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">shape</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="err">;
</span></code></pre></div></div> <h3 id="using-the-clsx-library-to-toggle-class-names">Using the clsx library to toggle class names</h3> <ul> <li>Suppose that you want to create an InvoiceStatus component which accepts status. The status can be ‘pending’ or ‘paid’.</li> <li>If it’s ‘paid’, you want the color to be green. If it’s ‘pending’, you want the color to be gray. You can use clsx to conditionally apply the classes, like this:</li> </ul> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">clsx</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">clsx</span><span class="dl">'</span><span class="p">;</span>
 
<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">InvoiceStatus</span><span class="p">({</span> <span class="nx">status</span> <span class="p">}:</span> <span class="p">{</span> <span class="nl">status</span><span class="p">:</span> <span class="kr">string</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">span</span>
      <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nf">clsx</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">inline-flex items-center rounded-full px-2 py-1 text-sm</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="dl">'</span><span class="s1">bg-gray-100 text-gray-500</span><span class="dl">'</span><span class="p">:</span> <span class="nx">status</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">pending</span><span class="dl">'</span><span class="p">,</span>
          <span class="dl">'</span><span class="s1">bg-green-500 text-white</span><span class="dl">'</span><span class="p">:</span> <span class="nx">status</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">paid</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">)}</span>
    <span class="o">&gt;</span>
    <span class="c1">// ...</span>
<span class="p">)}</span>
</code></pre></div></div> <h3 id="other-styling-solutions">Other styling solutions</h3> <p>You can also style your Next.js application with:</p> <ul> <li> <strong>Sass</strong> which allows you to import <code class="language-plaintext highlighter-rouge">.css</code> and <code class="language-plaintext highlighter-rouge">.scss</code> files.</li> <li> <strong>CSS-in-JS</strong> libraries such as <code class="language-plaintext highlighter-rouge">styled-jsx</code>, <code class="language-plaintext highlighter-rouge">styled-components</code>, and <code class="language-plaintext highlighter-rouge">emotion</code>.</li> </ul> <h2 id="optimizing-fonts-and-images">Optimizing Fonts and Images</h2> <h3 id="fonts">Fonts</h3> <p>Next.js <strong>downloads</strong> font files at build time and hosts them with your other static assets. This means when a user visits your application, there are no additional network requests for fonts which would impact performance.</p> <p>Next.js do this to download font: /app/ui/fonts.ts</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Inter</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">next/font/google</span><span class="dl">'</span><span class="p">;</span>
 
<span class="k">export</span> <span class="kd">const</span> <span class="nx">inter</span> <span class="o">=</span> <span class="nc">Inter</span><span class="p">({</span> <span class="na">subsets</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">latin</span><span class="dl">'</span><span class="p">]</span> <span class="p">});</span>
</code></pre></div></div> <p>/app/layout.tsx</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="dl">'</span><span class="s1">@/app/ui/global.css</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">inter</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@/app/ui/fonts</span><span class="dl">'</span><span class="p">;</span>
 
<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">RootLayout</span><span class="p">({</span>
  <span class="nx">children</span><span class="p">,</span>
<span class="p">}:</span> <span class="p">{</span>
  <span class="nl">children</span><span class="p">:</span> <span class="nx">React</span><span class="p">.</span><span class="nx">ReactNode</span><span class="p">;</span>
<span class="p">})</span> <span class="p">{</span>
  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">html</span> <span class="nx">lang</span><span class="o">=</span><span class="dl">"</span><span class="s2">en</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">body</span> <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="s2">`</span><span class="p">${</span><span class="nx">inter</span><span class="p">.</span><span class="nx">className</span><span class="p">}</span><span class="s2"> antialiased`</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">children</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/body</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/html</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="images">Images</h3> <p>The <code class="language-plaintext highlighter-rouge">&lt;Image&gt;</code> Component is an extension of the HTML <code class="language-plaintext highlighter-rouge">&lt;img&gt;</code> tag, and comes with automatic image optimization, such as:</p> <ul> <li>Preventing layout shift automatically when images are loading.</li> <li>Resizing images to avoid shipping large images to devices with a smaller viewport.</li> <li>Lazy loading images by default (images load as they enter the viewport).</li> <li>Serving images in modern formats, like WebP and AVIF, when the browser supports it.</li> </ul> <h2 id="layouts-and-pages">Layouts and Pages</h2> <p>Next.js uses <strong>file-system routing</strong> where folders are used to create nested routes. Each folder represents a route segment that maps to a URL segment.</p> <p>You can create separate UIs for each route using <code class="language-plaintext highlighter-rouge">layout.tsx</code> and <code class="language-plaintext highlighter-rouge">page.tsx</code> files.</p> <ul> <li> <code class="language-plaintext highlighter-rouge">page.tsx</code> is a special Next.js file that exports a React component, and it’s required for the route to be accessible. Only the content inside the page file will be publicly accessible.</li> <li>You can use a special <code class="language-plaintext highlighter-rouge">layout.tsx</code> file to create UI that is shared between multiple pages.</li> </ul> <h3 id="navigating-between-pages">Navigating Between Pages</h3> <p>In Next.js, you can use the <code class="language-plaintext highlighter-rouge">&lt;Link /&gt;</code> Component to link between pages in application. If you use <a> instead of <link>, it will cause whole page refresh! When using <link>` Component, although parts of your application are rendered on the server, there’s no full page refresh, making it feel like a web app.</a></p> <h4 id="why-the-link--component-can-do-this">Why the <code class="language-plaintext highlighter-rouge">&lt;Link /&gt;</code> Component can do this?</h4> <p>It is because Next.js implment <strong>Automatic code-splitting and prefetching</strong>.</p> <p>Next.js automatically code splits your application by route segments. This is different from a traditional React SPA, where the browser loads all your application code on initial load.</p> <p>Splitting code by routes means that pages become isolated. If a certain page throws an error, the rest of the application will still work.</p> <p>Furthermore, in production, whenever <code class="language-plaintext highlighter-rouge">&lt;Link&gt;</code> components appear in the browser’s viewport, Next.js automatically prefetches the code for the linked route in the background. By the time the user clicks the link, the code for the destination page will already be loaded in the background, and this is what makes the page transition near-instant!</p> <p>Also they provide <code class="language-plaintext highlighter-rouge">usePathname()</code> to get the current link path.</p> <h2 id="fetch-data">Fetch data</h2> <h3 id="using-server-components-to-fetch-data">Using Server Components to fetch data!</h3> <p>By default, Next.js applications use React Server Components. Fetching data with Server Components is a relatively new approach and there are a few benefits of using them:</p> <p>Server Components support promises, providing a simpler solution for asynchronous tasks like data fetching. You can use async/await syntax without reaching out for useEffect, useState or data fetching libraries. Server Components execute on the server, so you can keep expensive data fetches and logic on the server and only send the result to the client. As mentioned before, since Server Components execute on the server, you can query the database directly without an additional API layer.</p> <h3 id="static-and-dynamic-rendering">Static and Dynamic Rendering</h3> <p>Next.js provide Static and Dynamic Rendering function. By default, when you use Server component to fetch data. Next.js provide cached function which is stastic rendering. Stastic rendering can make visit faster, good for SEO, reduced Server Load.</p> <p>But you can use use dynamic rendering: <code class="language-plaintext highlighter-rouge">import { unstable_noStore as noStore } from 'next/cache';</code></p> <h2 id="streaming">Streaming</h2> <p>What is streaming? Streaming is a data transfer technique that allows you to break down a route into smaller “chunks” and progressively stream them from the server to the client as they become ready.</p> <p>By streaming, you can prevent slow data requests from blocking your whole page. This allows the user to see and interact with parts of the page without waiting for all the data to load before any UI can be shown to the user.</p> <p>Streaming works well with React’s component model, as each component can be considered a chunk.</p> <p>There are two ways you implement streaming in Next.js:</p> <ul> <li>At the page level, with the loading.tsx file.</li> <li>For specific components, with <code class="language-plaintext highlighter-rouge">&lt;Suspense&gt;</code>.</li> </ul> <h3 id="streaming-a-whole-page-with-loadingtsx">Streaming a whole page with <code class="language-plaintext highlighter-rouge">loading.tsx</code> </h3> <ul> <li> <code class="language-plaintext highlighter-rouge">loading.tsx</code> is a special Next.js file built on top of Suspense, it allows you to create fallback UI to show as a replacement while page content loads.</li> <li>Since <code class="language-plaintext highlighter-rouge">&lt;SideNav&gt;</code> is static, it’s shown immediately. The user can interact with <code class="language-plaintext highlighter-rouge">&lt;SideNav&gt;</code> while the dynamic content is loading.</li> <li>The user doesn’t have to wait for the page to finish loading before navigating away.</li> </ul> <h3 id="streaming-a-component-with-suspense">Streaming a component with <code class="language-plaintext highlighter-rouge">&lt;Suspense&gt;</code> </h3> <p>Wrap the component which need to be Streaming into <code class="language-plaintext highlighter-rouge">&lt;Suspense&gt;</code>.</p> <p>Move data fetching down to the components that need it, thus isolating which parts of your routes should be dynamic in preparation for Partial Prerendering. Using <code class="language-plaintext highlighter-rouge">&lt;Suspense&gt;</code> to wrap it.</p> <h2 id="search-and-pagination">Search and Pagination</h2> <p>Next.js is using <strong>URL search params</strong> to manage the search state.</p> <p>Next.js provide Hooks for search:</p> <ul> <li>useSearchParams - Allows you to access the parameters of the current URL. For example, the search params for this URL <code class="language-plaintext highlighter-rouge">/dashboard/invoices?page=1&amp;query=pending</code> would look like this: <code class="language-plaintext highlighter-rouge">{page: '1', query: 'pending'}</code>.</li> <li>usePathname - Lets you read the current URL’s pathname. For example, for the route <code class="language-plaintext highlighter-rouge">/dashboard/invoices</code>, usePathname would return <code class="language-plaintext highlighter-rouge">'/dashboard/invoices'</code>.</li> <li>useRouter - Enables navigation between routes within client components programmatically.</li> </ul> <h2 id="server-actions">Server Actions</h2> <p>React Server Actions allow you to run asynchronous code directly on the server. They eliminate the need to create API endpoints to mutate your data. Instead, you write asynchronous functions that execute on the server and can be invoked from your Client or Server Components.</p> <p>Server Actions achieve this through techniques like <code class="language-plaintext highlighter-rouge">POST</code> requests, encrypted closures, strict input checks, error message hashing, and host restrictions, all working together to significantly enhance your app’s safety.</p> <h3 id="using-forms-with-server-actions">Using forms with Server Actions</h3> <p>In React, you can use the action attribute in the <code class="language-plaintext highlighter-rouge">&lt;form&gt;</code> element to invoke actions. The action will automatically receive the native <code class="language-plaintext highlighter-rouge">FormData</code> object, containing the captured data.</p> <p>For example:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Server Component</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">Page</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Action</span>
  <span class="k">async</span> <span class="kd">function</span> <span class="nf">create</span><span class="p">(</span><span class="nx">formData</span><span class="p">:</span> <span class="nx">FormData</span><span class="p">)</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">use server</span><span class="dl">'</span><span class="p">;</span>
 
    <span class="c1">// Logic to mutate data...</span>
  <span class="p">}</span>
 
  <span class="c1">// Invoke the action using the "action" attribute</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="p">{</span><span class="nx">create</span><span class="p">}</span><span class="o">&gt;</span><span class="p">...</span><span class="o">&lt;</span><span class="sr">/form&gt;</span><span class="err">;
</span><span class="p">}</span>
</code></pre></div></div> <p>Server Actions are also deeply integrated with Next.js caching. When a form is submitted through a Server Action, not only can you use the action to mutate data, but you can also revalidate the associated cache using APIs like <code class="language-plaintext highlighter-rouge">revalidatePath</code> and <code class="language-plaintext highlighter-rouge">revalidateTag</code>.</p> <blockquote> <p>Good to know:</p> <p>In HTML, you’d pass a URL to the action attribute of <code class="language-plaintext highlighter-rouge">&lt;form&gt;</code>. This URL would be the destination where your form data should be submitted (usually an API endpoint). However, in React, the action attribute is considered a special prop - meaning React builds on top of it to allow actions to be invoked. Behind the scenes, Server Actions create a <code class="language-plaintext highlighter-rouge">POST</code> API endpoint. This is why you don’t need to create API endpoints manually when using Server Actions.</p> </blockquote> <h2 id="revalidate-and-redirect">Revalidate and redirect</h2> <p>Next.js has a Client-side Router Cache that stores the route segments in the user’s browser for a time. Along with prefetching, this cache ensures that users can quickly navigate between routes while reducing the number of requests made to the server.</p> <ul> <li> <code class="language-plaintext highlighter-rouge">revalidatePath</code> allows you to purge cached data on-demand for a specific path.</li> <li>The <code class="language-plaintext highlighter-rouge">redirect</code> function allows you to redirect the user to another URL. <code class="language-plaintext highlighter-rouge">redirect</code> can be used in Server Components, Route Handlers, and Server Actions.</li> </ul> <h2 id="dynamic-route-segments-with-specific-ids">dynamic route segments with specific IDs</h2> <p>Next.js allows you to create Dynamic Route Segments when you don’t know the exact segment name and want to create routes based on data. This could be blog post titles, product pages, etc. You can create dynamic route segments by wrapping a folder’s name in square brackets. For example, [id], [post] or [slug].</p> <h2 id="error-handler">error handler</h2> <h3 id="errortsx-file"> <code class="language-plaintext highlighter-rouge">error.tsx</code> file</h3> <p>When you add <code class="language-plaintext highlighter-rouge">error.tsx</code> file to your route segments folder, the <code class="language-plaintext highlighter-rouge">error.tsx</code> file serves as a catch-all for unexpected errors and allows you to display a fallback UI to your users.</p> <p><code class="language-plaintext highlighter-rouge">error.tsx</code> file describe the UI and should like this:</p> <ul> <li>“use client” - error.tsx needs to be a Client Component.</li> <li>It accepts two props: <ul> <li> <code class="language-plaintext highlighter-rouge">error</code>: This object is an instance of JavaScript’s native Error object.</li> <li> <code class="language-plaintext highlighter-rouge">reset</code>: This is a function to reset the error boundary. When executed, the function will try to re-render the route segment.</li> </ul> </li> </ul> <h3 id="not-foundtsx-file"> <code class="language-plaintext highlighter-rouge">not-found.tsx</code> file</h3> <p>If you know some specific error, like not found resource, you can display specific information to user:</p> <ol> <li>import <code class="language-plaintext highlighter-rouge">notFound</code>: <div class="language-ts highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">notFound</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">next/navigation</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">//...</span>
<span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">invoice</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">notFound</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li>Create a <code class="language-plaintext highlighter-rouge">not-found.tsx</code> file in your route segments folder.</li> <li>Then <code class="language-plaintext highlighter-rouge">not-found.tsx</code> file will display when notFound happen.</li> </ol> <blockquote> <p>That’s something to keep in mind, notFound will take precedence over error.tsx, so you can reach out for it when you want to handle more specific errors!</p> </blockquote> <h2 id="form-validation">Form Validation</h2> <h3 id="client-side-validation">Client-Side validation</h3> <p>There are a couple of ways you can validate forms on the client. The simplest would be to rely on the form validation provided by the browser by adding the <code class="language-plaintext highlighter-rouge">required</code> attribute to the <code class="language-plaintext highlighter-rouge">&lt;input&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;select&gt;</code> elements in your <code class="language-plaintext highlighter-rouge">forms</code>. For example:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">input</span>
  <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span>
  <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span>
  <span class="kd">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">number</span><span class="dl">"</span>
  <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Enter USD amount</span><span class="dl">"</span>
  <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">peer block w-full rounded-md border border-gray-200 py-2 pl-10 text-sm outline-2 placeholder:text-gray-500</span><span class="dl">"</span>
  <span class="nx">required</span>
<span class="o">/&gt;</span>
</code></pre></div></div> <h3 id="server-side-validation">Server-Side validation</h3> <ul> <li>use <code class="language-plaintext highlighter-rouge">Zod</code> to validate form data.</li> <li>If form validation fails, return errors early.</li> <li>Now you can <strong>access the errors using the form state</strong>.</li> <li>Add a ternary operator that checks for each specific error. Using the <code class="language-plaintext highlighter-rouge">aria</code> labels to show message: <div class="language-ts highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">relative</span><span class="dl">"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">select</span>
    <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">customer</span><span class="dl">"</span>
    <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">customerId</span><span class="dl">"</span>
    <span class="nx">defaultValue</span><span class="o">=</span><span class="dl">""</span>
    <span class="nx">aria</span><span class="o">-</span><span class="nx">describedby</span><span class="o">=</span><span class="dl">"</span><span class="s2">customer-error</span><span class="dl">"</span>
  <span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sr">/select</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">customer-error</span><span class="dl">"</span> <span class="nx">aria</span><span class="o">-</span><span class="nx">live</span><span class="o">=</span><span class="dl">"</span><span class="s2">polite</span><span class="dl">"</span> <span class="nx">aria</span><span class="o">-</span><span class="nx">atomic</span><span class="o">=</span><span class="dl">"</span><span class="s2">true</span><span class="dl">"</span><span class="o">&gt;</span>
  <span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">errors</span><span class="p">?.</span><span class="nx">customerId</span> <span class="o">&amp;&amp;</span>
    <span class="nx">state</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">customerId</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="na">error</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">mt-2 text-sm text-red-500</span><span class="dl">"</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">error</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">error</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>    <span class="p">))}</span>
<span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span></code></pre></div> </div> </li> </ul> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable post-side-sticky"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">Mar 29, 2024</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/react"> <i class="fas fa-tag fa-sm"></i> React</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/typescript"> <div class="tag"> TypeScript </div> </a> <a href="/blog/tag/javascript"> <div class="tag"> JavaScript </div> </a> <a href="/blog/tag/react"> <div class="tag"> React </div> </a> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>