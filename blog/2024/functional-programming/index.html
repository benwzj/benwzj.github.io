<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Functional Programming | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2024/functional-programming/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <style>html{scroll-behavior:smooth}</style> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">Functional Programming</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <h2 id="what-is-functional-programming">What is Functional Programming</h2> <p>Functional programming decomposes a problem into a set of functions. Ideally, functions only take inputs and produce outputs, and don’t have any internal state that affects the output produced for a given input.</p> <ul> <li>Well-known functional languages include the ML family (Standard ML, OCaml, and other variants) and Haskell.</li> <li>Like List and C++, Python is multi-paradigm language that support several different approaches. You can write programs or libraries that are largely procedural, object-oriented, or functional.</li> <li>In a large program, different sections might be written using different approaches; the GUI might be object-oriented while the processing logic is procedural or functional, for example.</li> <li>Functional style discourages functions with side effects that modify internal state or make other changes that aren’t visible in the function’s return value.</li> <li>Python won’t go to the extreme of avoiding all I/O or all assignments; instead, they’ll provide a functional-appearing interface but will use non-functional features internally. For example, the implementation of a function will still use assignments to local variables, but won’t modify global variables or have other side effects.</li> <li>Functional programming can be considered the opposite of object-oriented programming. But in Python you might combine the two approaches by writing functions that take and return instances representing objects in your application.</li> </ul> <h3 id="some-core-features">Some core features:</h3> <ul> <li>Input data flows through a set of functions. Each function operates on its input and produces some output.</li> <li>Functional programming tries to avoid mutable data types and state changes as much as possible.</li> <li>It works with the data that flow between functions.</li> <li>The use of recursion rather than loops or other structures as a primary flow control structure</li> <li>A focus on lists or arrays processing</li> <li>A focus on what is to be computed rather than on how to compute it</li> <li>The use of pure functions that avoid side effects</li> <li>The use of higher-order functions</li> </ul> <h3 id="why-should-you-avoid-objects-and-side-effects-in-functional-programming">Why should you avoid objects and side effects in Functional programming?</h3> <p>There are theoretical and practical advantages to the functional style: Formal provability. Modularity. Composability. Ease of debugging and testing.</p> <h2 id="iterator-iterable">Iterator, Iterable</h2> <ul> <li>Why iteration need two concepts: iterator and iterable? Because It can decouples the iteration algorithms from container data structures.</li> <li>Maybe we can say there are 3 concepts: iterator, not pure iterable, and pure iterable. iter(pure_iterable) return fresh iterator, iter(not_purt_iterable) return itself.</li> <li>List object is classic iterable, but not iterator.</li> <li>iterator is an important foundation for writing functional-style programs.</li> </ul> <h3 id="iterable-concept-official-document">Iterable concept (official document)</h3> <ul> <li>Any object that supports iter() and return iterator is said to be “iterable.”</li> <li>list, str, and tuple are classical example of iterables</li> <li>Some non-sequence types like dict, file objects are iterables.</li> <li>Objects of any classes you define with an<code class="language-plaintext highlighter-rouge"> __iter__()</code> method or with a <code class="language-plaintext highlighter-rouge">__getitem__()</code> method that implements sequence semantics are iterables.</li> <li>Iterables can be used in a for loop and in many other places where a sequence is needed (zip(), map(), …).</li> </ul> <h4 id="iter">Iter()</h4> <ul> <li>When an iterable object is passed as an argument to the built-in function iter(), it returns an iterator for the object. This iterator is good for one pass over the set of values.</li> <li>When using iterables, it is usually not necessary to call iter() or deal with iterator objects yourself. The for statement does that automatically for you, creating a temporary unnamed variable to hold the iterator for the duration of the loop.</li> </ul> <h3 id="iterator-concept">Iterator concept</h3> <ul> <li>An iterator object representing a stream of data. Repeated calls to the iterator’s <code class="language-plaintext highlighter-rouge">__next__()</code> method (or passing it to the built-in function next()) return successive items in the stream.</li> <li>Iterator just go forward, never backward.</li> <li>When no more data are available a StopIteration exception is raised instead.</li> <li>The iterator objects themselves are required to support the following two methods, which together form the iterator protocol: <ul> <li> <code class="language-plaintext highlighter-rouge">iterator.__iter__()</code>,</li> <li><code class="language-plaintext highlighter-rouge">iterator.__next__()</code></li> </ul> </li> <li>Iterators are required to have an <code class="language-plaintext highlighter-rouge">__iter__()</code> method that returns the iterator object itself so every iterator is also iterable and may be used in most places where other iterables are accepted. (One notable exception is code which attempts multiple iteration passes. )</li> <li>CPython does not consistently apply the requirement that an iterator define <code class="language-plaintext highlighter-rouge">__iter__()</code>.</li> <li>Every iterator is also an iterable, but not every iterable is an iterator. For example, list and string are iterable but they are not iterator.</li> <li>A container object (such as a list) produces a fresh new iterator each time you pass it to the iter() function or use it in a for loop. But Attempting this with an iterator will just return the same exhausted iterator object used in the previous iteration pass, making it appear like an empty container.</li> <li>An iterator can be created from an iterable by using the function <code class="language-plaintext highlighter-rouge">iter()</code>. <code class="language-plaintext highlighter-rouge">s = "GFG"</code> then <code class="language-plaintext highlighter-rouge">s = iter(s)</code> then <code class="language-plaintext highlighter-rouge">next(s) </code> </li> <li>Iterators are used to allow user-defined classes to support iteration.</li> <li> <code class="language-plaintext highlighter-rouge">__iter__()</code> function returns an iterator for the given object (like list, set, tuple, etc. or custom objects). It creates an object that can be accessed one element at a time using <code class="language-plaintext highlighter-rouge">__next__()</code> function.</li> </ul> <figure> <picture> <img src="/assets/img/iter-next.jpg" class="img-fluid rounded z-depth-1" width="25%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="iterator-vs-iterable">Iterator vs. Iterable</h3> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">i_lst</span> <span class="o">=</span> <span class="nf">iter</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
</code></pre></div></div> <ul> <li>lst is iterable, but not iterator.</li> <li>i_lst is iterator and also iterable. i_lst is list_iterator object</li> </ul> <h4 id="an-iterable-is">An ITERABLE is:</h4> <ul> <li>an object that defines <strong>iter</strong> that returns a fresh ITERATOR, or it may have a <strong>getitem</strong> method suitable for indexed lookup.</li> </ul> <h4 id="an-iterator-is-an-object">An ITERATOR is an object:</h4> <ul> <li>with a <code class="language-plaintext highlighter-rouge">__next__</code> method that: <ul> <li>returns the next value in the iteration</li> <li>updates the state to point at the next value</li> <li>signals when it is done by raising StopIteration</li> </ul> </li> <li>with state that remembers where it is during iteration,</li> <li>and that is self-iterable (CPython does not consistently apply ).</li> </ul> <h4 id="difference-at-iter">Difference at <strong>iter</strong>()</h4> <p><code class="language-plaintext highlighter-rouge">__iter__()</code> is semantically different for iterables and iterators.</p> <ul> <li>In iterators, the method returns the iterator itself, which must implement a <code class="language-plaintext highlighter-rouge">.__next__() </code>method.</li> <li>In iterables, the method should yield items on demand. It return fresh iterator.</li> </ul> <h4 id="other-differences">Other differences</h4> <ul> <li>Pure iterables typically hold the data themselves.</li> <li>In contrast, iterators don’t hold the data but produce it one item at a time, depending on the caller’s demand.</li> <li>Therefore, iterators are more efficient than iterables in terms of memory consumption.</li> </ul> <h3 id="iteration-example">iteration example:</h3> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">countdown</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
 <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="n">start</span><span class="p">):</span>
   <span class="n">self</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
 <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
   <span class="k">return</span> <span class="nf">countdown_iter</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">start</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">countdown_iter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
 <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
   <span class="n">self</span><span class="p">.</span><span class="n">count</span> <span class="o">=</span> <span class="n">count</span>
 <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
   <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
     <span class="k">raise</span> <span class="nb">StopIteration</span>
   <span class="n">r</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">count</span>
   <span class="n">self</span><span class="p">.</span><span class="n">count</span> <span class="o">-=</span> <span class="mi">1</span>
   <span class="k">return</span> <span class="n">r</span>
</code></pre></div></div> <p>Then:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> c <span class="o">=</span> countdown<span class="o">(</span>5<span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for </span>i <span class="k">in </span>c:
... print<span class="o">(</span>i, <span class="nv">end</span><span class="o">=</span><span class="s1">' '</span><span class="o">)</span>
...
5 4 3 2 1
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div></div> <ul> <li>c is iterable. 5 is it’s data. <code class="language-plaintext highlighter-rouge">iter(c)</code> will return fresh iterator (without <code class="language-plaintext highlighter-rouge">__iter__</code>).</li> <li> <code class="language-plaintext highlighter-rouge">iter(c)</code> is technically not iterator because it have no <code class="language-plaintext highlighter-rouge">__iter__</code>.</li> <li>You can make <code class="language-plaintext highlighter-rouge">iter(c)</code> a iterator when you add def <code class="language-plaintext highlighter-rouge">__iter__(self)</code>: return self to countdown_iter class.</li> </ul> <h3 id="iteration-faq">Iteration FAQ</h3> <h4 id="if-a-object-support-next-but-not-support-iter-is-it-a-iterator">If a object support next(), but not support iter(). is it a iterator?</h4> <p>It is NOT iterator. But CPython doesn’t consistently apply.</p> <h4 id="if-object-a-support-iter-and-iterobjecta-return-an-object-which-just-support-next-but-not-iter-then-object-a-is-still-iterable">If object A support iter() and iter(objectA) return an object which just support next() but not iter(). Then object A is still iterable?</h4> <p>If no iter() then NOT iterator, so not iterable. But CPython doesn’t consistently apply.</p> <h4 id="why-so-many-blogs-conclude-the-differences-between-iterator-and-iterable-when-iterator-is-a-iterable-as-well">Why so many blogs conclude the differences between iterator and iterable, when iterator is a iterable as well?</h4> <p>the differnence is one thing: iterator iter() itself, but iterable iter() another object.</p> <h4 id="iterator-should-not-be-called-as-iterable-even-it-supoort-iter-because-iter-return-itself-instead-of-a-fresh-iterator-or-just-should-not-be-called-as-pure-iterable">Iterator should not be called as iterable even it supoort iter(), Because iter() return itself instead of a fresh iterator? Or just should not be called as pure iterable?</h4> <p>Yes, you can add the pure iterable concept.</p> <h2 id="for-loop-in-python">for loop in Python</h2> <h3 id="the-forin-is-always-used-in-combination-with-an-iterable-object">The <code class="language-plaintext highlighter-rouge">for...in</code> is always used in combination with an iterable object.</h3> <p>The Python for statement iterates over the members of a sequence in order, executing the block each time. It don’t like JavaScript, or C</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>
 <span class="c1"># statements
</span></code></pre></div></div> <h3 id="underneath-the-covers">Underneath the covers</h3> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_iter</span> <span class="o">=</span> <span class="nf">iter</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="c1"># Get iterator object
</span><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
 <span class="k">try</span><span class="p">:</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">_iter</span><span class="p">.</span><span class="nf">__next__</span><span class="p">()</span> <span class="c1"># Get next item
</span> <span class="k">except</span> <span class="nb">StopIteration</span><span class="p">:</span> <span class="c1"># No more items
</span>   <span class="k">break</span>
 <span class="c1"># statements
</span> <span class="bp">...</span>
</code></pre></div></div> <h3 id="understand-how-forin-loop-iterate-over-a-iterable-object">Understand how <code class="language-plaintext highlighter-rouge">for...in</code> loop iterate over a iterable object:</h3> <ul> <li>What the core point is that it is a lazy processing.</li> <li>I am going to make two example to display how <code class="language-plaintext highlighter-rouge">for...in</code> loop work underneath the cover. First one is loop over a enumerate object, and second one is loop over a range object, it raise error.</li> </ul> <h4 id="first-example">First example:</h4> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
   <span class="n">lst</span><span class="p">.</span><span class="nf">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
</code></pre></div></div> <p>There are No error raising for these codes, but they are not work as expected. the code print: <code class="language-plaintext highlighter-rouge">[1, 3, 5, 7, 9]</code></p> <p><code class="language-plaintext highlighter-rouge">enumerate</code> object is generator object which will yield value from lst. It is lazy process. When <code class="language-plaintext highlighter-rouge">lst</code> change, value from enumerate object change as well, but i is keep going.</p> <p><code class="language-plaintext highlighter-rouge">for...in</code> is equivalent to:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_iter</span> <span class="o">=</span> <span class="nf">iter</span><span class="p">(</span><span class="n">enumerate_obj</span><span class="p">)</span> 
<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
 <span class="k">try</span><span class="p">:</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">_iter</span><span class="p">.</span><span class="nf">__next__</span><span class="p">()</span> 
 <span class="k">except</span> <span class="nb">StopIteration</span><span class="p">:</span>
   <span class="k">break</span>
 <span class="c1"># statements
</span></code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">enumerate()</code> is equivalent to:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">n</span><span class="p">,</span> <span class="n">i</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div> <h4 id="second-example">Second example:</h4> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)):</span>
   <span class="n">lst</span><span class="p">.</span><span class="nf">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</code></pre></div></div> <p>This code will raise IndexError. <code class="language-plaintext highlighter-rouge">range()</code> is iterable, but len(lst) in range() parameter here have been replace with constant value 10. Because len(lst) is not a lazy process. it don’t change any more. So i will up to 9.</p> <p>So the codes are equivalent to:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
   <span class="n">lst</span><span class="p">.</span><span class="nf">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</code></pre></div></div> <h2 id="generator">Generator</h2> <h3 id="what-is-generator">What is Generator</h3> <ul> <li>Generators are a special class of functions that simplify the task of writing iterators.</li> <li>Generator functions is a convenient shortcut to building iterators.</li> <li>Regular functions compute a value and return it, but generators return an iterator that returns a stream of values.</li> <li>When you call a generator function, it doesn’t return a single value; instead it returns a generator object that supports the iterator protocol.</li> <li>If a container object’s <code class="language-plaintext highlighter-rouge">__iter__()</code> method is implemented as a generator, it will automatically return a generator object supplying the <code class="language-plaintext highlighter-rouge">__iter__()</code> and <code class="language-plaintext highlighter-rouge">__next__()</code> methods.</li> <li>There are two ways to create Generator: generator expression and generator function</li> <li>If you create a list to sum the first n. When n is really big, then it consume lots of memory. Not acceptable. Generator (iterator) will perform the job much better.</li> <li>Note: a generator will provide performance benefits only if we do not intend to use that set of generated values more than once.</li> <li>When you use recursion for generator, you need to clear the subgenerator concept. Otherwise, it won’t work as you expect.</li> </ul> <h3 id="generator-is-not-pure-iterable">Generator is not pure iterable</h3> <p>Generator is iterator, but it is not pure iterable. That means iter(generator) return itself instead of a fresh iterator.</p> <h4 id="basic-example">Basic Example</h4> <p>clone python’s built-in range() function:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">my_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">stop</span> <span class="o">&lt;=</span> <span class="n">start</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nc">RuntimeError</span><span class="p">(</span><span class="sh">"</span><span class="s">start must be smaller than stop</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">start</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">stop</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="n">step</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nf">my_range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</code></pre></div></div> <h3 id="create-generator">Create Generator</h3> <h4 id="generator-functions">Generator functions</h4> <p>Generator function is defined similar to normal function but there is only one difference, it is using yield keyword to return value used for each iteration.</p> <p>Any function containing a yield keyword is a generator function; this is detected by Python’s bytecode compiler which compiles the function specially as a result.</p> <p>Generator function return a lazy iterator. This iterator also call generator object.</p> <h4 id="generator-expressionalso-call-generator-comprehension">Generator expression(also call generator comprehension)</h4> <ul> <li>Generator expressions provide an additional shortcut to build generators out of expressions similar to that of list comprehensions.</li> <li>If the generated expressions are more complex, involve multiple steps, or depend on additional temporary state, Using generator function .</li> </ul> <h5 id="generator-comprehension">generator comprehension:</h5> <p><code class="language-plaintext highlighter-rouge">&gt;&gt;&gt; nums_squared_gc = (num**2 for num in range(5))</code></p> <h5 id="list-comprehension">List comprehension:</h5> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> nums_squared_lc <span class="o">=</span> <span class="o">[</span>num<span class="k">**</span>2 <span class="k">for </span>num <span class="k">in </span>range<span class="o">(</span>5<span class="o">)]</span>

<span class="o">&gt;&gt;&gt;</span> nums_squared_lc
<span class="o">[</span>0, 1, 4, 9, 16]
<span class="o">&gt;&gt;&gt;</span> nums_squared_gc
&lt;generator object &lt;genexpr&gt; at 0x107fbbc78&gt;
</code></pre></div></div> <h5 id="the-difference">The difference</h5> <p>We can think of list comprehensions as generator expressions wrapped in a list constructor:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># list comprehension
</span><span class="n">doubles</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">50</span><span class="p">)]</span>
<span class="c1"># same as the list comprehension above
</span><span class="n">doubles</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div></div> <p>The difference between generator and list comprehensions is that generator comprehension create lazy generator. it won’t consume all memory it need at one time. But list comprehension will, because list constructor run through the generator.</p> <h3 id="subgenerator-yield-from">Subgenerator (yield from)</h3> <ul> <li>You can use yield from to read data from an other generator.</li> <li>There is Subgenerator concept, read more at PEP380.</li> <li>When you use recursion in generator you will meet some weird issue. That is because you have no subgenerator concept. You need to use yield from for each subgenerator. Otherwise you need to use for to run over it (sometime works, sometime not works). Because Generator return Generator Object! it is different from normal function.</li> </ul> <h4 id="understand-subgenerator">Understand subgenerator</h4> <ul> <li>A Python generator is a form of coroutine, but has the limitation that it can only yield to its immediate caller. This means that a piece of code containing a yield cannot be factored out and put into a separate function in the same way as other code.</li> <li>Performing such a factoring causes the called function to itself become a generator, and it is necessary to explicitly iterate over this second generator and re-yield any values that it produces.</li> <li>If yielding of values is the only concern, this can be performed without much difficulty using a loop.</li> <li>However, if the subgenerator is to interact properly with the caller in the case of calls to send(), throw() and close(), things become considerably more difficult. As will be seen later, the necessary code is very complicated, and it is tricky to handle all the corner cases correctly.</li> </ul> <h4 id="understand-yield-from">Understand <code class="language-plaintext highlighter-rouge">yield from</code> </h4> <ul> <li>yield from is a new syntax. You can check the codes for yield from in PEP380.</li> <li>This new syntax empowers you to refactor generators in a clean way by making it easy to yield every value from an iterator (which a generator conveniently happens to be).</li> <li>yield from also lets you chain generators together so that values bubble up and down the call stack without code having to do anything special.</li> <li>Let’s get one thing out of the way first. The explanation that yield from g is equivalent to for v in g: yield v does not even begin to do justice to what yield from is all about.</li> <li>Because, if all yield from does is expand the for loop, then it does not warrant adding yield from to the language and preclude a whole bunch of new features from being implemented in Python 2.x. PEP380 have the detail.</li> </ul> <h5 id="what-yield-from-does-is-it-establishes-a-transparent-bidirectional-connection-between-the-caller-and-the-sub-generator">What yield from does is it establishes a transparent bidirectional connection between the caller and the sub-generator:</h5> <ul> <li>The connection is “transparent” in the sense that it will propagate everything correctly too, not just the elements being generated (e.g. exceptions are propagated).</li> <li>The connection is “bidirectional” in the sense that data can be both sent from and to a generator.</li> </ul> <h4 id="example-of-using-recursion-in-generator">Example of using recursion in generator:</h4> <p>You can’t print 0,1,2,3,4 from following code:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">generator_recursion</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nf">generator_recursion</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">n</span>
    
<span class="n">gr</span> <span class="o">=</span> <span class="nf">generator_recursion</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">gr</span><span class="p">:</span>
   <span class="nf">print</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</code></pre></div></div> <p>You need to use yield from:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">generator_recursion</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">yield</span> <span class="k">from</span> <span class="nf">generator_recursion</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">n</span>
</code></pre></div></div> <h3 id="passing-values-into-a-generator">Passing values into a generator</h3> <p>In Python 2.5 there’s a simple way to pass values into a generator. <code class="language-plaintext highlighter-rouge">yield</code> became an expression, returning a value that can be assigned to a variable or otherwise operated on:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="k">yield</span> <span class="n">i</span><span class="p">)</span>
<span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="k">yield</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span>
</code></pre></div></div> <p>(Recommend that you always put parentheses around a yield expression.)</p> <p>Values are sent into a generator by calling its .send(value) method. This method resumes the generator’s code and the yield expression returns the specified value.</p> <p>Simple example:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">counter</span><span class="p">(</span><span class="n">maximum</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">maximum</span><span class="p">:</span>
        <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="k">yield</span> <span class="n">i</span><span class="p">)</span>
        <span class="c1"># If value provided, change counter
</span>        <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">val</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div> <p>The value of val is always None when regular <code class="language-plaintext highlighter-rouge">__next__()</code> method is called. When <code class="language-plaintext highlighter-rouge">.send(value)</code> is called. the val will be the value</p> <h4 id="how-do-sendvalue-resumes-the-generator">How do send(value) resumes the generator?</h4> <ul> <li>When calling next(), the code resume from the next line which after last yield.</li> <li>When calling <code class="language-plaintext highlighter-rouge">.send(value)</code>, the code resume from the last yield! And also yield a value back to <code class="language-plaintext highlighter-rouge">.send(value)</code> function (like <code class="language-plaintext highlighter-rouge">next()</code> do).</li> <li>You can even can’t send(value) at the very beginning, otherwise get error: TypeError: can’t send non-None value to a just-started generator</li> </ul> <h2 id="built-in-functions-for-iterators">Built-in functions for iterators</h2> <h3 id="map-and-filter-duplicate-the-features-of-generator-expressions">map() and filter() duplicate the features of generator expressions:</h3> <p>map(f, iterA, iterB, …) returns an iterator over the sequence f(iterA[0], iterB[0]), f(iterA[1], iterB[1]), f(iterA[2], iterB[2]), ….</p> <h3 id="filterpredicate-iter">filter(predicate, iter)</h3> <p>returns an iterator over all the sequence elements that meet a certain condition, and is similarly duplicated by list comprehensions.</p> <h3 id="enumerateiter-start0">enumerate(iter, start=0)</h3> <p>counts off the elements in the iterable returning 2-tuples containing the count (from start) and each element.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">([</span><span class="sh">'</span><span class="s">subject</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">verb</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">object</span><span class="sh">'</span><span class="p">]):</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="sh">'</span><span class="s">subject</span><span class="sh">'</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="sh">'</span><span class="s">verb</span><span class="sh">'</span><span class="p">)</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="sh">'</span><span class="s">object</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div> <h3 id="sortediterable-keynone-reversefalse">Sorted(iterable, key=None, reverse=False)</h3> <p>collects all the elements of the iterable into a list, sorts the list, and returns the sorted result. The key and reverse arguments are passed through to the constructed list’s sort() method.</p> <h3 id="the-anyiter-and-alliter">The any(iter) and all(iter)</h3> <p>built-ins look at the truth values of an iterable’s contents. any() returns True if any element in the iterable is a true value, and all() returns True if all of the elements are true values</p> <h3 id="zipitera-iterb-">zip(iterA, iterB, …)</h3> <p>takes one element from each iterable and returns them in a tuple</p> <h2 id="itertools-module">itertools module</h2> <p>The module standardizes a core set of fast, memory efficient tools that are useful by themselves or in combination. Together, they form an “iterator algebra” making it possible to construct specialized tools succinctly and efficiently in pure Python.</p> <h3 id="combinatoric-iterators">Combinatoric iterators:</h3> <h4 id="permutationsiterable-rnone">permutations(iterable, r=None)</h4> <ul> <li>Return successive r length permutations of elements in the iterable.</li> <li>Return a iterable object, elements are tuple.</li> <li>Elements are treated as unique based on their position, not on their value.</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> print<span class="o">([</span>p <span class="k">for </span>p <span class="k">in </span>permutations<span class="o">(</span><span class="s1">'pro'</span><span class="o">)])</span>
<span class="o">[(</span><span class="s1">'p'</span>, <span class="s1">'r'</span>, <span class="s1">'o'</span><span class="o">)</span>, <span class="o">(</span><span class="s1">'p'</span>, <span class="s1">'o'</span>, <span class="s1">'r'</span><span class="o">)</span>, <span class="o">(</span><span class="s1">'r'</span>, <span class="s1">'p'</span>, <span class="s1">'o'</span><span class="o">)</span>, <span class="o">(</span><span class="s1">'r'</span>, <span class="s1">'o'</span>, <span class="s1">'p'</span><span class="o">)</span>, <span class="o">(</span><span class="s1">'o'</span>, <span class="s1">'p'</span>, <span class="s1">'r'</span><span class="o">)</span>, <span class="o">(</span><span class="s1">'o'</span>, <span class="s1">'r'</span>, <span class="s1">'p'</span><span class="o">)]</span>
</code></pre></div></div> <h4 id="productiterables-repeat1">product(*iterables, repeat=1)</h4> <p>Cartesian product of input iterables. What Cartesian product do is as following: <code class="language-plaintext highlighter-rouge">product('ABCD', 'xy') --&gt; Ax Ay Bx By Cx Cy Dx Dy</code></p> <p><code class="language-plaintext highlighter-rouge">repeat</code> parameter</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">product</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="n">means</span> <span class="n">the</span> <span class="n">same</span> <span class="k">as</span> <span class="nf">product</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">A</span><span class="p">).</span>
<span class="c1"># product(range(2), repeat=3) --&gt; 000 001 010 011 100 101 110 111
</span></code></pre></div></div> <p>This function is roughly equivalent to the following code, except that the actual implementation does not build up intermediate results in memory:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">product</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">pools</span> <span class="o">=</span> <span class="p">[</span><span class="nf">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">)</span> <span class="k">for</span> <span class="n">pool</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span> <span class="o">*</span> <span class="n">repeat</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[[]]</span>
    <span class="k">for</span> <span class="n">pool</span> <span class="ow">in</span> <span class="n">pools</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">result</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">pool</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">yield</span> <span class="nf">tuple</span><span class="p">(</span><span class="n">prod</span><span class="p">)</span>
</code></pre></div></div> <h2 id="functools-module">functools module</h2> <p>A higher-order function takes one or more functions as input and returns a new function. The most useful tool in this module is the functools.partial() function.</p> <h3 id="functoolspartial">functools.partial()</h3> <p>The constructor for partial() takes the arguments (function, arg1, arg2, …, kwarg1=value1, kwarg2=value2). The resulting object is callable, so you can just call it to invoke function with the filled-in arguments.</p> <p>Example:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">functools</span>

<span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">subsystem</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Write the contents of </span><span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="s"> to the specified subsystem.</span><span class="sh">"""</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">%s: %s</span><span class="sh">'</span> <span class="o">%</span> <span class="p">(</span><span class="n">subsystem</span><span class="p">,</span> <span class="n">message</span><span class="p">))</span>
    <span class="bp">...</span>

<span class="n">server_log</span> <span class="o">=</span> <span class="n">functools</span><span class="p">.</span><span class="nf">partial</span><span class="p">(</span><span class="n">log</span><span class="p">,</span> <span class="n">subsystem</span><span class="o">=</span><span class="sh">'</span><span class="s">server</span><span class="sh">'</span><span class="p">)</span>
<span class="nf">server_log</span><span class="p">(</span><span class="sh">'</span><span class="s">Unable to open socket</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div> <h3 id="functoolsreduce">functools.reduce()</h3> <p><code class="language-plaintext highlighter-rouge">functools.reduce()</code> takes the first two elements A and B returned by the iterator and calculates func(A, B)</p> <p>Syntax: <code class="language-plaintext highlighter-rouge">functools.reduce(func, iterable[, initializer])</code> func must be a function that takes two elements and returns a single value.</p> <p><code class="language-plaintext highlighter-rouge">reduce()</code> is roughly equivalent to the following Python function:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">reduce</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="n">initializer</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">it</span> <span class="o">=</span> <span class="nf">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">initializer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nf">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">initializer</span>
    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nf">function</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></div> <p>Example: from functools import reduce</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="k">return</span> <span class="nf">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="nf">factorial</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div></div> <h2 id="small-functions-and-the-lambda-expression">Small functions and the lambda expression</h2> <p>When writing functional-style programs, you’ll often need little functions that act as <strong>predicates</strong> or that combine elements in some way.</p> <p>If there’s a Python built-in or a module function that’s suitable</p> <h3 id="operator--standard-operators-as-functions">operator — Standard operators as functions</h3> <p>The operator module exports a set of efficient functions corresponding to the intrinsic operators of Python. For example, operator.add(x, y) is equivalent to the expression x+y.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>

<span class="n">student_tuples</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="sh">'</span><span class="s">john</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
    <span class="p">(</span><span class="sh">'</span><span class="s">jane</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">B</span><span class="sh">'</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
    <span class="p">(</span><span class="sh">'</span><span class="s">dave</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">B</span><span class="sh">'</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
<span class="p">]</span>
<span class="nf">sorted</span><span class="p">(</span><span class="n">student_tuples</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="nf">itemgetter</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="c1"># equal to:
</span><span class="nf">sorted</span><span class="p">(</span><span class="n">student_tuples</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">student</span><span class="p">:</span> <span class="n">student</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> 
<span class="c1"># [('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]
</span></code></pre></div></div> <p>one way to write small functions is to use the lambda expression. (not recommend)</p> <p>An alternative is to just use the def statement and define a function in the usual way. (recommend)</p> <h2 id="recursion">Recursion</h2> <h3 id="recursion-introduce">Recursion introduce</h3> <p>In most case, recursion won’t be a good choice.</p> <ul> <li>Recursive implementations often consume more memory than non-recursive ones.</li> <li>In some cases, using recursion may result in slower execution time.</li> </ul> <p>Traversal of tree</p> <ul> <li>Recursion is good for Traversal of tree-like data structures.</li> </ul> <h3 id="recursion-in-python">Recursion in Python</h3> <ul> <li>You can find out what Python’s recursion limit is with a function from the sys module called getrecursionlimit().</li> <li>You can change it, too, with setrecursionlimit()</li> <li>When you call a function in Python, the interpreter creates a new local namespace so that names defined within that function don’t collide with identical names defined elsewhere.</li> </ul> <h2 id="functional-features-functions">functional features functions</h2> <p>Build-in functions: map() filter() reduce().</p> <h3 id="mapfunction-iterable-iterables">map(function, iterable, *iterables)</h3> <ul> <li>Return an iterator that applies function to every item of iterable, yielding the results.</li> <li>If additional iterables arguments are passed, function must take that many arguments and is applied to the items from all iterables in parallel.</li> <li>With multiple iterables, the iterator stops when the shortest iterable is exhausted.</li> <li>For cases where the function inputs are already arranged into argument tuples, see itertools.starmap().</li> <li>map() is Functional Style in Python. Although it can be replace by for loop.</li> </ul> <p>Advantage</p> <ul> <li>Since map() is written in C and is highly optimized, its internal implied loop can be more efficient than a regular Python for loop.</li> <li>map() returns a map object, which is an iterator that yields items on demand. Using map() is good for memory consumption. This is compare to Python for loop.</li> </ul> <h3 id="filterfunction-iterable">filter(function, iterable)</h3> <p>Construct an iterator from those elements of iterable for which function is true.</p> <ul> <li>Note that filter(function, iterable) is equivalent to the generator expression (item for item in iterable if function(item)) if function is not None and (item for item in iterable if item) if function is None.</li> </ul> <h2 id="faq">FAQ</h2> <ul> <li>What is the difference between generator and coroutine</li> <li>What is the difference between generator object and generator function?</li> </ul> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable post-side-sticky"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">Dec 25, 2024</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/python"> <i class="fas fa-tag fa-sm"></i> Python</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/python"> <div class="tag"> Python </div> </a> <a href="/blog/tag/javascript"> <div class="tag"> JavaScript </div> </a> </div> <div class="detail-item"> <div class="item-title">Content : </div> </div> <div class="toc-container"> <div class="toc-item"> <a href="#what-is-functional-programming"> # What is Functional Programming </a> </div> <div class="toc-item"> <a href="#iterator-iterable"> # Iterator, Iterable </a> </div> <div class="toc-item"> <a href="#for-loop-in-python"> # for loop in Python </a> </div> <div class="toc-item"> <a href="#generator"> # Generator </a> </div> <div class="toc-item"> <a href="#built-in-functions-for-iterators"> # Built-in functions for iterators </a> </div> <div class="toc-item"> <a href="#itertools-module"> # itertools module </a> </div> <div class="toc-item"> <a href="#functools-module"> # functools module </a> </div> <div class="toc-item"> <a href="#small-functions-and-the-lambda-expression"> # Small functions and the lambda expression </a> </div> <div class="toc-item"> <a href="#recursion"> # Recursion </a> </div> <div class="toc-item"> <a href="#functional-features-functions"> # functional features functions </a> </div> <div class="toc-item"> <a href="#faq"> # FAQ </a> </div> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>