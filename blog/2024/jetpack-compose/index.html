<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Jetpack Compose Overview | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2024/jetpack-compose/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <style>html{scroll-behavior:smooth}</style> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">Jetpack Compose Overview</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <h2 id="what-is-jetpack-compose">What is Jetpack Compose</h2> <p>XML has been a staple in Android development since the early days. Jetpack Compose represents a paradigm shift in Android UI development. The first preview of Jetpack Compose was announced in May 2019, and the framework was made ready for production in July 2021.</p> <ul> <li>Jetpack Compose is Android’s recommended modern toolkit for building native <strong>UI</strong>.</li> <li>You can think Jetpack Compose do the same job as React.js. It is declarative, update View according states, etc.</li> <li>You won’t be editing any XML layouts or using the Layout Editor.</li> <li>You will call composable functions to define what elements you want, and the Compose compiler will do the rest.</li> <li>In Jetpack compose you write declarative code that describes how data should be displayed as UI.</li> </ul> <h2 id="composable-functions">Composable functions</h2> <p>Jetpack Compose is built around composable functions. These functions let you define your app’s UI programmatically by describing how it should look and providing data dependencies, rather than focusing on the process of the UI’s construction (initializing an element, attaching it to a parent, etc.).</p> <p>To create a composable function, just add the <code class="language-plaintext highlighter-rouge">@Composable</code> annotation to the function name. The annotation tells the Kotlin compiler that this function is used by Jetpack Compose to convert data into UI.</p> <p>Composable functions are the building blocks of UI in Compose. This encouraging you to break your UI into a library of reusable elements.</p> <h3 id="hello-world-example">Hello World example</h3> <p>Create a new project: In The <code class="language-plaintext highlighter-rouge">MainActivity.kt</code> file</p> <ul> <li>Notice there are some automatically generated functions in this code, specifically the <code class="language-plaintext highlighter-rouge">onCreate()</code> and the <code class="language-plaintext highlighter-rouge">setContent()</code> functions.</li> <li>The <code class="language-plaintext highlighter-rouge">onCreate()</code> function is the entry point to this Android app and calls other functions to build the user interface.</li> <li>The <code class="language-plaintext highlighter-rouge">setContent()</code> function within the <code class="language-plaintext highlighter-rouge">onCreate()</code> function is used to define your layout through composable functions. All functions marked with the <code class="language-plaintext highlighter-rouge">@Composable</code> annotation can be called from the <code class="language-plaintext highlighter-rouge">setContent()</code> function or from other Composable functions.</li> </ul> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="nc">ComponentActivity</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="nf">setContent</span> <span class="p">{</span>
            <span class="nc">MessageCard</span><span class="p">(</span><span class="s">"Android"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">MessageCard</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">Text</span><span class="p">(</span><span class="n">text</span> <span class="p">=</span> <span class="s">"Hello $name!"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="basic-staff">Basic staff</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">mutableStateOf(value)</code> creates a <code class="language-plaintext highlighter-rouge">MutableState</code>, which is an observable type in Compose. Any changes to its value will schedule recomposition of any composable functions that read that value.</li> <li> <code class="language-plaintext highlighter-rouge">remember</code> stores objects in the composition, and forgets the object when the composable that called <code class="language-plaintext highlighter-rouge">remember</code> is removed from the composition.</li> <li> <code class="language-plaintext highlighter-rouge">rememberSaveable</code> retains the state across configuration changes by saving it in a Bundle.</li> </ul> <h3 id="recomposition">Recomposition</h3> <p>In an imperative UI model, to change a widget, you call a setter on the widget to change its internal state. In Compose, you call the composable function again with new data. Doing so causes the function to be recomposed–the widgets emitted by the function are redrawn, if necessary, with new data. The Compose framework can intelligently recompose only the components that changed.</p> <h3 id="composable-functions-just-like-react-components">Composable functions Just like React components</h3> <ul> <li>Composable functions can execute in any order</li> <li>Composable functions can run in parallel</li> <li>Recomposition skips as much as possible</li> <li>Recomposition is optimistic</li> <li>Composable functions might run quite frequently</li> </ul> <h2 id="layout">Layout</h2> <p>Constraints and Modifiers are keys to understand Compose Layout.</p> <h3 id="three-phases-in-compose">Three Phases in Compose</h3> <p>There are three phases in the process of transforming data into UI:</p> <ul> <li> <strong>composition</strong>(What to Show): transforme composable functions into a UI tree.</li> <li> <strong>layout</strong>(Where to Show): use this UI tree as input, the collection of layout nodes contain all the information needed to eventually decide on each node’s size and location in 2D space. during the layout phase the tree is reversed using the following three-step algorithm: <ul> <li>first a node <strong>measures</strong> its children if any and</li> <li>then based on those measurements it <strong>decides</strong> on its own size and,</li> <li>finally it <strong>places</strong> its children relative to its own position. At the end of the phase each layout note will have an assigned width and height and an x y coordinate of where it should be drawn. each node only visited once.</li> </ul> </li> <li> <strong>drawing</strong>(How to Show): now we know the sizes and XY coordinates of all of our layout nodes. the tree is traversed again from top to bottom and each node draws itself on the screen.</li> </ul> <p>We are focus on Layout here.</p> <h3 id="how-to-use-modifier">How to use Modifier</h3> <p>We can chain multiple modifiers, like <code class="language-plaintext highlighter-rouge">Modifier.clip(CircleShape).size(40.dp),</code>. Each modifier node wraps the rest of the chain and the layout node Within. For example when we chain a clip in a size modifier, the clip modifier node wraps the size modifier node which then wraps the image layout node in the layout phase:</p> <figure> <picture> <img src="/assets/img/android-modifier.png" class="img-fluid rounded z-depth-1" width="80%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="understand-constraints">Understand Constraints</h3> <p>Modifier will decide the positin, size, etc for the node. And Jetpack compose use ‘Constraints’ which come from parent’s node to layout nodes. that means Modifier and Constraint will work together to layout nodes. The Constraint can affect the size of composables, and Modifier(depend on which modifier) affect the Constraints.</p> <h3 id="how-constraint-affect-modifier">How Constraint affect Modifier?</h3> <ul> <li>For example, the passing in constraint is <code class="language-plaintext highlighter-rouge">w:0-300; h:0-400</code>, modifier is <code class="language-plaintext highlighter-rouge">size(50)</code>, then the modifier pass constraint <code class="language-plaintext highlighter-rouge">w:50; h:50</code> to next node.</li> <li>The passing in constraint is <code class="language-plaintext highlighter-rouge">w:0-300; h:0-400</code>, modifier is <code class="language-plaintext highlighter-rouge">size(500)</code>, then the modifier will adapt to constriant to be <code class="language-plaintext highlighter-rouge">w:300; h:400</code>.</li> <li>If the passing in constraint is <code class="language-plaintext highlighter-rouge">w:50-300; h:50-400</code>, modifier is <code class="language-plaintext highlighter-rouge">size(40)</code>, modifier will adapt to constriant to be <code class="language-plaintext highlighter-rouge">w:50; h:50</code>.</li> <li>If you don’t want node adhere to passing in constraint, you can use <code class="language-plaintext highlighter-rouge">requiredSize()</code>.</li> <li> <code class="language-plaintext highlighter-rouge">fillMaxSize()</code> will pass constraint <code class="language-plaintext highlighter-rouge">w:300; h:400</code> in.</li> <li> <code class="language-plaintext highlighter-rouge">wrapContentSize()</code> will reset the minium constraint. And also can put it’s child to the center.</li> </ul> <h3 id="how-modifier-adapt-constraint">How Modifier adapt constraint?</h3> <p>After the node get size, location etc, then it will pass the size, etc. back up the tree. The parent will decide the final size and location. Following is a good way to understand the interaction between modifier and contraint:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Image</span><span class="p">(</span>
    <span class="nf">painterResource</span><span class="p">(</span><span class="nc">R</span><span class="p">.</span><span class="n">drawable</span><span class="p">.</span><span class="n">hero</span><span class="p">),</span>
    <span class="n">contentDescription</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
    <span class="nc">Modifier</span>
        <span class="p">.</span><span class="nf">clip</span><span class="p">(</span><span class="nc">CircleShape</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">10</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="mi">100</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div> <figure> <picture> <img src="/assets/img/jetpack-compose-modifier-constraint.png" class="img-fluid rounded z-depth-1" width="80%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Here is the process:</p> <ul> <li>The clip modifier does not change the constraints.</li> <li>The padding modifier lowers the maximum constraints.</li> <li>The size modifier sets all constraints to 100dp.</li> <li>The Image adheres to those constraints and reports a size of 100 by 100dp.</li> <li>The padding modifier adds 10dp on all sizes, so it increases the reported width and height by 20dp.</li> <li>Now in the drawing phase, the clip modifier acts on a canvas of 120 by 120dp. So, it creates a circle mask of that size.</li> <li>The padding modifier then insets its content by 10dp on all sizes, so it lowers the canvas size to 100 by 100dp.</li> <li>The Image is drawn in that canvas. The image is clipped based on the original circle of 120dp, so the output is a non-round result.</li> </ul> <h2 id="material-design">Material Design</h2> <p>Compose is built to support Material Design principles. Many of its UI elements implement Material Design out of the box.</p> <h3 id="how-to-use">How to use</h3> <p>Jetpack Compose provides an implementation of Material Design 3 and its UI elements out of the box.</p> <blockquote> <p>Note: the Empty Compose Activity template generates a default theme for your project that allows you to customize MaterialTheme.</p> </blockquote> <p>For example, improving the appearance of <code class="language-plaintext highlighter-rouge">MessageCard</code> composable using Material Design styling.</p> <ol> <li>To start, wrap the <code class="language-plaintext highlighter-rouge">MessageCard</code> function with the Material theme created in your project, <code class="language-plaintext highlighter-rouge">YourProjectTheme</code>, as well as a <code class="language-plaintext highlighter-rouge">Surface</code>.</li> <li>Material Design is built around three pillars: Color, Typography, and Shape. You will add them one by one. <ul> <li>Color: Use MaterialTheme.colorScheme to style with colors from the wrapped theme.</li> <li>Typography: Material Typography styles are available in the MaterialTheme, just add them to the Text composables.</li> </ul> </li> </ol> <h2 id="faq">FAQ</h2> <ul> <li>Why not use HTML, CSS and JavaScript for UI?</li> </ul> <h2 id="references">References</h2> <ul> <li><a href="https://developer.android.com/" rel="external nofollow noopener" target="_blank">android developer website</a></li> <li><a href="https://developer.android.com/develop/ui/compose/layouts/constraints-modifiers" rel="external nofollow noopener" target="_blank">constraints and modifiers order</a></li> </ul> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable post-side-sticky"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">Jul 4, 2024</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/android"> <i class="fas fa-tag fa-sm"></i> Android</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/android"> <div class="tag"> Android </div> </a> <a href="/blog/tag/kotlin"> <div class="tag"> Kotlin </div> </a> </div> <div class="detail-item"> <div class="item-title">Content : </div> </div> <div class="toc-container"> <div class="toc-item"> <a href="#what-is-jetpack-compose"> # What is Jetpack Compose </a> </div> <div class="toc-item"> <a href="#composable-functions"> # Composable functions </a> </div> <div class="toc-item"> <a href="#layout"> # Layout </a> </div> <div class="toc-item"> <a href="#material-design"> # Material Design </a> </div> <div class="toc-item"> <a href="#faq"> # FAQ </a> </div> <div class="toc-item"> <a href="#references"> # References </a> </div> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>