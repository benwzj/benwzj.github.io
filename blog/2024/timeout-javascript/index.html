<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>About Timer in JavaScript | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2024/timeout-javascript/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">About Timer in JavaScript</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <p>The <code class="language-plaintext highlighter-rouge">setTimeout()</code> and <code class="language-plaintext highlighter-rouge">setInterval()</code> methods allow authors to schedule timer-based callbacks.</p> <ul> <li>Timers can be nested; after five such nested timers, however, the interval is forced to be at least four milliseconds.</li> <li>This API does not guarantee that timers will run exactly on schedule. Delays due to CPU load, other tasks, nested level, inactive tab, etc, are to be expected.</li> <li>Non-number <code class="language-plaintext highlighter-rouge">delay</code> values are silently coerced into numbers.</li> <li>You can include a string instead of a function, which is compiled and executed when the timer expires. This syntax is not recommended for the same reasons that make using <code class="language-plaintext highlighter-rouge">eval()</code> a security risk.</li> </ul> <p>I am not gonna talk about how to use it. But trying to dig a bit deepper.</p> <p><code class="language-plaintext highlighter-rouge">setTimeout()</code> and <code class="language-plaintext highlighter-rouge">setInterval()</code> methods work in a very similiar machanism.</p> <h2 id="how-it-work-underhood">How it work underhood</h2> <p><code class="language-plaintext highlighter-rouge">setTimeout()</code> is web API which means there are standards to define how it work. Becaue it need to make sure all browsers work consistently. Timers are described in the timers section of <a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html" rel="external nofollow noopener" target="_blank">HTML Living Standard</a>.</p> <p><code class="language-plaintext highlighter-rouge">setTimeout()</code>s are the functions (a subset) that are common to all workers and to the main thread. They are from <code class="language-plaintext highlighter-rouge">WindowOrWorkerGlobalScope</code>. Objects that implement the <code class="language-plaintext highlighter-rouge">WindowOrWorkerGlobalScope</code> mixin have a map of active timers, which is a map, initially empty. Each key in this map is an identifier for a timer, and each value is a <code class="language-plaintext highlighter-rouge">DOMHighResTimeStamp</code>, representing the expiry time for that timer.</p> <p><code class="language-plaintext highlighter-rouge">setTimeout()</code> will run the <a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timer-initialisation-steps" rel="external nofollow noopener" target="_blank">timer initialization steps</a> and put entries into the map of active timers. In completionStep, an algorithm step, which <strong>queues a global task</strong> on the timer task source given global to run task.</p> <h2 id="the-this-problem">The “this” problem</h2> <p>Code executed by setTimeout() is called from an execution context separate from the function from which setTimeout was called. If you have not set <code class="language-plaintext highlighter-rouge">this</code> in the call or with bind, it will default to the window (or global) object. It will not be the same as the <code class="language-plaintext highlighter-rouge">this</code> value for the function that called setTimeout.</p> <p>Solutions:</p> <ul> <li>A common way to solve the problem is to use a wrapper function that sets <code class="language-plaintext highlighter-rouge">this</code> to the required value.</li> <li>Alternatively, you can use bind() to set the value of this for all calls to a given function</li> </ul> <h2 id="settimeout-and-recursion">setTimeout and Recursion</h2> <p>The act of a function calling itself, recursion is used to solve problems that contain smaller sub-problems. A recursive function can receive two inputs: a base case (ends recursion) or a recursive case (resumes recursion).</p> <p>To understand Recursion, you need to understand closure, call stack, etc.</p> <p>In JavaScript, Recursion is limited by stack size. It is easy to explode call stack. For example: Function below returns the maximum size of the call stack available in the JavaScript runtime in which the code is run.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getMaxCallStackSize</span> <span class="o">=</span> <span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nf">getMaxCallStackSize</span><span class="p">(</span><span class="o">++</span><span class="nx">i</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">getMaxCallStackSize</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
</code></pre></div></div> <p>But if call function itself in setTimeout(), it is still Recursion? just like below:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">timer</span> <span class="o">=</span> <span class="p">()</span><span class="o">=&gt;</span><span class="p">{</span>
  <span class="nx">count</span> <span class="o">--</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">currentTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">().</span><span class="nf">getMilliseconds</span><span class="p">();</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
    <span class="nf">setTimeout </span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
      <span class="kd">let</span> <span class="nx">executionTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">().</span><span class="nf">getMilliseconds</span><span class="p">();</span>
      <span class="nf">writeLog</span><span class="p">(</span><span class="nx">currentTime</span><span class="p">,</span> <span class="nx">executionTime</span><span class="p">);</span>
      <span class="nf">timer</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>It is still called recursion, or called nested setTimeout. But their implement is different.</p> <h2 id="understand-the-execution-order">Understand the execution order</h2> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">wait</span> <span class="o">=</span> <span class="nx">ms</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nc">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nf">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">ms</span><span class="p">));</span>
<span class="nf">wait</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nf">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>
<span class="nf">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="mi">0</span><span class="p">);</span>
<span class="nb">Promise</span><span class="p">.</span><span class="nf">resolve</span><span class="p">().</span><span class="nf">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">2</span><span class="p">)).</span><span class="nf">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> 

<span class="c1">// When execute this script, the order of log will be: "1, 2, 3, 4, 5"</span>
</code></pre></div></div> <p>Promise and setTimeout() both are using event loop, callback queue. But they have some difference.</p> <h3 id="microtask-macrotask-concept">microtask, macrotask concept</h3> <p>There are <strong>microtask queue</strong> and <strong>macrotask queue</strong> in JS. Callbacks of Promise objects will be microtasks.</p> <ul> <li> <p>The macrotasks, or just call tasks, which is any JavaScript scheduled to be run by the standard mechanisms such as initially starting to execute a program, an event triggering a callback, and so forth. Other than by using events (like <code class="language-plaintext highlighter-rouge">onClick</code>), you can enqueue a task by using <code class="language-plaintext highlighter-rouge">setTimeout()</code> or <code class="language-plaintext highlighter-rouge">setInterval()</code>.</p> </li> <li> <p>The microtasks, which are programmed for things that should happen immediately after the script that is currently running, such as performing something asynchronous without supporting the penalty of creating a new macrotask. These microtasks are <strong>glued</strong> into the microtask queue which is processed after the macrotasks and at the end of the execution of each macrotask provided there is no Javascript running. Among the microtask are the callbacks of Promise objects. If we add new microtasks to microtask queue during the execution of the microtasks, they are also executed.</p> </li> </ul> <p>So, As a corollary of this sequence we could say that two macrotasks cannot be executed one after the other if, in between, the microtasks tail has elements.</p> <h2 id="the-setinterval">The <code class="language-plaintext highlighter-rouge">setInterval()</code> </h2> <p>The <code class="language-plaintext highlighter-rouge">setInterval()</code> function is commonly used to set a delay for functions that are executed again and again, such as animations. You can cancel the interval using <code class="language-plaintext highlighter-rouge">clearInterval()</code>.</p> <p>Ensure that execution duration is shorter than interval frequency when using <code class="language-plaintext highlighter-rouge">setInterval()</code>. If there is a possibility that your logic could take longer to execute than the interval time, it is recommended that you recursively call a named function using <code class="language-plaintext highlighter-rouge">setTimeout()</code>.</p> <p>For example, if using <code class="language-plaintext highlighter-rouge">setInterval()</code> to poll a remote server every 5 seconds, network latency, an unresponsive server, and a host of other issues could prevent the request from completing in its allotted time. As such, you may find yourself with queued up XHR requests that won’t necessarily return in order.</p> <p>In these cases, a recursive <code class="language-plaintext highlighter-rouge">setTimeout()</code> pattern is preferred:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Your logic here</span>

    <span class="nf">loop</span><span class="p">();</span>
  <span class="p">},</span> <span class="nx">delay</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div></div> <p>loop() is recursively called inside setTimeout() after the logic has completed executing. While this pattern does not guarantee execution on a fixed interval, it does guarantee that the previous interval has completed before recursing.</p> <h2 id="common-using-way-in-react">Common using way in React</h2> <ul> <li>Using <code class="language-plaintext highlighter-rouge">ref</code> to mark intervalID.</li> <li> <code class="language-plaintext highlighter-rouge">clearInterval(theOldInterval)</code> before start a new interval.</li> </ul> <p>Example: building a stopwatch</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">Stopwatch</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">startTime</span><span class="p">,</span> <span class="nx">setStartTime</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">now</span><span class="p">,</span> <span class="nx">setNow</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">intervalRef</span> <span class="o">=</span> <span class="nf">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="kd">function</span> <span class="nf">handleStart</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">setStartTime</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nf">now</span><span class="p">());</span>
    <span class="nf">setNow</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nf">now</span><span class="p">());</span>

    <span class="nf">clearInterval</span><span class="p">(</span><span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
    <span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nf">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nf">setNow</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nf">now</span><span class="p">());</span>
    <span class="p">},</span> <span class="mi">10</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nf">handleStop</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">clearInterval</span><span class="p">(</span><span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">let</span> <span class="nx">secondsPassed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">startTime</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">now</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">secondsPassed</span> <span class="o">=</span> <span class="p">(</span><span class="nx">now</span> <span class="o">-</span> <span class="nx">startTime</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Time</span> <span class="nx">passed</span><span class="p">:</span> <span class="p">{</span><span class="nx">secondsPassed</span><span class="p">.</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">3</span><span class="p">)}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleStart</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="nx">Start</span>
      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleStop</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="nx">Stop</span>
      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="fqa">FQA</h2> <h3 id="what-happen-if-not-clearinterval">What happen if not <code class="language-plaintext highlighter-rouge">clearInterval()</code> </h3> <h2 id="reference">Reference</h2> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/setTimeout" rel="external nofollow noopener" target="_blank">MDN doc</a></li> <li><a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html" rel="external nofollow noopener" target="_blank">html.spec</a></li> </ul> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">Feb 3, 2024</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/javascript"> <i class="fas fa-tag fa-sm"></i> JavaScript</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/web-api"> <div class="tag"> Web-API </div> </a> <a href="/blog/tag/timer"> <div class="tag"> Timer </div> </a> <a href="/blog/tag/recursion"> <div class="tag"> Recursion </div> </a> </div> <div class="detail-item"> <div class="item-title">Content : </div> </div> <div class="toc-container"> <div class="toc-item"> <a href="#how-it-work-underhood"> # How it work underhood </a> </div> <div class="toc-item"> <a href="#the-this-problem"> # The "this" problem </a> </div> <div class="toc-item"> <a href="#settimeout-and-recursion"> # setTimeout and Recursion </a> </div> <div class="toc-item"> <a href="#understand-the-execution-order"> # Understand the execution order </a> </div> <div class="toc-item"> <a href="#the-setinterval"> # The `setInterval()` </a> </div> <div class="toc-item"> <a href="#common-using-way-in-react"> # Common using way in React </a> </div> <div class="toc-item"> <a href="#fqa"> # FQA </a> </div> <div class="toc-item"> <a href="#reference"> # Reference </a> </div> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>