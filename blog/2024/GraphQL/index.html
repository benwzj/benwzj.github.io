<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>GraphQL Introduction | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2024/GraphQL/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">GraphQL Introduction</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <h2 id="graphql-concept">GraphQL Concept</h2> <p>GraphQL is a query <strong>language</strong> for your API, and a server-side runtime for executing queries using a type system you define for your data.</p> <ul> <li> <strong>The GraphQL query language</strong>: basically about <strong>selecting fields</strong> on objects.</li> <li> <strong>A GraphQL service</strong>: it is created by defining <strong>types</strong> and <strong>fields on those types</strong>, then providing functions for each field on each type.</li> <li>In <strong>a GraphQL operation</strong>: the client specifies how to structure the data when it is returned by the server. This makes it possible for the client to query only for the data it needs, in the format that it needs it in.</li> </ul> <p>We usually compare GraphQL and REST.</p> <h3 id="graphql-vs-rest">GraphQL vs REST</h3> <p>(GrappQL usually serving over HTTP, because HTTP ubiquity. )</p> <p>REST uses <strong>“resources”</strong> as its core concept. That means entities are identified by URIs. In contrast, GraphQL’s conceptual model is an entity <strong>graph</strong>. A GraphQL server operates on a single URL/endpoint, usually /graphql, and all GraphQL requests for a given service should be directed at this endpoint.</p> <p>In a system like REST, you can only pass a single set of arguments - the query parameters and URL segments in your request. But in GraphQL, every field and nested object can get its own set of arguments, making GraphQL a complete replacement for making multiple API fetches.</p> <h3 id="graphql-has-three-top-level-operations">GraphQL has three top-level operations:</h3> <ol> <li>Query - read-only fetch</li> <li>Mutation - write, followed by a fetch</li> <li>Subscription - long-lived connection for receiving data</li> </ol> <p>GraphQL exposes these operations via a schema that defines the capabilities of an API. A schema is comprised of types, which can be root types (query, mutation, or subscription) or user-defined types.</p> <blockquote class="block-warning"> <p>Developers start with a schema to define the capabilities of their GraphQL API, which a client application will communicate with.</p> </blockquote> <h2 id="basic-example">Basic example</h2> <ol> <li>A GraphQL service define object types: <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>type Query {
  me: User
}
type User {
  id: ID
  name: String
}
</code></pre></div> </div> <p>Along with functions for each field on each type:</p> <div class="language-js highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">Query_me</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">request</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">user</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nf">User_name</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">user</span><span class="p">.</span><span class="nf">getName</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li>After a GraphQL service is running, it can receive GraphQL queries to and execute. For example, the query: <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>{
  me {
 name
  }
}
</code></pre></div> </div> <p>Could produce the following JSON result:</p> <div class="language-json highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"me"</span><span class="p">:{</span><span class="w">
 </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Luke Skywalker"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div> </div> </li> </ol> <h2 id="basic-concepts">Basic Concepts</h2> <ul> <li> <strong>Arguments</strong>: (just like arguments in Function()) In a system like REST, you can only pass a single set of arguments - the query parameters and URL segments in your request. In GraphQL, every field and nested object can get its own set of arguments. It let you fetch more specific data.</li> <li> <strong>Aliases</strong>: They let you rename the result of a field to anything you want.</li> <li> <strong>fragments</strong>: (just like Functions) GraphQL includes reusable units called fragments. Fragments let you construct sets of fields, and then include them in queries where you need to.</li> <li>The <strong>Operation Type</strong> is either query, mutation, or subscription and describes what type of operation you’re intending to do.</li> <li>The <strong>Operation Name</strong> is a meaningful and explicit name for your operation.</li> <li> <strong>Variables</strong>: (<code class="language-plaintext highlighter-rouge">$variableName: variableType</code>) All declared variables must be either scalars, enums, or input object types.</li> <li>Directives: The core GraphQL specification includes exactly two directives, which must be supported by any spec-compliant GraphQL server implementation: <ul> <li> <code class="language-plaintext highlighter-rouge">@include(if: Boolean)</code> Only include this field in the result if the argument is <code class="language-plaintext highlighter-rouge">true</code>.</li> <li> <code class="language-plaintext highlighter-rouge">@skip(if: Boolean)</code> Skip this field if the argument is <code class="language-plaintext highlighter-rouge">true</code>.</li> </ul> </li> </ul> <h2 id="graphql-schema-language">GraphQL schema language</h2> <p>The most basic components of a GraphQL schema are object types, which just represent a kind of object you can fetch from your service, and what fields it has.</p> <h3 id="the-query-and-mutation-types">The Query and Mutation types</h3> <p>Most types in your schema will just be normal object types, but there are two types that are special within a schema:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>schema {
  query: Query
  mutation: Mutation
}
</code></pre></div></div> <h3 id="scalar-types">Scalar types:</h3> <p>they represent the leaves of the query.</p> <h3 id="interface-type">Interface type:</h3> <p>An Interface is an abstract type that includes a certain set of fields that a type must include to implement the interface. (Like class)</p> <h3 id="union-types">Union types:</h3> <p>Union types are very similar to interfaces, but they don’t get to specify any common fields between the types. <code class="language-plaintext highlighter-rouge">union SearchResult = Human | Droid | Starship</code> Wherever we return a SearchResult type in our schema, we might get a Human, a Droid, or a Starship.</p> <h3 id="input-types">Input types:</h3> <p>in the GraphQL schema language, input types look exactly the same as regular object types, but with the keyword input instead of type:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>input ReviewInput {
  stars: Int!
  commentary: String
}
</code></pre></div></div> <p>Input type is particularly valuable in the case of mutations, where you might want to pass in a whole object to be created. You can’t mix input and output types in your schema. Input object types also can’t have arguments on their fields.</p> <h2 id="authorization">Authorization</h2> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable post-side-sticky"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">May 11, 2024</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/language"> <i class="fas fa-tag fa-sm"></i> Language</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/graphql"> <div class="tag"> GraphQL </div> </a> <a href="/blog/tag/rest"> <div class="tag"> REST </div> </a> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>