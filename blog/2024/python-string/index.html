<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Python String | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2024/python-string/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <style>html{scroll-behavior:smooth}</style> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">Python String</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <p>Textual data in Python is handled with <code class="language-plaintext highlighter-rouge">str</code> objects, or call strings. Strings are immutable sequences of Unicode code points.</p> <ul> <li>Like JavaScript, strings in Python are arrays of bytes representing unicode characters.</li> <li>Square brackets can be used to access elements of the string.</li> <li>You can loop through a string.</li> <li>Using <code class="language-plaintext highlighter-rouge">len()</code> to get length of a string.</li> <li>Support keyword in, not in.</li> <li>Python doesn‚Äôt have character type, a single character is simply a string with a length of 1.</li> <li>You can assign a multiline string to a variable by using three quotes.</li> <li>Python has a set of built-in methods that you can use on strings.</li> </ul> <h2 id="basic-operation">Basic Operation</h2> <h3 id="string-slice-syntax">String slice syntax</h3> <p>string slice is a convenient way to operate string.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">b</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Hello, World!</span><span class="sh">"</span>
<span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>    <span class="c1">#"l"
</span><span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>  <span class="c1">#"llo"
</span><span class="n">b</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1">#reverse a string: "!dlroW ,olleH"
</span></code></pre></div></div> <h3 id="split-string">split string</h3> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Hello, World!</span><span class="sh">"</span>
<span class="nf">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">"</span><span class="s">,</span><span class="sh">"</span><span class="p">))</span> <span class="c1"># ['Hello', ' World!']
</span></code></pre></div></div> <h3 id="join-string">join string</h3> <p>opposite of split(), joins the elements in the given list together.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">Hello</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s"> World!</span><span class="sh">'</span><span class="p">]</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">,</span><span class="sh">"</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="c1"># "Hello, World!"
</span></code></pre></div></div> <h3 id="replace">replace</h3> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Hello, World!</span><span class="sh">"</span>
<span class="nf">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sh">"</span><span class="s">H</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">J</span><span class="sh">"</span><span class="p">))</span> <span class="c1"># "Jello, World!"
</span></code></pre></div></div> <h3 id="find-and-rfind">find() and rfind()</h3> <p>find() return the index of the first location. rfine() return the index of last one.</p> <h3 id="slower-supper">s.lower(), s.upper()</h3> <p>returns the lowercase or uppercase version of the string</p> <h3 id="translate">translate()</h3> <p>The <code class="language-plaintext highlighter-rouge">translate()</code> method returns a string where some specified characters are replaced with the character described in a dictionary, or in a mapping table.</p> <ul> <li>Use the str.maketrans() method to create a mapping table.</li> </ul> <h2 id="str-object">str Object</h2> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">str</span><span class="p">(</span><span class="nb">object</span><span class="o">=</span><span class="sh">''</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">str</span><span class="p">(</span><span class="nb">object</span><span class="o">=</span><span class="sa">b</span><span class="sh">''</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">'</span><span class="s">utf-8</span><span class="sh">'</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="sh">'</span><span class="s">strict</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div> <p>Return a string version of object. If object is not provided, returns the empty string. Otherwise, the behavior of <code class="language-plaintext highlighter-rouge">str()</code> depends on whether encoding or errors is given.</p> <p><code class="language-plaintext highlighter-rouge">print("20 days are " + str(20*24*60*60) +" seconds")</code></p> <h2 id="string-module">String module</h2> <p>string module is a built-in module and we have to import it before using any of its constants and classes. Because str class, String module have been old. and you should not use.</p> <h2 id="string-format">String format</h2> <p>There are several way to format, manipulate string:</p> <ul> <li>printf-style, template, str.format() have been old style way.</li> <li>f-string is the latest way and recommend use.</li> </ul> <h3 id="printf-style-string-formatting-old-sytle">printf-style String Formatting (old sytle)</h3> <p>String objects have one unique built-in operation: the % operator (modulo). The effect is similar to using the sprintf() in the C language. Example:</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">print</span><span class="p">(</span><span class="err">'</span><span class="o">%</span><span class="p">(</span><span class="n">language</span><span class="p">)</span><span class="n">s</span> <span class="n">has</span> <span class="o">%</span><span class="p">(</span><span class="n">number</span><span class="p">)</span><span class="mo">03</span><span class="n">d</span> <span class="n">quote</span> <span class="n">types</span><span class="p">.</span><span class="err">'</span> <span class="o">%</span>
      <span class="p">{</span><span class="err">'</span><span class="n">language</span><span class="err">'</span><span class="o">:</span> <span class="s">"Python"</span><span class="p">,</span> <span class="s">"number"</span><span class="o">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="c1">// Python has 002 quote types.</span>
</code></pre></div></div> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">dec2hexstring</span><span class="p">(</span><span class="n">dec</span><span class="p">):</span>
    <span class="n">decimal</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>
    <span class="n">hexa</span> <span class="o">=</span> <span class="sh">'</span><span class="s">%#X</span><span class="sh">'</span> <span class="o">%</span> <span class="n">decimal</span>
    <span class="k">return</span> <span class="n">hexa</span>
</code></pre></div></div> <p>But recommend to use the newer formatted string literals, the str.format() interface, or template strings. f-String is latest way to format string!</p> <h3 id="strformatargs-kwargs">str.format(*args, **kwargs)</h3> <p>Perform a string formatting operation. (Format string means create string, make string.) The string on which this method is called can contain literal text or replacement fields delimited by braces {}.</p> <ul> <li>Introduced in Python 2.6.</li> <li>str.format(), when deal with multiple arguments, and long strings. it will looks verbose.</li> </ul> <p><code class="language-plaintext highlighter-rouge">"The sum of 1 + 2 is {0}".format(1+2)</code> get <code class="language-plaintext highlighter-rouge">'The sum of 1 + 2 is 3'</code></p> <p><code class="language-plaintext highlighter-rouge">'{2}, {1}, {0}'.format('a', 'b', 'c')</code> get <code class="language-plaintext highlighter-rouge">'c, b, a'</code></p> <h4 id="format-string-syntax">Format String Syntax:</h4> <p><code class="language-plaintext highlighter-rouge">replacement_field ::= "{" [field_name] ["!" conversion] [":" format_spec] "}"</code></p> <p><code class="language-plaintext highlighter-rouge">field_name</code> can be 0, 1, 2‚Ä¶ which is positional of the parameters. or be nothing, which still positional. or be key name of the dic which is the parameter. or be attribute of object which is the parameter.</p> <p><code class="language-plaintext highlighter-rouge">conversion</code> have three options: !s, !r, !a <code class="language-plaintext highlighter-rouge">"repr() shows quotes: {!r}; str() doesn't: {!s}".format('test1', 'test2')</code> get <code class="language-plaintext highlighter-rouge">"repr() shows quotes: 'test1'; str() doesn't: test2"</code></p> <p><code class="language-plaintext highlighter-rouge">format_spec</code> is a Mini-Languag! Start from ‚Äò:‚Äô. For example display in Hexadecimal, or octal, binary. It can do more, specify the type, fill, align, width, precision :</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for </span>align, text <span class="k">in </span>zip<span class="o">(</span><span class="s1">'&lt;^&gt;'</span>, <span class="o">[</span><span class="s1">'left'</span>, <span class="s1">'center'</span>, <span class="s1">'right'</span><span class="o">])</span>:
...     <span class="s1">'{0:{fill}{align}16}'</span>.format<span class="o">(</span>text, <span class="nv">fill</span><span class="o">=</span>align, <span class="nv">align</span><span class="o">=</span>align<span class="o">)</span>
...
<span class="s1">'left&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;'</span>
<span class="s1">'^^^^^center^^^^^'</span>
<span class="s1">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;right'</span>
</code></pre></div></div> <p>Using the comma as a thousands separator:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="s1">'{:,}'</span>.format<span class="o">(</span>1234567890<span class="o">)</span>
<span class="s1">'1,234,567,890'</span>
</code></pre></div></div> <p>Nesting arguments:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">align</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="nf">zip</span><span class="p">(</span><span class="sh">'</span><span class="s">&lt;^&gt;</span><span class="sh">'</span><span class="p">,</span> <span class="p">[</span><span class="sh">'</span><span class="s">left</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">center</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">right</span><span class="sh">'</span><span class="p">]):</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">{:{fill}{align}30}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">align</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">align</span><span class="p">))</span>
</code></pre></div></div> <h3 id="template-strings">Template strings</h3> <p>Template strings is very simple string formatting tool which focus on substitutions.</p> <p>A primary use case for template strings is for internationalization (i18n) since in that context, the simpler syntax and functionality makes it easier to translate than other built-in string formatting facilities in Python. The string module provides a Template class that implements these rules. Main methods is <code class="language-plaintext highlighter-rouge">substitute()</code>, and <code class="language-plaintext highlighter-rouge">safe_substitute()</code></p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">string</span> <span class="kn">import</span> <span class="n">Template</span>
<span class="n">s</span> <span class="o">=</span> <span class="nc">Template</span><span class="p">(</span><span class="sh">'</span><span class="s">$who likes $what</span><span class="sh">'</span><span class="p">)</span>
<span class="n">s1</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="nf">substitute</span><span class="p">(</span><span class="n">who</span><span class="o">=</span><span class="sh">'</span><span class="s">tim</span><span class="sh">'</span><span class="p">,</span> <span class="n">what</span><span class="o">=</span><span class="sh">'</span><span class="s">kung pao</span><span class="sh">'</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span> <span class="c1">#'tim likes kung pao'
</span></code></pre></div></div> <h3 id="formatted-string-literal--f-strings-python-36-new-syntax">formatted string literal / f-Strings (Python 3.6+ new syntax)</h3> <ul> <li>(f-String are similar to JavaScript‚Äôs Template Literal)</li> <li>A formatted string literal or f-string is a string literal that is prefixed with ‚Äòf‚Äô or ‚ÄòF‚Äô.</li> <li>These strings may contain replacement fields, which are expressions delimited by curly braces {}.</li> <li>While other string literals always have a constant value, formatted strings are really expressions evaluated at run time.</li> <li>f-strings are a great new way to format strings. Not only are they more readable, more concise, and less prone to error than other ways of formatting, but they are also faster!</li> <li>format syntax is similar to str.format()</li> </ul> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">name</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Fred</span><span class="sh">"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="sh">"</span><span class="s">He said his name is </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s">.</span><span class="sh">"</span>
<span class="sh">"</span><span class="s">He said his name is </span><span class="sh">'</span><span class="s">Fred</span><span class="sh">'</span><span class="s">.</span><span class="sh">"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="sh">"</span><span class="s">He said his name is </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">.</span><span class="sh">"</span>
<span class="sh">"</span><span class="s">He said his name is Fred.</span><span class="sh">"</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">1024</span>
<span class="o">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">number</span><span class="si">:</span><span class="c1">#0x</span><span class="si">}</span><span class="sh">"</span>  <span class="c1"># using integer format specifier
</span><span class="sh">'</span><span class="s">0x400</span><span class="sh">'</span>
</code></pre></div></div> <ul> <li>Support triple quote mark. So it is easy to support Multiline f-Strings</li> <li>f-string support function</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> def to_lowercase<span class="o">(</span>input<span class="o">)</span>:
...     <span class="k">return </span>input.lower<span class="o">()</span>

<span class="o">&gt;&gt;&gt;</span> name <span class="o">=</span> <span class="s2">"Eric Idle"</span>
<span class="o">&gt;&gt;&gt;</span> f<span class="s2">"{to_lowercase(name)} is funny."</span>
<span class="s1">'eric idle is funny.'</span>
</code></pre></div></div> <h2 id="unicode-support">Unicode Support</h2> <p>Great presentation about Unicode: https://nedbatchelder.com/text/unipain.html</p> <h3 id="overview">Overview</h3> <p>Strings can either be represented in bytes or unicode code points. Byte strings and unicode strings each have a method to convert it to the other type of string.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unicode .encode() ‚Üí bytes
bytes .decode() ‚Üí unicode
</code></pre></div></div> <p>In Python 2, a string is by default a binary string and you need to use u‚Äô‚Äô to mark a string as a Unicode string. If you try to perform a string operation that combines a unicode string with a byte string, Python 2 try to be helpful, it will implicitly decode the byte string to produce a second unicode string, then complete the operation. But the conversion from int to float can‚Äôt fail, while byte string to unicode string can.</p> <p>In Python 3, a string by default is a Unicode string (You don‚Äôt need to know HOW Python deal with it), and you need to use b‚Äô‚Äô to explicitly mark a string as a binary string. bytes and str are different types. In Python3, they are not converted to each other implicitly. You need to handle both types by yourself.</p> <p>The default encoding for Python source code is UTF-8, so you can simply include a Unicode character (or use u escape) in a string literal:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print<span class="o">(</span><span class="s2">"Fichier non trouv√©"</span><span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s2">"</span><span class="se">\u</span><span class="s2">0394"</span>     <span class="c"># Using a 16-bit hex value</span>
<span class="s1">'\u0394'</span>
</code></pre></div></div> <p>Python 3 also supports using Unicode characters in identifiers. (JavaScript support as well)</p> <h3 id="unicode-sandwich-theory">Unicode Sandwich theory</h3> <figure> <picture> <img src="/assets/img/python-string-unicode.jpg" class="img-fluid rounded z-depth-1" width="60%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>A good practice is to decode your bytes in UTF-8 (or an encoder that was used to create those bytes) as soon as they are loaded from a file. Run your processing on unicode code points through your Python code, and then write back into bytes into a file using UTF-8 encoder in the end.</p> <p>Python3 handles Unicode strings with unicode code points. You don‚Äôt need to know HOW. This is the job of Python 3. You can just take it as a black box. Python3 make sure you can use all the methods of str type. Just remember the Sandwich mode! What you need to handle is decode as soon as possible, and encode at the end.</p> <h3 id="5-fact-of-life-about-unicode-string-in-python">5 fact of life about unicode string in Python</h3> <ol> <li> <p>everything in a computer is bytes. Files on disk are a series of bytes, and network connections only transmit bytes.</p> </li> <li> <p>The world needs more than 256 symbols</p> </li> <li>Bytes and Unicode, Need to keep them straight, Need to deal with both. <ul> <li>You can‚Äôt pretend that everything is bytes, or everything is unicode. You need to use each for their purpose, and explicitly convert between them as needed.</li> <li>So Python 2‚Äôs pain is deferred: you think your program is correct, and find out later that it fails with exotic characters.</li> <li>With Python 3, your code fails immediately, so even if you are only handling ASCII, you have to explicitly deal with the difference between bytes and unicode.</li> </ul> </li> <li> <p>Encoding is out-of-band. You cannot infer the encoding of bytes. You must be told, or you have to guess.</p> </li> <li>Data is dirty. Sometimes you are told wrong.</li> </ol> <h3 id="3-pro-tips">3 Pro tips</h3> <ul> <li>Unicode Sandwich</li> <li>Know what you have! Bytes or Unicode? If bytes, what encoding?</li> <li>Test Unicode</li> </ul> <h3 id="reading-files">Reading files</h3> <p>In Python 3, the two modes produce different results. When you open a file in text mode, either with ‚Äúr‚Äù, or by defaulting the mode entirely, the data read from the file is implicitly decoded into Unicode, and you get str objects. If you open a file in binary mode, by supplying ‚Äúrb‚Äù as the mode, then the data read from the file is bytes, with no processing done on them.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> open<span class="o">(</span><span class="s2">"hello.txt"</span>, <span class="s2">"r"</span><span class="o">)</span>.read<span class="o">()</span>
<span class="s1">'Hello, world!\n'</span>
<span class="o">&gt;&gt;&gt;</span> open<span class="o">(</span><span class="s2">"hello.txt"</span>, <span class="s2">"rb"</span><span class="o">)</span>.read<span class="o">()</span>
b<span class="s1">'Hello, world!\n'</span>
</code></pre></div></div> <p>To get the file read properly, you should specify an encoding to use. The open() function now has an optional encoding parameter.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> open<span class="o">(</span><span class="s2">"hi_utf8.txt"</span>, <span class="s2">"r"</span>, <span class="nv">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="o">)</span>.read<span class="o">()</span>
<span class="s1">'Hi \u2119\u01b4\u2602\u210c\xf8\u1f24'</span>
<span class="o">&gt;&gt;&gt;</span> open<span class="o">(</span><span class="s2">"hi_utf8.txt"</span>, <span class="s2">"r"</span><span class="o">)</span>.read<span class="o">()</span> <span class="c"># wrong encoding</span>
<span class="s1">'Hi \xe2\u201e\u2122\xc6\xb4\xe2\u02dc\u201a\xe2\u201e\u0152\xc3\xb8\xe1\xbc\xa4'</span>
</code></pre></div></div> <h3 id="internal-representations-for-unicode-strings">Internal representations for Unicode strings</h3> <p>Even the default encoding for Python source code is UTF-8. But for Unicode strings, Python uses three kinds of internal representations : 1 byte per char (Latin-1 encoding) 2 bytes per char (UCS-2 encoding) 4 bytes per char (UCS-4 encoding)</p> <p>If all characters in a string can fit in ASCII range, then they are encoded using 1-byte Latin-1 encoding. But if there are any char which need two bytes, then Python will encoding all to UCS-2. same</p> <p>This is because each character in a string must take up an equivalent number of bytes! otherwise, operations such as indexing, slicing would be inaccurate.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>s0 <span class="o">=</span> <span class="s1">'a'</span>
print<span class="o">(</span>sys.getsizeof<span class="o">(</span>s0+<span class="s1">'b'</span><span class="o">)</span> - sys.getsizeof<span class="o">(</span>s0<span class="o">))</span>
<span class="o">&gt;</span>1
s1 <span class="o">=</span> <span class="s1">'‰Ω†'</span>
print<span class="o">(</span>sys.getsizeof<span class="o">(</span>s1+<span class="s1">'‰Ω†'</span><span class="o">)</span> - sys.getsizeof<span class="o">(</span>s1<span class="o">))</span>
<span class="o">&gt;</span>2
print<span class="o">(</span>sys.getsizeof<span class="o">(</span>s1+<span class="s1">'‰Ω†a'</span><span class="o">)</span> - sys.getsizeof<span class="o">(</span>s1<span class="o">))</span>
<span class="o">&gt;</span>4
s1 <span class="o">=</span> <span class="s1">'üêç'</span>
print<span class="o">(</span>sys.getsizeof<span class="o">(</span>s1+<span class="s1">'üêç‰Ω†'</span><span class="o">)</span> - sys.getsizeof<span class="o">(</span>s1<span class="o">))</span>
<span class="o">&gt;</span>8
</code></pre></div></div> <p>Within CPython, unicode characters are stored as PyUnicodeObject instances. We can view the format of a PyUnicodeObject by looking at the source code:</p> <figure> <picture> <img src="/assets/img/PyUnicodeObject.jpg" class="img-fluid rounded z-depth-1" width="60%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="build-in-function-chr-ord">build-in function chr(), ord()</h3> <p>Convert between One-character Unicode strings and code point value. These tow functions do nothing about encoding.</p> <h4 id="chr">chr()</h4> <p>takes code point value(integers) and returns a Unicode string of length 1 that contains the corresponding code point.</p> <h4 id="ord">ord()</h4> <p>takes a one-character Unicode string and returns the code point value (integers).</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># '\u0041' == 'A'</span>
<span class="o">&gt;&gt;&gt;</span> chr<span class="o">(</span>65<span class="o">)</span>
<span class="s1">'\u0041'</span>
<span class="o">&gt;&gt;&gt;</span> ord<span class="o">(</span><span class="s1">'\u0041'</span><span class="o">)</span>
65
</code></pre></div></div> <h3 id="unicode-literals-in-python-source-code">Unicode Literals in Python Source Code</h3> <p>In Python source code, specific Unicode code points can be written using the \u escape sequence, which is followed by four hex digits giving the code point. The \U escape sequence is similar, but expects eight hex digits, not four:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> s <span class="o">=</span> <span class="s2">"a</span><span class="se">\x</span><span class="s2">ac</span><span class="se">\u</span><span class="s2">1234</span><span class="se">\u</span><span class="s2">20ac</span><span class="se">\U</span><span class="s2">00008000"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="o">[</span>ord<span class="o">(</span>c<span class="o">)</span> <span class="k">for </span>c <span class="k">in </span>s]
<span class="o">[</span>97, 172, 4660, 8364, 32768]
</code></pre></div></div> <h3 id="bytesdecode-and-strencode">bytes.decode() and str.encode()</h3> <h4 id="bytesdecode-can-create-a-string">bytes.decode() can create a string.</h4> <p>This method takes an encoding argument, such as UTF-8, and optionally an errors argument. (\xNN escape sequence means that NN is Hexadecimal value)</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> b<span class="s1">'\x41'</span>.decode<span class="o">(</span><span class="s2">"utf-8"</span><span class="o">)</span>
A
<span class="o">&gt;&gt;&gt;</span> b<span class="s1">'\x41\x00'</span>.decode<span class="o">(</span><span class="s2">"utf-16"</span><span class="o">)</span>
A
</code></pre></div></div> <h4 id="strencode">str.encode()</h4> <p>returns a bytes representation of the Unicode string, encoded in the requested encoding. (opposite method of bytes.decode())</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> u <span class="o">=</span> chr<span class="o">(</span>65<span class="o">)</span> + <span class="s1">'abcd'</span> + chr<span class="o">(</span>66<span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span> u.encode<span class="o">(</span><span class="s1">'utf-8'</span><span class="o">)</span>
b<span class="s1">'AabcdB'</span>
<span class="o">&gt;&gt;&gt;</span> u.encode<span class="o">(</span><span class="s1">'utf-16'</span><span class="o">)</span>
b<span class="s1">'\xff\xfeA\x00a\x00b\x00c\x00d\x00B\x00'</span>
</code></pre></div></div> <ul> <li>Unicode code point for emoji üñê is U+1F590</li> </ul> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">print</span><span class="p">((</span><span class="sh">"</span><span class="s">‰Ω†Â•Ωüñê</span><span class="sh">"</span><span class="p">).</span><span class="nf">encode</span><span class="p">(</span><span class="sh">"</span><span class="s">unicode_escape</span><span class="sh">"</span><span class="p">))</span>
<span class="sa">b</span><span class="sh">'</span><span class="se">\\</span><span class="s">u4f60</span><span class="se">\\</span><span class="s">u597d</span><span class="se">\\</span><span class="s">U0001f590</span><span class="sh">'</span>

<span class="nf">print</span><span class="p">((</span><span class="sh">"</span><span class="s">‰Ω†Â•Ωüñê</span><span class="sh">"</span><span class="p">).</span><span class="nf">encode</span><span class="p">())</span> 
<span class="sa">b</span><span class="sh">'</span><span class="se">\xe4\xbd\xa0\xe5\xa5\xbd\xf0\x9f\x96\x90</span><span class="sh">'</span>
</code></pre></div></div> <h3 id="codecs-module">codecs module</h3> <p>The low-level routines for registering and accessing the available encodings are found in the codecs module. Implementing new encodings also requires understanding the codecs module.</p> <h2 id="unicode-in-javascript">Unicode in JavaScript</h2> <ul> <li>While a JavaScript source file can have any kind of encoding, JavaScript will then convert it internally to UTF-16 before executing it.</li> <li>JavaScript strings are all UTF-16 sequences, as the ECMAScript standard says: When a String contains actual textual data, each element is considered to be a single UTF-16 code unit.</li> <li>UTF-16 encoding need to use with surrogate pairs. For the code points which bigger than U+FFFF.</li> <li>Example (use u escape):</li> </ul> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">the heart eyes emoji is </span><span class="se">\</span><span class="s1">ud83d</span><span class="se">\</span><span class="s1">ude0d</span><span class="dl">'</span><span class="p">)</span>
<span class="c1">//&gt; the heart eyes emoji is üòç</span>
</code></pre></div></div> <h3 id="tips-for-writing-unicode-aware-programs">Tips for Writing Unicode-aware Programs</h3> <ul> <li>Software should only work with Unicode strings internally,</li> <li>decoding the input data as soon as possible and,</li> <li>encoding the output only at the end.</li> </ul> <h2 id="string-interning">String interning</h2> <p>String interning is a method of storing only one copy of each distinct string value in memory, which must be immutable.</p> <ul> <li>String interning concept is akin to shared object concept! shared object is more popular in immutable object.</li> <li>String Interning can Saving Memory, Fast Comparisons, Fast Dictionary Lookups.</li> </ul> <h3 id="implicit-string-interning">Implicit String interning</h3> <p>Implicitly intern string depends on several factors: ‚Ä¢ All empty strings and strings of length 1 are interned. ‚Ä¢ Up until version 3.7, Python used peephole optimization, and all strings longer than 20 characters were not interned. However, now it uses the AST optimizer, and (most) strings up to 4096 characters are interned. ‚Ä¢ Names of functions, class, variables, arguments, etc. are implicitly interned. ‚Ä¢ The keys of dictionaries used to hold module, class, or instance attributes are interned. ‚Ä¢ Strings are interned only at compile-time, this means that they will not be interned if their value can‚Äôt be computed at compile-time.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>s1 <span class="o">=</span> <span class="s1">'iambenwen'</span>
s2 <span class="o">=</span> <span class="s1">'iambenwen'</span>
print<span class="o">(</span>s1 is s2<span class="o">)</span>
<span class="o">&gt;</span><span class="nb">true</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s2">"strin"</span>+<span class="s2">"g"</span> is <span class="s2">"string"</span>
True
</code></pre></div></div> <h4 id="python-wont-intern-all-the-string">Python won‚Äôt intern all the string.</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> c <span class="o">=</span> <span class="s1">'Y'</span><span class="k">*</span>4097
<span class="o">&gt;&gt;&gt;</span> d <span class="o">=</span> <span class="s1">'Y'</span><span class="k">*</span>4097
<span class="o">&gt;&gt;&gt;</span> c is d
<span class="nb">false

</span>s1 <span class="o">=</span> <span class="s2">"wen"</span>.join<span class="o">([</span><span class="s2">"b"</span>, <span class="s2">"e"</span>, <span class="s2">"n"</span><span class="o">])</span>
s2 <span class="o">=</span> <span class="s2">"wen"</span>.join<span class="o">([</span><span class="s2">"b"</span>, <span class="s2">"e"</span>, <span class="s2">"n"</span><span class="o">])</span>
print<span class="o">(</span>s1 is s2<span class="o">)</span>
<span class="o">&gt;</span><span class="nb">false</span>

<span class="o">&gt;&gt;&gt;</span> s1 <span class="o">=</span> <span class="s2">"strin"</span>
<span class="o">&gt;&gt;&gt;</span> s2 <span class="o">=</span> <span class="s2">"string"</span>
<span class="o">&gt;&gt;&gt;</span> s1+<span class="s2">"g"</span> is s2
False
</code></pre></div></div> <h4 id="dont-rely-on-the-implicit-string-interning">Don‚Äôt Rely on the Implicit String Interning</h4> <p>Because the rules of the implicit string interning could be different according to different compiler, interpreter. For example, up until the version of Python 3.7, the peephole optimization is used for string interning and all strings longer than 20 characters will not be interned. However, the algorithm was changed to the AST optimizer then, and the length is equal to 4096 rather than 20.</p> <h3 id="explicit-interning">Explicit interning</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> import sys
<span class="o">&gt;&gt;&gt;</span> c <span class="o">=</span> sys.intern<span class="o">(</span><span class="s1">'Y'</span><span class="k">*</span>4097<span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span> d <span class="o">=</span> sys.intern<span class="o">(</span><span class="s1">'Y'</span><span class="k">*</span>4097<span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span> c is d
True
</code></pre></div></div> <p>In practice, we should use the == operator to compare strings. If we need to speed up the comparison, intern the strings explicitly.</p> <h3 id="disadvantages-of-string-interning">Disadvantages of String Interning</h3> <ul> <li>Memory Cost.</li> <li>Time Cost: The call to intern() function is expensive as it has to manage the interned table.</li> <li>not friendly for Multi-threaded Environments .</li> </ul> <h3 id="the-following-comparison-returns-true-because-of-shared-objects">The following comparison returns True because of shared objects.</h3> <p>CPython loads the Latin-1 range of characters unicode decimals 0 to 255, inclusive, as shared objects every time Python is initialized. Any calls to values in this range are referred to those pre-existing objects.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">s3</span> <span class="o">=</span> <span class="sh">'</span><span class="s">levin</span><span class="sh">'</span>
<span class="n">s4</span> <span class="o">=</span> <span class="sh">'</span><span class="s">elise</span><span class="sh">'</span>
<span class="nf">print</span><span class="p">(</span><span class="n">s3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">s4</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="c1">#&gt;true
</span></code></pre></div></div> <h2 id="string-questions">String Questions</h2> <h3 id="if-using-u-escape-sequence-follow-by-code-point-can-display-unicode-string-why-need-encoding">If using u escape sequence follow by code point can display Unicode string. why need encoding?</h3> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">s</span> <span class="o">=</span> <span class="sh">"</span><span class="se">\u0041\u1234\u20ac\u8000\U0002070E</span><span class="sh">"</span>

<span class="nf">print</span><span class="p">([</span><span class="nf">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">])</span> <span class="c1"># get unicode‚Äôs integer value:
#&gt;[65, 4660, 8364, 32768, 132878]
</span>
<span class="nf">print</span><span class="p">([</span><span class="nf">chr</span><span class="p">(</span><span class="nf">ord</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">s</span><span class="p">])</span> <span class="c1"># get one-character string: 
#&gt;['A', '·à¥', '‚Ç¨', 'ËÄÄ', '†úé']
</span>
<span class="nf">print</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="sh">'</span><span class="s">utf-8</span><span class="sh">'</span><span class="p">).</span><span class="nf">hex</span><span class="p">())</span> <span class="c1"># get actually bytes of utf-8 encoding: 
#&gt;41e188b4e282ace88080f0a09c8e
</span>
<span class="nf">print</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="sh">'</span><span class="s">utf-16</span><span class="sh">'</span><span class="p">).</span><span class="nf">hex</span><span class="p">())</span> <span class="c1"># get utf-16
#&gt;fffe41003412ac20008041d80edf
</span>
<span class="nf">print</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="sh">'</span><span class="s">utf-32</span><span class="sh">'</span><span class="p">).</span><span class="nf">hex</span><span class="p">())</span> <span class="c1"># get utf-32
#&gt;fffe00004100000034120000ac200000008000000e070200
</span></code></pre></div></div> <p>(The Unicode character U+FEFF is used as a byte-order mark (BOM), and is often written as the first character of a file in order to assist with auto detection of the file‚Äôs byte ordering. )</p> <ul> <li> <p>ONE important concept is that, in Python, only refer to store or transmit strings when talking about encodings.</p> </li> <li>Using code point can display unicode string! utf-32 can be represented by codepoint totally. But this encoding have some shortcoming. like consuming too many space, byte ordering issue.</li> <li>Python say it represent string with code point internally. it is possible and it is good to support string methods. The encoding can be ASCII, or USC2, or USC4. But user can store or transmit string by UTF-8</li> </ul> <h3 id="how-to-change-str-encoding">How to change str encoding.</h3> <p>In Python, str type is Unicode string. str‚Äôs encoding just for store or transmission. str.encode() support around 100 encoding type.</p> <h3 id="how-to-know-the-encoding-of-one-string-how-do-python-identify-the-encoding-of-one-string">How to know the encoding of one String? How do Python identify the encoding of one string?</h3> <p>Encoding is out-of-band. You cannot infer the encoding of bytes. You must be told, or you have to guess.</p> <h3 id="how-to-judge-the-string-if-we-just-get-part-of-the-string">How to judge the string if we just get part of the string?</h3> <p>UTF-8 performing better at this issue.</p> <h3 id="how-to-indexing-slicing-getting-length-of-a-unicode-string">How to indexing, slicing, getting length of a Unicode String?</h3> <p>Variable length encoding can make indexing slicing getting length fail. Python‚Äôs string type is using Unicode, but internal encoding is vary which depending on what characters the string contains.</p> <h3 id="what-is-the-relationship-between-string-interning-and-encoding">What is the relationship between string interning and encoding?</h3> <p>Not relative</p> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable post-side-sticky"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">Dec 14, 2024</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/python"> <i class="fas fa-tag fa-sm"></i>¬†Python</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/python"> <div class="tag"> Python </div> </a> <a href="/blog/tag/string"> <div class="tag"> String </div> </a> </div> <div class="detail-item"> <div class="item-title">Content : </div> </div> <div class="toc-container"> <div class="toc-item"> <a href="#basic-operation"> #¬†Basic Operation </a> </div> <div class="toc-item"> <a href="#str-object"> #¬†str Object </a> </div> <div class="toc-item"> <a href="#string-module"> #¬†String module </a> </div> <div class="toc-item"> <a href="#string-format"> #¬†String format </a> </div> <div class="toc-item"> <a href="#unicode-support"> #¬†Unicode Support </a> </div> <div class="toc-item"> <a href="#unicode-in-javascript"> #¬†Unicode in JavaScript </a> </div> <div class="toc-item"> <a href="#string-interning"> #¬†String interning </a> </div> <div class="toc-item"> <a href="#implicit-string-interning"> ¬†¬†¬†¬†#¬†Implicit String interning </a> </div> <div class="toc-item"> <a href="#explicit-interning"> ¬†¬†¬†¬†#¬†Explicit interning </a> </div> <div class="toc-item"> <a href="#string-questions"> #¬†String Questions </a> </div> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> ¬© Copyright 2024 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>