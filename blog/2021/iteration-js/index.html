<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>The Iteration in JS | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2021/iteration-js/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">The Iteration in JS</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <h2 id="iterable">Iterable</h2> <p>Iterable object is the object which conform with iterable protocol.</p> <p>Then What is Iterable protocol? Simply say, implementing the <strong>@@iterator</strong> method. That means object (or one of the objects up its prototype chain) must have a property with <code class="language-plaintext highlighter-rouge">[Symbol.iterator]</code> key.</p> <ul> <li> <p>Iterable protocol allow Object to define or customize their iterative operation. Such as what values are looped over in a <code class="language-plaintext highlighter-rouge">for...of</code> structure.</p> </li> <li> <p>Some build-in type is build-in iterables. Such as Array, Map, String. Because they implements <code class="language-plaintext highlighter-rouge">@@iterator</code> method. But object is not iterator.</p> </li> <li> <p>Iterables which can iterate only once (such as Generators) customarily return this from their <code class="language-plaintext highlighter-rouge">@@iterator</code> method, whereas iterables which can be iterated many times must return a new iterator on each invocation of <code class="language-plaintext highlighter-rouge">@@iterator</code>.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">for...of</code> , spread operator and <code class="language-plaintext highlighter-rouge">yield*</code> Syntaxes expecting iterables.</p> </li> </ul> <h2 id="iterator">Iterator</h2> <p>Any objects conform with iterator protocol and then it is iterator object. It is rarely desirable to implement iterator protocol without also performing iterable.</p> <p>Iterator protocol:<br> Define a standard way to produce a sequence of values. An object can be call iterator when it implements the <strong>next()</strong> according to some semantics (what Symbol.iterator method return is iterator object):</p> <p>Basic semantics like below code:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">range</span> <span class="p">(</span><span class="k">from</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">to</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">current</span><span class="p">:</span> <span class="k">from</span><span class="p">,</span>
    <span class="na">last</span><span class="p">:</span> <span class="nx">to</span><span class="p">,</span>
    <span class="na">next</span><span class="p">:</span> <span class="nf">function </span><span class="p">(){</span>
      <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">current</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">last</span><span class="p">){</span>
        <span class="k">return</span> <span class="p">{</span><span class="na">done</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="o">++</span><span class="p">}</span>
      <span class="p">}</span><span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span><span class="na">done</span><span class="p">:</span> <span class="kc">true</span><span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nx">myRange</span> <span class="o">=</span> <span class="nf">range </span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">iter</span> <span class="o">=</span> <span class="nx">myRange</span><span class="p">.</span><span class="nf">next</span><span class="p">();</span>
<span class="k">while </span><span class="p">(</span><span class="o">!</span><span class="nx">iter</span><span class="p">.</span><span class="nx">done</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`iterator value: </span><span class="p">${</span><span class="nx">iter</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
  <span class="nx">iter</span> <span class="o">=</span> <span class="nx">myRange</span><span class="p">.</span><span class="nf">next</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div> <p>I believe Iterator use closure to maintain the variables so that the next() can re-enter and get value.</p> <p>You can create your own Iterator object by two ways:</p> <ul> <li>implements the next() fucntion according to some semantics.</li> <li>use generator.</li> </ul> <h2 id="generator">Generator</h2> <h3 id="firstly-why-we-need-generator">Firstly, Why we need Generator</h3> <p>While custom iterators are a useful tool, their creation requires careful programming due to the need to explicitly maintain their internal state. Generator functions provide a powerful alternative: they allow you to define an iterative algorithm by writing a single function whose execution is not continuous.</p> <p>Generator Benifit:</p> <ul> <li>Iterators and Generators bring the concept of iteration directly into the core language.</li> <li>Generators in JavaScript – especially when combined with Promises – are a very powerful tool for asynchronous programming as they mitigate – if not entirely eliminate – the problems with callbacks, such as Callback Hell and Inversion of Control. However, an even simpler solution to these problems can be achieved with async functions.</li> </ul> <h3 id="what-is-generator">What is Generator</h3> <p>Generators are functions that can be exited and later re-entered. Their context (variable bindings) will be saved across re-entrances. In JavaScript, Normal function follows something called run-to-completion model. But Generator is <strong>special</strong>.</p> <ul> <li> <p>Calling a generator function does not execute its body immediately; an iterator object (can call generator object) for the function is returned instead. This Generator object conforms to both the iterable protocol and the iterator protocol.</p> </li> <li> <p>When the iterator’s next() method is called, the generator function’s body is executed until the first yield expression, which specifies the value to be returned from the iterator or, with yield*, delegates to another generator function.</p> </li> <li> <p>Because generator is iterable, it implement @@iterator method. Generator iterate only once, and it return this from their @@iterator method.</p> </li> <li> <p>In short, a generator appears to be a function but it behaves like an iterator.</p> </li> </ul> <figure> <picture> <img src="/assets/img/Generator-js.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>This is a simple generator:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span><span class="o">*</span> <span class="nf">idMaker</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">while </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
    <span class="k">yield</span> <span class="nx">index</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">gen</span> <span class="o">=</span> <span class="nf">idMaker</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">gen</span><span class="p">.</span><span class="nf">next</span><span class="p">().</span><span class="nx">value</span><span class="p">);</span> <span class="c1">// 0</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">gen</span><span class="p">.</span><span class="nf">next</span><span class="p">().</span><span class="nx">value</span><span class="p">);</span> <span class="c1">// 1</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">gen</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]()</span> <span class="o">===</span> <span class="nx">gen</span><span class="p">)</span> <span class="c1">// true </span>
</code></pre></div></div> <p>Make your own iterables suing generator:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myIterable</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">*</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]()</span> <span class="p">{</span>
        <span class="k">yield</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">yield</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">yield</span> <span class="mi">3</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">myIterable</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>You can use Promises, generators to mimic the async/await functionality.</p> <h3 id="what-is-generator-function">What is Generator Function</h3> <p>Generator function is function object, declared by function*, or can be declared by GeneratorFunction constructor.</p> <p>The Difference between Yield and Return in Generator function:</p> <ol> <li>Yield and Return both return Generator object.</li> <li>Yield keep Generator ‘s done as false and keep function looking for next yield.</li> <li>Return statement in a generator, when executed, will make the generator finish (i.e. the done property of the object returned by it will be set to true).</li> </ol> <p>Example of Using next()</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span><span class="o">*</span> <span class="nf">generator</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">yield</span> <span class="nx">i</span><span class="p">;</span>
  <span class="k">yield</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">10</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">gen</span> <span class="o">=</span> <span class="nf">generator</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">gen</span><span class="p">.</span><span class="nf">next</span><span class="p">().</span><span class="nx">value</span><span class="p">);</span> <span class="c1">// expected output: 10</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">gen</span><span class="p">.</span><span class="nf">next</span><span class="p">().</span><span class="nx">value</span><span class="p">);</span> <span class="c1">// expected output: 20</span>
</code></pre></div></div> <p>Calling the next() with an argument. will resume the generator function execution, replacing the yield expression where an execution was paused with the argument from next().</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span><span class="o">*</span> <span class="nf">generator</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">yield</span> <span class="nx">i</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">i</span> <span class="o">+</span> <span class="p">(</span><span class="k">yield</span> <span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">gen</span> <span class="o">=</span> <span class="nf">generator</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">gen</span><span class="p">.</span><span class="nf">next</span><span class="p">());</span> <span class="c1">// Object { value: 10, done: false }</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">gen</span><span class="p">.</span><span class="nf">next</span><span class="p">());</span> <span class="c1">// Object { value: 10, done: false }</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">gen</span><span class="p">.</span><span class="nf">next</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span><span class="c1">// Object { value: 20, done: true } </span>
</code></pre></div></div> <p>The 10 in next(10) will replace the second (yield). So it is return i + 10. That is why we got { value: 20, done: true } .</p> <p>– Using yield</p> <p>– using yield*, delegates to another generator function.</p> <h3 id="generator-use-some-technique-like-closure">Generator use some technique like closure.</h3> <p>clouse:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">numberIncrementer</span> <span class="o">=</span> <span class="nx">startValue</span> <span class="o">=&gt;</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">startValue</span><span class="o">++</span>
<span class="kd">const</span> <span class="nx">getNextNumber</span> <span class="o">=</span> <span class="nf">numberIncrementer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">getNextNumber</span><span class="p">())</span> <span class="c1">// 0</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">getNextNumber</span><span class="p">())</span> <span class="c1">// 1</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">getNextNumber</span><span class="p">())</span> <span class="c1">// 2</span>
</code></pre></div></div> <p>generator:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">numberIncrementer</span> <span class="o">=</span> <span class="kd">function</span><span class="o">*</span><span class="p">(</span><span class="nx">startValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">yield</span> <span class="nx">startValue</span><span class="o">++</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">numberFactory</span> <span class="o">=</span> <span class="nf">numberIncrementer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">getNextNumber</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">numberFactory</span><span class="p">.</span><span class="nf">next</span><span class="p">().</span><span class="nx">value</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">getNextNumber</span><span class="p">())</span><span class="c1">// 0</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">getNextNumber</span><span class="p">())</span><span class="c1">// 1</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">getNextNumber</span><span class="p">())</span><span class="c1">// 2</span>
</code></pre></div></div> <h3 id="generator-object">Generator Object</h3> <p>The Generator cannot be instantiated directly. Instead, a Generator instance can be returned from a generator function (constructor function). Generator Object inherits properties and methods from: Iterator. Generator is a Iterable, and also a Iterator.</p> <p>Generator Instance methods</p> <ul> <li>Generator.prototype.next() Returns a value yielded by the yield expression.</li> <li>Generator.prototype.return() Returns the given value and finishes the generator.</li> <li>Generator.prototype.throw() Throws an error to a generator (also finishes the generator, unless caught from within that generator).</li> </ul> <h3 id="using-generator-and-promise-to-mimic-asyncawait">Using Generator and Promise to mimic async/await</h3> <p>Code using promises and callbacks such as:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">fetchJson</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nf">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">request</span> <span class="o">=&gt;</span> <span class="nx">request</span><span class="p">.</span><span class="nf">text</span><span class="p">())</span>
    <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">text</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`ERROR: </span><span class="p">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">stack</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div> <p>can be written as (with the help of libraries such as co.js):</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fetchJson</span> <span class="o">=</span> <span class="nx">co</span><span class="p">.</span><span class="nf">wrap</span><span class="p">(</span><span class="kd">function</span> <span class="o">*</span> <span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">yield</span> <span class="nf">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
        <span class="kd">let</span> <span class="nx">text</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">request</span><span class="p">.</span><span class="nf">text</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`ERROR: </span><span class="p">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">stack</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div> <p>Some readers may have noticed that it parallels the use of async/await. That’s not a co-incidence. async/await can follows a similar strategy and replaces the yield with await in cases where promises are involved.</p> <h2 id="for-loop">for loop</h2> <h3 id="forof">for…of</h3> <p>When you use for…of, we need to add a method to the object named Symbol.iterator.</p> <ol> <li>When for…of starts, it calls Symbol.iterator method once (or errors if not found). The method must return an iterator - an object with the method next.</li> <li>Onward, for…of works only with that returned object.</li> <li>When for…of wants the next value, it calls next() on that object.</li> <li>The result of next() must have the form {done: Boolean, value: any}, where done=true means that the loop is finished, otherwise value is the next value.</li> </ol> <h3 id="difference-between-forin-and-forof">Difference between for…in and for…of</h3> <ul> <li>for…in statement iterates over all non-symbol and enumerable properties of an object. it is used for OBJECT.</li> <li>for…of statement create a loop iterating over iterable object. it is for ITERATOR OBJECT. include all build-in iterable type.</li> <li>when iterate over an array, prefer use for…of .</li> <li>for…in, the most practically used is for debug.</li> <li>object.hasOwnProperty() means the property is not inherited.</li> </ul> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">myForOfForIn</span><span class="p">()</span> <span class="p">{</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">objCustom</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
  <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">arrCustom</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
  <span class="kd">const</span> <span class="nx">iterable</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">];</span>
  <span class="nx">iterable</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">iterable</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span> <span class="c1">// logs 0, 1, 2, "foo", "arrCustom", "objCustom"</span>
  <span class="p">}</span>
  <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">iterable</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">iterable</span><span class="p">.</span><span class="nf">hasOwnProperty</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span> <span class="c1">// logs 0, 1, 2, "foo"</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">i</span> <span class="k">of</span> <span class="nx">iterable</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span> <span class="c1">// logs 3, 5, 7</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">May 3, 2021</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/javascript"> <i class="fas fa-tag fa-sm"></i> JavaScript</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/iterable"> <div class="tag"> Iterable </div> </a> <a href="/blog/tag/iterator"> <div class="tag"> Iterator </div> </a> <a href="/blog/tag/generator"> <div class="tag"> Generator </div> </a> <a href="/blog/tag/javascript"> <div class="tag"> JavaScript </div> </a> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>