<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Build-in Data type in JS | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2021/buildin-datatype-js/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <style>html{scroll-behavior:smooth}</style> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">Build-in Data type in JS</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <p>JavaScript has two primitive values used to signal absent or uninitialized value: <code class="language-plaintext highlighter-rouge">null</code> and <code class="language-plaintext highlighter-rouge">undefined</code>.</p> <h2 id="string">String</h2> <ul> <li>Strings can be created as primitives from string literals, or as objects, using the String() constructor. const string1 = ‚ÄúA string primitive‚Äù; const string2 = new String(‚ÄúA String object‚Äù);</li> <li>Can use ==, &gt;, &lt; to Compare strings.</li> <li>JavaScript distinguishes between String objects and primitive string values.</li> <li>A String object can always be converted to its primitive counterpart with the valueOf() method.</li> </ul> <blockquote class="block-warning"> <h5 id="javascript-strings-are-all-utf-16-sequences">JavaScript strings are all UTF-16 sequences.</h5> <p>ECMAScript standard says: When a String contains actual textual data, each element is considered to be a single UTF-16 code unit.</p> </blockquote> <h3 id="using-unicode-in-a-string">Using Unicode in a string</h3> <p>A unicode sequence can be added inside any string using the format \uXXXX: <code class="language-plaintext highlighter-rouge">const s1 = '\u00E9' //√©</code> A sequence can be created by combining two unicode sequences:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">s2</span> <span class="o">=</span> <span class="dl">'</span><span class="se">\</span><span class="s1">u0065</span><span class="se">\</span><span class="s1">u0301</span><span class="dl">'</span> <span class="c1">//eÃÅ</span>
<span class="kd">const</span> <span class="nx">s3</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">e</span><span class="se">\</span><span class="s1">u0301</span><span class="dl">'</span>
<span class="nx">s2</span> <span class="o">===</span> <span class="nx">s3</span> <span class="c1">// true</span>
<span class="nx">s2</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">2</span>
<span class="nx">s1</span> <span class="o">!==</span> <span class="nx">s3</span> <span class="c1">// true</span>
<span class="nx">But</span> <span class="nx">can</span> 
<span class="nx">s1</span><span class="p">.</span><span class="nf">normalize</span><span class="p">()</span> <span class="o">===</span> <span class="nx">s3</span><span class="p">.</span><span class="nf">normalize</span><span class="p">()</span> <span class="c1">// true</span>
</code></pre></div></div> <h3 id="emojis">Emojis</h3> <p>Emojis are Unicode characters. The üê∂ symbol, which is <code class="language-plaintext highlighter-rouge">U+1F436</code>, is traditionally encoded as <code class="language-plaintext highlighter-rouge">\uD83D\uDC36</code> (called surrogate pair. There is a formula to calculate this), Or be represented as <code class="language-plaintext highlighter-rouge">\u{1F436}</code></p> <h3 id="the-static-stringraw-method">The static <code class="language-plaintext highlighter-rouge">String.raw()</code> method</h3> <p>It is a tag function of template literals. It‚Äôs used to get the raw string form of template strings, that is, substitutions (e.g. <code class="language-plaintext highlighter-rouge">${foo}</code>) are processed, but escapes (e.g. <code class="language-plaintext highlighter-rouge">\n</code>) are not. <strong>So, raw string is relative to template string, and do not substitute escape</strong></p> <p>A raw string literal is a string in which the escape characters (like \n \t or " ) of C++ are not processed. That means raw is easier to include escape characters. They‚Äôre useful for, say, encoding text like HTML.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">filePath</span> <span class="o">=</span> <span class="nb">String</span><span class="p">.</span><span class="nx">raw</span><span class="s2">`C:\Development\profile\aboutme.html`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">filePath</span><span class="p">);</span>
</code></pre></div></div> <h3 id="split">split()</h3> <p>It turns a String into an array of strings, by separating the string at each instance of a specified separator string.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">chars</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span> <span class="c1">// split every char into an array;</span>
<span class="kd">const</span> <span class="nx">words</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">);</span> <span class="c1">// split every word into an array;</span>
</code></pre></div></div> <h3 id="trim">Trim()</h3> <p>It removes whitespace from both ends of a string. Whitespace in this context is all the whitespace characters (space, tab, no-break space, etc.) and all the line terminator characters (LF, CR, etc.).</p> <h3 id="charat">charAt()</h3> <p>return a new String and carry one letter;</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="dl">'</span><span class="s1">cat</span><span class="dl">'</span><span class="p">.</span><span class="nf">charAt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// returns "a"</span>
<span class="dl">'</span><span class="s1">cat</span><span class="dl">'</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1">// returns "a" in ECMAScript 5, treat the string as an array-like object, where individual characters correspond to a numerical index.</span>
</code></pre></div></div> <blockquote> <p>In JS, there are no char operation. all in String object.</p> </blockquote> <ul> <li>capitalize a letter: <code class="language-plaintext highlighter-rouge">String.charAt(i).toUpperCase();</code> </li> <li>difference bewteen charAt(i) and string[i]: <code class="language-plaintext highlighter-rouge">str.charAt(0)</code> will return String <code class="language-plaintext highlighter-rouge">('')</code> for <code class="language-plaintext highlighter-rouge">str = ''</code> instead of <code class="language-plaintext highlighter-rouge">undefined</code> in case of <code class="language-plaintext highlighter-rouge">''[0]</code>;</li> </ul> <h3 id="stringprototypecodepointat-vs-stringprototypecharcodeat">String.prototype.codePointAt() vs String.prototype.charCodeAt()</h3> <ul> <li> <p>The charCodeAt() method returns an integer between 0 and 65535 representing the UTF-16 code unit at the given index. If the Unicode code point cannot be represented in a single UTF-16 code unit (because its value is greater than 0xFFFF) then the code unit returned will be the first part of a surrogate pair for the code point. If you want the entire code point value, use codePointAt().</p> </li> <li> <p>The codePointAt() method returns a non-negative integer that is the Unicode code point value at the given position.</p> <div class="language-js highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">icons</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Â∞ç</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">icons</span><span class="p">.</span><span class="nf">codePointAt</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="c1">// &gt; 23565</span>
</code></pre></div> </div> <p>Return value: If the element at pos is a UTF-16 high surrogate, returns the code point of the surrogate pair. If the element at pos is a UTF-16 low surrogate, returns only the low surrogate code point.</p> <div class="language-js highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="dl">'</span><span class="se">\</span><span class="s1">ud83d</span><span class="se">\</span><span class="s1">ude0d</span><span class="dl">'</span><span class="p">.</span><span class="nf">codePointAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nf">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>  <span class="c1">//return code point of surrogate pair: 1f60d</span>
<span class="dl">'</span><span class="se">\</span><span class="s1">ud83d</span><span class="se">\</span><span class="s1">ude0d</span><span class="dl">'</span><span class="p">.</span><span class="nf">codePointAt</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>  <span class="c1">//return just low surrogate code: de0d</span>
</code></pre></div> </div> </li> </ul> <h3 id="about-empty-string-">About empty string ‚Äò‚Äô</h3> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span><span class="dl">''</span> <span class="c1">//-&gt;true</span>
<span class="o">!!</span><span class="dl">''</span> <span class="c1">// -&gt; false</span>
<span class="o">!</span><span class="kc">undefined</span> <span class="c1">// true</span>

<span class="c1">//false, 0, undefined, null is special value. </span>
<span class="c1">// following always return the last one </span>

<span class="dl">''</span><span class="o">||</span><span class="kc">false</span> <span class="c1">//-&gt; false</span>
<span class="kc">false</span><span class="o">||</span><span class="dl">''</span> <span class="c1">//-&gt;''</span>
<span class="kc">undefined</span> <span class="o">||</span> <span class="mi">0</span> <span class="c1">//-&gt; 0</span>
<span class="mi">0</span><span class="o">||</span><span class="kc">undefined</span> <span class="c1">//-&gt; undefined</span>
<span class="dl">''</span> <span class="o">||</span> <span class="kc">undefined</span> <span class="c1">//-&gt;undefined</span>
<span class="kc">undefined</span> <span class="o">||</span> <span class="dl">''</span> <span class="c1">//-&gt;''</span>
<span class="kc">null</span> <span class="o">||</span> <span class="dl">''</span> <span class="c1">//-&gt;''</span>
</code></pre></div></div> <h2 id="number">Number</h2> <p>Number is a primitive wrapper object used to represent and manipulate numbers like 37 or -9.25. The JavaScript Number type is a double-precision 64-bit binary format IEEE 754 value, like double in Java or C#.</p> <h3 id="features">Features</h3> <ul> <li>A number literal like 37 in JavaScript code is a floating-point value, not an integer. There is no separate integer type in common everyday use.</li> <li>Number may also be expressed in literal forms like 0b101, 0o13, 0x0A.</li> <li>When use Number(value) converts a string or other value to the Number type. If the value can‚Äôt be converted, it returns NaN.</li> <li>Number.MAX_SAFE_INTEGER The maximum safe integer in JavaScript (2^53 - 1).</li> <li>The global property Infinity is a numeric value representing infinity.</li> </ul> <h3 id="numbernan">Number.NaN</h3> <p>Special ‚ÄúNot a Number‚Äù value.</p> <ul> <li>The Number.NaN is Equivalent of NaN. But Number.isNaN() is different from isNaN().</li> <li>NaN is a property of the global object. In other words, it is a variable in global scope.</li> <li>console.log(typeof(NaN)); // ‚Äì&gt;number</li> <li>NaN compares unequal (via ==, !=, ===, and !==) to any other value ‚Äî including to another NaN value.</li> <li>Use Number.isNaN() or isNaN() to most clearly determine whether a value is NaN.</li> </ul> <h4 id="there-are-five-different-types-of-operations-that-return-nan">There are five different types of operations that return NaN:</h4> <ul> <li>Number cannot be parsed (e.g. parseInt(‚Äúblabla‚Äù) or Number(undefined))</li> <li>Math operation where the result is not a real number (e.g. Math.sqrt(-1))</li> <li>Operand of an argument is NaN (e.g. 7 ** NaN)</li> <li>Indeterminate form (e.g. 0 * Infinity, or undefined + undefined)</li> <li>Any operation that involves a string and is not an addition operation (e.g. ‚Äúfoo‚Äù / 3)</li> </ul> <h4 id="the-difference-between-isnan-and-numberisnan">the difference between isNaN() and Number.isNaN():</h4> <p>the former will return true if the value is currently NaN, or if it is going to be NaN after it is coerced to a number, while the latter will return true only if the value is currently NaN:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">isNaN</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello world</span><span class="dl">'</span><span class="p">);</span>        <span class="c1">// true</span>
<span class="nb">Number</span><span class="p">.</span><span class="nf">isNaN</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello world</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// false</span>
</code></pre></div></div> <h2 id="bigint">BigInt</h2> <p>A BigInt value, also sometimes just called a BigInt, is a bigint primitive, created by appending n to the end of an integer literal,</p> <h2 id="symbol">Symbol</h2> <p>Symbol is a built-in object whose constructor returns a symbol primitive ‚Äî also called a Symbol value or just a Symbol ‚Äî that‚Äôs guaranteed to be unique.</p> <h3 id="main-purpose">Main purpose</h3> <ul> <li> <p>Symbols are often used to add unique property keys to an object that won‚Äôt collide with keys any other code might add to the object, and which are hidden from any mechanisms other code will typically use to access the object.</p> </li> <li> <p>Before symbols were introduced, object keys were always strings or indexing, so they were easy to overwrite. Also, it was common to have name conflicts when using multiple libraries.</p> <div class="language-js highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">userName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">User name</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">userID</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">symID</span> <span class="o">=</span> <span class="nc">Symbol</span><span class="p">(</span><span class="dl">'</span><span class="s1">symID</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">user</span><span class="p">[</span><span class="nx">symID</span><span class="p">]</span> <span class="o">=</span> <span class="mi">321</span><span class="p">;</span>
</code></pre></div> </div> <h3 id="syntax">Syntax</h3> <p>To create a new primitive Symbol, you write Symbol() with an optional string as its description: <code class="language-plaintext highlighter-rouge">let sym = Symbol('foo')</code></p> </li> </ul> <h3 id="it-does-not-support-the-syntax-new-symbol">It does not support the syntax ‚Äúnew Symbol()‚Äù.</h3> <p>It will throw TypeError:<br> <code class="language-plaintext highlighter-rouge">let sym = new Symbol() // TypeError</code></p> <p>This prevents authors from creating an explicit Symbol wrapper object instead of a new Symbol value. If you want to create a Symbol wrapper object, you can use the Object() function:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">sym</span> <span class="o">=</span> <span class="nc">Symbol</span><span class="p">(</span><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">let</span> <span class="nx">symObj</span> <span class="o">=</span> <span class="nc">Object</span><span class="p">(</span><span class="nx">sym</span><span class="p">)</span>
</code></pre></div></div> <h3 id="synbol-features">Synbol Features</h3> <ul> <li> <p>symbol property in object are not enumerable. Means they will not come out in <code class="language-plaintext highlighter-rouge">Object.key()</code> or <code class="language-plaintext highlighter-rouge">for...in</code>. But can use <code class="language-plaintext highlighter-rouge">Object.getOwnPropertySymbols()</code>. They will not show up in string which created by <code class="language-plaintext highlighter-rouge">JSON.stringify()</code>.</p> </li> <li> <p>Shared Symbols in the global Symbol registry Symbols are designed to be unique, but you still can be share it through global symbol registry. Using the <code class="language-plaintext highlighter-rouge">Symbol()</code> function syntax will not create a global Symbol that is available in your whole codebase. To create Symbols available across files and even across realms (each of which has its own global scope), use the methods <code class="language-plaintext highlighter-rouge">Symbol.for()</code> and <code class="language-plaintext highlighter-rouge">Symbol.keyFor()</code> to set and retrieve Symbols from the global Symbol registry. ```js console.log(Symbol.for(‚Äòbar‚Äô) === Symbol.for(‚Äòbar‚Äô)); // bar is key // expected output: true</p> </li> </ul> <p>console.log(Symbol(‚Äòbar‚Äô) === Symbol(‚Äòbar‚Äô)); // bar is description // expected output: false</p> <p>const symbol1 = Symbol.for(‚Äòfoo‚Äô); const symbol2 = Symbol(‚Äòbar‚Äô);</p> <p>console.log(symbol1.toString()); // expected output: ‚ÄúSymbol(foo)‚Äù console.log(symbol2.toString()); // expected output: ‚ÄúSymbol(bar)‚Äù</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Symbol.iterator
`Symbol.iterator` is Symbol static property. `Symbol.iterator` is special built-in symbol which just iterable. It is unique and always same.
The well-known` Symbol.iterator` symbol specifies the default iterator for an object. Used by `for...of`.
```js
const iterable1 = {};
iterable1[Symbol.iterator] = function* () {
  yield 1;
  yield 2;
  yield 3;
};
console.log([...iterable1]);
// expected output: Array [1, 2, 3]
</code></pre></div></div> <h2 id="array">Array</h2> <h3 id="overview">Overview:</h3> <ul> <li>Array is an special object, but it store data in the same way with object. For example, when you visit data through <code class="language-plaintext highlighter-rouge">arr[2]</code>, The <code class="language-plaintext highlighter-rouge">2</code> in <code class="language-plaintext highlighter-rouge">arr[2]</code> is coerced into a <strong>string</strong> by the JavaScript engine through an implicit toString conversion. As a result, ‚Äò2‚Äô and ‚Äò02‚Äô would refer to two different slot.</li> <li>Support Group concept by <code class="language-plaintext highlighter-rouge">Array.prototype.groupBy()</code> </li> <li>Create an array from array-like object or iterable object through static method Array.from().</li> <li>Can Check if an array contains a certain item: includes(), and indexOf().</li> </ul> <h3 id="length-can-be-weird">Length can be weird</h3> <ul> <li>Set menber by bracket notation <div class="language-js highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fruits</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">fruits</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="dl">'</span><span class="s1">banana</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">fruits</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">=</span> <span class="dl">'</span><span class="s1">apple</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">fruits</span><span class="p">);</span> <span class="c1">//Array ["banana", undefined, undefined, "apple"]</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nf">keys</span><span class="p">(</span><span class="nx">fruits</span><span class="p">).</span><span class="nx">length</span><span class="p">)</span> <span class="c1">// 2</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">fruits</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> <span class="c1">// 4</span>
</code></pre></div> </div> </li> <li>Set length directly ```js const fruits = []; fruits.push(‚Äòbanana‚Äô); fruits.length = 3; console.log(fruits); // Array [‚Äúbanana‚Äù, undefined, undefined] console.log(Object.keys(fruits).length) // 1</li> </ul> <p>const numbers = [1, 2, 3, 4, 5]; numbers.length = 3; console.log(numbers); // [1, 2, 3]</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- delete a member with keyword delete.
```js
const fruits = [];
fruits.push('banana', 'apple', 'grape');
delete fruits[1];
console.log(fruits); //Array ["banana", undefined, "grape"]
console.log(Object.keys(fruits).length) // 2
console.log(fruits.length); // 3
</code></pre></div></div> <h3 id="basic-methods">Basic Methods</h3> <h4 id="slice-vs-splice">slice() vs. splice()</h4> <ul> <li>The <code class="language-plaintext highlighter-rouge">slice()</code> method returns a shallow copy of a portion of an array into a new array object selected from start to end (end not included) where start and end represent the index of items in that array. The original array will not be modified. ```js let fruits = [‚ÄòBanana‚Äô, ‚ÄòOrange‚Äô, ‚ÄòLemon‚Äô, ‚ÄòApple‚Äô, ‚ÄòMango‚Äô] let citrus = fruits.slice(1, 3)</li> </ul> <p>// fruits contains [‚ÄòBanana‚Äô, ‚ÄòOrange‚Äô, ‚ÄòLemon‚Äô, ‚ÄòApple‚Äô, ‚ÄòMango‚Äô] // citrus contains [‚ÄòOrange‚Äô,‚ÄôLemon‚Äô]</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- The `splice()` method changes the contents of an array by removing or replacing existing elements and/or adding new elements in place.
```js
let myFish = ['angel', 'clown', 'drum', 'sturgeon']
let removed = myFish.splice(2, 1, 'trumpet')

// myFish is ["angel", "clown", "trumpet", "sturgeon"]
// removed is ["drum"]
</code></pre></div></div> <h4 id="foreach">forEach()</h4> <p>THIS IS WEIRD METHOD.</p> <p>forEach() calls a provided callbackFn function once for each element in an array in ascending index order.</p> <ul> <li>syntax: forEach((element) =&gt; { /* ‚Ä¶ */ })</li> <li>These callbackFns will keep running until for the last element. There is no way to stop or break a forEach() loop other than by throwing an exception.</li> <li>forEach expects a synchronous function. forEach does not wait for promises, So don‚Äôt use.</li> <li>If modify the array during iteration, something weird will happen.</li> </ul> <h4 id="map">map()</h4> <p>Create a new array with the resule which was provide by the function on every element of the calling array. Don‚Äôt use map() if you are not use the return array or the callback return nothing.</p> <p>A, array.map (itme.index); index is an optional argument. sometime can be used for key at React, although that is not the good choice.</p> <h4 id="flat">flat()</h4> <p>Creates a new array with all sub-array elements concatenated into it recursively up to the specified depth.</p> <h4 id="flatmap">flatMap()</h4> <p>First maps each element using a mapping function, then flattens the result into a new array. It is identical to a map() followed by a flat() of depth 1.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">recipients</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ben.wen@gmail.com, benn@Gee.com ;xiao@gmail.com ,tone@gmail.com; tom@gmeil.com;heoo@hotmail.com,hei@gmi.com</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">emailArr</span> <span class="o">=</span> <span class="nx">recipients</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">;</span><span class="dl">'</span><span class="p">).</span><span class="nf">flatMap</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">,</span><span class="dl">'</span><span class="p">))</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log </span><span class="p">(</span><span class="nx">emailArr</span><span class="p">);</span>
</code></pre></div></div> <h4 id="split-1">split</h4> <p><code class="language-plaintext highlighter-rouge">recipients.split(',').map(email=&gt;{return {email}}) ;</code> EQUAL TO: <code class="language-plaintext highlighter-rouge">recipients.split(',').map(email=&gt; ({email})) ;</code></p> <p>For The code : recipients.split(‚Äò,‚Äô).map(email=&gt; {email}) ; JavaScript syntax don‚Äôt know what do {} mean: they are for object or function. So it need () around it for object.</p> <h4 id="concat">concat()</h4> <p>use to merge two or more arrays into a NEW arr; concat() is not mutate original array. Now, we all prefer to use ‚Äò‚Ä¶‚Äòspread operator to do the job.</p> <h4 id="reverse">reverse();</h4> <p>reverse an array in place. the first element become the last one. The reverse method transposes the elements of the calling array object in place, <em>mutating</em> the array, and returning a reference to the array. it mutate the original array.</p> <h4 id="sort-">sort ();</h4> <p>The sort() method sorts the elements of an array in place and returns the sorted array. A, if no compareFunction, then the array elements are converted to strings, and sorted according to each character‚Äôs Unicode code point value. B, if compareFunction, we have a pattern:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">compare</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if </span><span class="p">(</span><span class="nx">a</span> <span class="nx">is</span> <span class="nx">less</span> <span class="nx">than</span> <span class="nx">b</span> <span class="nx">by</span> <span class="nx">some</span> <span class="nx">ordering</span> <span class="nx">criterion</span><span class="p">)</span> <span class="p">{</span>
<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">if </span><span class="p">(</span><span class="nx">a</span> <span class="nx">is</span> <span class="nx">greater</span> <span class="nx">than</span> <span class="nx">b</span> <span class="nx">by</span> <span class="nx">the</span> <span class="nx">ordering</span> <span class="nx">criterion</span><span class="p">)</span> <span class="p">{</span>
<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// a must be equal to b</span>
<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <h4 id="join-">join ()</h4> <p>creates and returns a new string by concatenating all of the elements in an array (or an array-like object), separated by commas or a specified separator string. If the array has only one item, then that item will be returned without using the separator.</p> <h4 id="reduce-">reduce ()</h4> <p>Reduce() provide a very flexible way to handle array operations. it can replace of filter(), map(). Or remove the duplicate items. it will run over all the array elements and return a value for the next round everytime .</p> <p>A, reducer() ‚Äòs callback function carry 4 arguments, but usually use accumulator and currentValue: a, acc, first time, it is initialValue (if initialValue have been supplied) or first value; Then , it is callback‚Äôs return values; b, cur, first time, it is first value (if initialValue have been supplied) or second value; then run over all elements in the array. B, reducer() second arugment is initialValue, usually it is been used. very useful.</p> <p>C, important: <strong>return acc in callback function;</strong></p> <h4 id="push">push()</h4> <p>adds one or more elements to the end of an array . And return new length . Be careful at following code, It will push newnode after ‚Äònode‚Äô instead of the end of actionArr.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for </span><span class="p">(</span> <span class="kd">let</span> <span class="nx">node</span> <span class="k">of</span> <span class="nx">actionArr</span> <span class="p">){</span>
  <span class="nx">actionArr</span><span class="p">.</span><span class="nf">push </span><span class="p">(...</span><span class="nx">node</span><span class="p">.</span><span class="nx">childrenArr</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <h4 id="group">group()</h4> <p>Syntax: <code class="language-plaintext highlighter-rouge">group(callbackFn)</code></p> <p>Example:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">inventory</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">asparagus</span><span class="dl">'</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">vegetables</span><span class="dl">'</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="mi">5</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bananas</span><span class="dl">'</span><span class="p">,</span>  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">fruit</span><span class="dl">'</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">goat</span><span class="dl">'</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">meat</span><span class="dl">'</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="mi">23</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">cherries</span><span class="dl">'</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">fruit</span><span class="dl">'</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="mi">5</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">fish</span><span class="dl">'</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">meat</span><span class="dl">'</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="mi">22</span> <span class="p">}</span>
<span class="p">];</span>

<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">inventory</span><span class="p">.</span><span class="nf">group</span><span class="p">(</span> <span class="p">({</span> <span class="nx">type</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">type</span> <span class="p">);</span>

<span class="cm">/* Result is:
{
  vegetables: [
    { name: 'asparagus', type: 'vegetables', quantity: 5 },
  ],
  fruit: [
    { name: "bananas", type: "fruit", quantity: 0 },
    { name: "cherries", type: "fruit", quantity: 5 }
  ],
  meat: [
    { name: "goat", type: "meat", quantity: 23 },
    { name: "fish", type: "meat", quantity: 22 }
  ]
}
*/</span>
</code></pre></div></div> <h3 id="questions">Questions</h3> <ul> <li>What is the Group concept in Array?</li> </ul> <h2 id="set">Set</h2> <p>(Python has set built-in type, similar concept) The Set object lets you store unique values of any type. Each value can only occur once in a Set.</p> <ul> <li>You can iterate through the elements of a set in insertion order.</li> <li>One functionality of Set is Used to remove duplicate elements from the array.</li> <li> <p>In Python, it can use {} literal to create set. But it has no literal to create set in JavaScript.</p> </li> <li>Performance The Set has method checks if a value is in a Set object, using an approach that is, on average, faster than the Array.prototype.includes method when an Array object has a length equal to a Set object‚Äôs size.</li> </ul> <h3 id="essential-method-property">Essential Method Property</h3> <p>Method:</p> <ul> <li>new Set() Creates a new Set</li> <li>add() Adds a new element to the Set</li> <li>delete() Removes an element from a Set</li> <li>has() Returns true if a value exists in the Set</li> <li>forEach() Invokes a callback for each element in the Set</li> <li>values() Returns an iterator with all the values in a Set</li> </ul> <p>Property:</p> <ul> <li>size Returns the number of elements in a Set</li> </ul> <h2 id="map-1">Map</h2> <p>The Map object holds key-value pairs and remembers the original insertion order of the keys. Any value (both objects and primitive values) may be used as either a key or a value.</p> <h3 id="features-1">Features</h3> <ul> <li>A Map object iterates its elements in insertion order ‚Äî a for..of loop returns an array of [key, value] for each iteration.</li> <li>Key equality is based on the sameValueZero algorithm.</li> <li>If there are some keys are same, then just the last one will be keep in Map.</li> <li>key and value can‚Äôt be swap. you can find value from key. but can‚Äôt be reverse.</li> <li>you can use for..of , forEach(), to iterate through Map.</li> <li>You can say Map is a special array: two member array, first one for key, second one for value.</li> <li>You can say Array is just a special Map which key is 0, 1, 2 ‚Ä¶</li> <li>Map and Set work are designed in similar way, and they work in similar way.</li> <li>Although Map‚Äôs key can be any types, but usually just use primitive types. because when you look up the key, it use samevaulezero comparasion. Object types will just be compare the reference. it make no sense.</li> </ul> <h3 id="typical-map-looks-like-below">typical Map looks like below:</h3> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">myMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">([</span>
 <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="dl">'</span><span class="s1">two</span><span class="dl">'</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="dl">'</span><span class="s1">three</span><span class="dl">'</span><span class="p">],</span>
<span class="p">])</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">myMap</span><span class="p">)</span> <span class="nx">will</span> <span class="nx">display</span><span class="p">:</span> 
<span class="p">{</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">,</span> 
<span class="mi">2</span> <span class="o">=&gt;</span> <span class="dl">'</span><span class="s1">two</span><span class="dl">'</span><span class="p">,</span>
<span class="mi">3</span> <span class="o">=&gt;</span> <span class="dl">'</span><span class="s1">three</span><span class="dl">'</span><span class="p">}</span>
</code></pre></div></div> <h3 id="map-vs-array">Map vs. Array</h3> <p>I believe Map is built on top of Object with way as Array on top of Object.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">kvArray</span> <span class="o">=</span> <span class="p">[[</span><span class="dl">'</span><span class="s1">key1</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">value1</span><span class="dl">'</span><span class="p">],</span> <span class="p">[</span><span class="dl">'</span><span class="s1">key2</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">value2</span><span class="dl">'</span><span class="p">]]</span> 
</code></pre></div></div> <p>Use Map constructor to transform a 2D key-value Array into a map</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">myMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">(</span><span class="nx">kvArray</span><span class="p">)</span>
<span class="nx">myMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">key1</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// returns "value1"</span>
</code></pre></div></div> <p>Use <code class="language-plaintext highlighter-rouge">Array.from()</code> to transform a map into a 2D key-value Array</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">myMap</span><span class="p">))</span> <span class="c1">// exactly the same Array as kvArray</span>
</code></pre></div></div> <p>A succinct way to do the same, using the spread syntax <code class="language-plaintext highlighter-rouge">console.log([...myMap])</code></p> <p>Use keys() or values() iterators, convert them to an array</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">myMap</span><span class="p">.</span><span class="nf">keys</span><span class="p">()))</span> <span class="c1">// ["key1", "key2"]</span>
</code></pre></div></div> <h3 id="map-vs-object">Map vs. Object</h3> <p>Object is similar to Map‚Äîboth let you set keys to values, retrieve those values, delete keys, and detect whether something is stored at a key. For this reason, Object has been used as Map historically.</p> <h4 id="key">Key</h4> <ul> <li>A Map‚Äôs keys can be any value (including functions, objects, or any primitive).</li> <li> <p>The keys of an Object must be either a String or a Symbol.</p> </li> <li>A Map does not contain any keys by default. It only contains what is explicitly put into it.</li> <li>An Object has a prototype, so it contains default keys that could collide with your own keys if you‚Äôre not careful.</li> </ul> <h4 id="ordered-keys">Ordered Keys</h4> <ul> <li>The keys in Map are ordered. Thus, when iterating over it, a Map object returns keys in order of insertion. The keys of an Object are not ordered.</li> </ul> <h4 id="size">Size</h4> <ul> <li>The number of items in a Map is easily retrieved from its size property.</li> <li>The number of items in an Object must be determined manually.</li> </ul> <h4 id="iterable">Iterable</h4> <ul> <li>A Map is an iterable, so it can be directly iterated.</li> <li>Object does not implement an iteration protocol. But An object can implement the iteration protocol using Object.keys or Object.entries. On the other hand The for‚Ä¶in statement allows you to iterate over the enumerable properties of an object.</li> </ul> <h4 id="perform">Perform</h4> <ul> <li>Map Performs better in scenarios involving frequent additions and removals of key-value pairs.</li> <li>Object do not optimized for frequent additions and removals of key-value pairs.</li> </ul> <h4 id="notation-">Notation []</h4> <ul> <li>Object can use property access notation []. But please don‚Äôt use [] to access Map‚Äôs key and value. It will cause trouble.</li> </ul> <h3 id="basic-useage-of-map">Basic useage of Map:</h3> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">myMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">()</span>
<span class="nx">myMap</span><span class="p">.</span><span class="nf">set </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="dl">'</span><span class="s1">zero</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">myMap</span><span class="p">.</span><span class="nf">set </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div> <h4 id="cloning-maps">Cloning Maps</h4> <p>Just like Arrays, Maps can be cloned:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">original</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">]]);</span>
<span class="kd">let</span> <span class="nx">clone</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">(</span><span class="nx">original</span><span class="p">);</span>
</code></pre></div></div> <h4 id="merging-maps">Merging Maps:</h4> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">first</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">([</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">],</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="dl">'</span><span class="s1">two</span><span class="dl">'</span><span class="p">],</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="dl">'</span><span class="s1">three</span><span class="dl">'</span><span class="p">],</span>
<span class="p">])</span>
<span class="kd">let</span> <span class="nx">second</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">([</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="dl">'</span><span class="s1">uno</span><span class="dl">'</span><span class="p">],</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="dl">'</span><span class="s1">dos</span><span class="dl">'</span><span class="p">]</span>
<span class="p">])</span>
<span class="kd">let</span> <span class="nx">merged</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">([...</span><span class="nx">first</span><span class="p">,</span> <span class="p">...</span><span class="nx">second</span><span class="p">])</span>
</code></pre></div></div> <p>Setting Object properties works for Map objects as well, and can cause considerable confusion. So, always use Map methods to handle Map use Map methods: <code class="language-plaintext highlighter-rouge">mymap.set('bla', 'blaa');</code> Dont use: <code class="language-plaintext highlighter-rouge">mymap['bla'] = 'blaa'; // this is for Object</code></p> <h3 id="main-methods-and-proerty">Main methods and proerty</h3> <ul> <li> <p>Method new Map() Creates a new Map set() Sets the value for a key in a Map get() Gets the value for a key in a Map delete() Removes a Map element specified by the key has() Returns true if a key exists in a Map forEach() Calls a function for each key/value pair in a Map entries() Returns an iterator with the [key, value] pairs in a Map</p> </li> <li> <p>Property size Returns the number of elements in a Map</p> </li> </ul> <h2 id="weakmap">WeakMap</h2> <p>A WeakMap is a collection of key/value pairs whose keys must be objects, with values of any arbitrary JavaScript type, and which does not create strong references to its keys.</p> <ul> <li> <p>An object‚Äôs presence as a key in a WeakMap does not prevent the object from being garbage collected.</p> </li> <li> <p>WeakMap allows associating data to objects in a way that doesn‚Äôt prevent the key objects from being collected, even if the values reference the keys. However, a WeakMap doesn‚Äôt allow observing the liveness of its keys, which is why it doesn‚Äôt allow enumeration;</p> </li> </ul> <h3 id="why-weakmap">Why WeakMap</h3> <h4 id="map-implementation-would-cause-issue-in-garbage-collection">Map implementation would cause issue in garbage collection.</h4> <p>A map API could be implemented in JavaScript with two arrays (one for keys, one for values) shared by the four API methods. Setting elements on this map would involve pushing a key and value onto the end of each of those arrays simultaneously. As a result, the indices of the key and value would correspond to both arrays. Getting values from the map would involve iterating through all keys to find a match, then using the index of this match to retrieve the corresponding value from the array of values.</p> <p>Such an implementation would have two main inconveniences:</p> <ul> <li> <p>The first one is an O(n) set and search (n being the number of keys in the map) since both operations must iterate through the list of keys to find a matching value.</p> </li> <li> <p>The second inconvenience is a memory leak because the arrays ensure that references to each key and each value are maintained indefinitely. These references prevent the keys from being garbage collected, even if there are no other references to the object. This would also prevent the corresponding values from being garbage collected.</p> </li> </ul> <h4 id="weakmap-is-designed-to-be-easier-to-be-collected">WeakMap is designed to be easier to be collected.</h4> <p>By contrast, in a WeakMap, a key object refers strongly to its contents as long as the key is not garbage collected, but weakly from then on. As such, a WeakMap:</p> <ul> <li>does not prevent garbage collection, which eventually removes references to the key object</li> <li>allows garbage collection of any values if their key objects are not referenced from somewhere other than a WeakMap</li> </ul> <p>A WeakMap can be a particularly useful construct when mapping keys to information about the key that is valuable only if the key has not been garbage collected.</p> <p>But because a WeakMap doesn‚Äôt allow observing the liveness of its keys, its keys are not enumerable. There is no method to obtain a list of the keys. If there were, the list would depend on the state of garbage collection, introducing non-determinism. If you want to have a list of keys, you should use a Map.</p> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable post-side-sticky"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">Jun 22, 2021</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/javascript"> <i class="fas fa-tag fa-sm"></i>¬†JavaScript</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/javascript"> <div class="tag"> JavaScript </div> </a> </div> <div class="detail-item"> <div class="item-title">Content : </div> </div> <div class="toc-container"> <div class="toc-item"> <a href="#string"> #¬†String </a> </div> <div class="toc-item"> <a href="#number"> #¬†Number </a> </div> <div class="toc-item"> <a href="#bigint"> #¬†BigInt </a> </div> <div class="toc-item"> <a href="#symbol"> #¬†Symbol </a> </div> <div class="toc-item"> <a href="#array"> #¬†Array </a> </div> <div class="toc-item"> <a href="#set"> #¬†Set </a> </div> <div class="toc-item"> <a href="#map"> #¬†Map </a> </div> <div class="toc-item"> <a href="#weakmap"> #¬†WeakMap </a> </div> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> ¬© Copyright 2025 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>