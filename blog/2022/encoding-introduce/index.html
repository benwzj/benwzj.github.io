<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Encoding Introduction | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2022/encoding-introduce/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <style>html{scroll-behavior:smooth}</style> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="post col-sm-9"> <h1 class="post-title">Encoding Introduction</h1> <br> <br> <article class="post-content"> <div id="markdown-content"> <p>Computer just deal with bytes! When communicating with computer, we need code encoding. There are hundreds of code exist. The first and popular one is ASCII. And the last one and final one should be Unicode.</p> <p>Here is glossary: ASCII (/ˈæskiː/) (American Standard Code for Information Interchange) Unicode (Universal Coded Character Set) UTF-8 (Unicode Transformation Format - 8-bit) UTF-16 (Unicode Transformation Format - 16-bit) BMP (Basic Multilingual Plane) BOM (byte-order mark)</p> <h2 id="ascii">ASCII</h2> <p>ASCII is a character encoding standard for electronic communication. ASCII codes represent text in computers, telecommunications equipment, and other devices. Originally based on the English alphabet, ASCII encodes 128 specified characters into seven-bit integers.</p> <figure> <picture> <img src="/assets/img/ASCII.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h2 id="unicode">Unicode</h2> <p>Unicode is an attempt to define every possible human character and assign it a number. This number is called a <strong>codepoint</strong>.</p> <ul> <li>Unicode is the standard that defines the codepoint.</li> <li>Unicode defines 144,697 characters covering 159 modern and historic scripts, as well as symbols, emoji, and non-visual control and formatting codes.</li> </ul> <h3 id="unicode-and-ucs">Unicode and UCS</h3> <p>Unicode and the ISO’s Universal Coded Character Set (UCS) use identical character names and code points. However, the Unicode versions do differ from their ISO equivalents in two significant ways.</p> <ol> <li>While the UCS is a simple character map, Unicode specifies the rules, algorithms, and properties necessary to achieve interoperability between different platforms and languages.</li> <li>the frequency with which updated versions are released and new characters added.</li> </ol> <h3 id="what-is-planes">What is Planes</h3> <p>The Unicode codespace is divided into seventeen planes, numbered 0 to 16. Plane 0: Basic Multilingual Plane. Plane 1 - 7: Supplementary planes.</p> <p>All code points in the BMP are accessed as a single code unit in UTF-16 encoding and can be encoded in one, two or three bytes in UTF-8.</p> <h3 id="unicode-encoding">Unicode encoding</h3> <p>A Unicode string is a sequence of code points, which are numbers from 0 through 0x10FFFF (1,114,111 decimal). This sequence of code points needs to be represented in memory as a set of code units, and code units are then mapped to 8-bit bytes. The rules for translating a Unicode string into a sequence of bytes are called a character encoding, or just an encoding.</p> <p>In brief, encoding is the rule which translate <strong>code points</strong> to <strong>code units</strong>.</p> <ul> <li>In UTF-8 a character might be encoded with one byte, two bytes, three bytes, or four bytes.</li> <li>UTF-8 is popular at web. UTF-16 is popular at Windows, programming language. UTF-32 is too big. UCS2 is still be used, but have been obsolete.</li> </ul> <h4 id="why-there-are-many-encoding-to-represent-unicode-code-point">Why there are many encoding to represent Unicode code point?</h4> <p>Because we have different purposes, so we need different encoding. For example, in ASCII, the code of ‘A’ is ‘065’, byte is ‘01000001’. it looks obviously. But Unicode is bigger, complicated and keep updating. For example, The code of ‘A’ is ‘U+0041, the code of ‘𠜎’ is ‘U+2070E’. Simple solution is UTF-32. But UTF-32 have it’s shortcoming. like space, byte ordering. The UTF-8 encode ASCII letter as one byte and same value with Unicode code point. The UTF-16 encode BMP plane as two bytes and same value with Unicode code point. But others code points will be following different rules depends on the encoding.</p> <p>We need to consider some situation: • bytes are corrupted or lost. • portable between different processors which byte-ordering can be different. • The size of space. • compatible with existing C functions</p> <h2 id="utf-8">UTF-8</h2> <p>The name of UTF-8 is confusing. Actually UTF-8 is a variable-width character encoding used for electronic communication. UTF-8 is capable of encoding all 1,112,064 valid character code points in Unicode using one to four one-byte (8-bit) code units. UTF-8 is by far the most common encoding for the World Wide Web. UTF-8 is defacto standard encoding.</p> <p>UTF-8 uses the following rules:</p> <ul> <li>If the code point is &lt; 128, it’s represented by the corresponding byte value. It is backward compatibility with ASCII.</li> <li>If the code point is &gt;= 128, it’s turned into a sequence of two, three, or four bytes, where each byte of the sequence is between 128 and 255.</li> </ul> <p>How UTF-8 works</p> <figure> <picture> <img src="/assets/img/utf8-conversion.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>UTF-8 has several convenient properties:</p> <ul> <li>It can handle any Unicode code point.</li> <li>A Unicode string is turned into a sequence of bytes that contains embedded zero bytes only where they represent the null character (U+0000). This means that UTF-8 strings can be processed by C functions such as strcpy() and sent through protocols that can’t handle zero bytes for anything other than end-of-string markers.</li> <li>A string of ASCII text is also valid UTF-8 text.</li> <li>UTF-8 is fairly compact; the majority of commonly used characters can be represented with one or two bytes.</li> <li>If bytes are corrupted or lost, it’s possible to determine the start of the next UTF-8-encoded code point and resynchronize. It’s also unlikely that random 8-bit data will look like valid UTF-8.</li> <li>UTF-8 is a byte oriented encoding. The encoding specifies that each character is represented by a specific sequence of one or more bytes. This avoids the byte-ordering issues that can occur with integer and word oriented encodings, like UTF-16 and UTF-32, where the sequence of bytes varies depending on the hardware on which the string was encoded.</li> </ul> <h2 id="utf-16">UTF-16</h2> <p>UTF-16 is another character encoding which also is capable of encoding all 1,112,064 valid character code points of Unicode. The encoding is variable-width, as code points are encoded with one or two 16-bit code units.</p> <ul> <li> <p>UCS-2 is a precursor of UTF-16 without full support for Unicode, it have been obsolete. It uses two bytes (16 bits) for each character but can only encode the first 65,536 code points, the so-called Basic Multilingual Plane (BMP).</p> </li> <li> <p>UTF-16 extends UCS-2, by using the same 16-bit encoding as UCS-2 for the Basic Multilingual Plane, and a 4-byte encoding for the other planes.</p> </li> </ul> <h3 id="how-utf-16-work">How UTF-16 work</h3> <p>Each Unicode code point is encoded either as one or two 16-bit code units. How these 16-bit codes are stored as bytes then depends on the ‘endianness’ of the text file or communication protocol.</p> <ul> <li> <p>Code points from U+0000 to U+D7FF and U+E000 to U+FFFF These code points is the Basic Multilingual Plane (BMP). UTF-16 encode code points in this range as single 16-bit code units that are numerically equal to the corresponding code points.</p> </li> <li> <p>Code points From U+D800 to U+DFFF The Unicode standard permanently reserves these code point values for UTF-16 encoding of the high and low surrogates, and they will never be assigned a character.</p> </li> <li> <p>Code points from U+010000 to U+10FFFF Code points from the other planes (called Supplementary Planes) are encoded as two 16-bit code units called a surrogate pair, by the following scheme:</p> </li> </ul> <p>• 0x10000 is subtracted from the code point (U), leaving a 20-bit number (U’) in the hex number range 0x00000–0xFFFFF. Note for these purposes, U is defined to be no greater than 0x10FFFF. • The high ten bits (in the range 0x000–0x3FF) are added to 0xD800 to give the first 16-bit code unit or high surrogate (W1), which will be in the range 0xD800–0xDBFF. • The low ten bits (also in the range 0x000–0x3FF) are added to 0xDC00 to give the second 16-bit code unit or low surrogate (W2), which will be in the range 0xDC00–0xDFFF.</p> <figure> <picture> <img src="/assets/img/utf16-decoder.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Illustrated visually, the distribution of U’ between W1 and W2 looks like:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>U' = yyyyyyyyyyxxxxxxxxxx  // U - 0x10000
W1 = 110110yyyyyyyyyy       // 0xD800 + yyyyyyyyyy
W2 = 110111xxxxxxxxxx       // 0xDC00 + xxxxxxxxxx
</code></pre></div></div> <h2 id="utf-8-vs-utf-16">UTF-8 vs. UTF-16</h2> <ul> <li> <p>They are not compatible with each other.</p> </li> <li> <p>UTF-8 encodes a character into a binary string of one, two, three, or four bytes. UTF-16 encodes a Unicode character into a string of either two or four bytes.</p> </li> <li> <p>UTF-8 encoding is much popular than UTF-16 on the web, maybe because it uses less memory. UTF-8 accounts for 98% of all web pages. WHATWG considers UTF-8 “the mandatory encoding for all text” and that for security reasons browser applications should not use UTF-16.</p> </li> <li> <p>UTF-16 is used by systems such as the Microsoft Windows API, the Java programming language and JavaScript. Since May 2019, Microsoft has begun supporting UTF-8 (as well as UTF-16) and encouraging its use.</p> </li> <li> <p>UTF-16 is used by SMS.</p> </li> <li> <p>UTF-16 need to use Unicode character U+FEFF as a byte-order mark (BOM) identify the byte ordering. UTF-8 don’t care byte ordering.</p> </li> </ul> <h2 id="questions-about-encoding">Questions about encoding</h2> <h3 id="what-is-utf-16-high-surrogate-utf-16-low-surrogate">What is UTF-16 high surrogate, UTF-16 low surrogate?</h3> <p>High low Surrogate are the ways using which UTF-16 encode Unicode code point in Supplementary Planes</p> <h3 id="how-about-other-encoding">How about other encoding</h3> <ul> <li>UTF-32 is a fixed-length encoding used to encode Unicode code points that uses exactly 32 bits (four bytes) per code point.</li> <li>GB18030</li> </ul> <h3 id="what-is-glyph">What is glyph</h3> <p>A character is represented on a screen or on paper by a set of graphical elements that’s called a glyph.</p> <h3 id="why-utf-8-dont-care-the-byte-order-issue-what-is-byte-oriented-encoding">Why UTF-8 don’t care the byte order issue? What is byte oriented encoding?</h3> <p>Because there are marks on each byte in UTF-8 encoding. According to these marks, we can infer the byte ordering.</p> <h2 id="reference">reference</h2> <p>https://nedbatchelder.com/text/unipain.html</p> </div> </article> </div> <div class="col-sm-3 post-side-container"> <div class="card hoverable post-side-sticky"> <div class="card-body post-side-detail"> <h5 class="card-title">Post Detail</h5> <div class="detail-item"> <div class="item-title">Published : </div> <div class="item-content">Feb 1, 2022</div> </div> <div class="detail-item"> <div class="item-title">Category : </div> <div class="item-content"> <a href="/blog/category/encoding"> <i class="fas fa-tag fa-sm"></i> Encoding</a> </div> </div> <div class="detail-item"> <div class="item-title">Tags : </div> </div> <div class="tags"> <a href="/blog/tag/unicode"> <div class="tag"> Unicode </div> </a> <a href="/blog/tag/acsii"> <div class="tag"> ACSII </div> </a> </div> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>