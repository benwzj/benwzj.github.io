<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>React Component Detail | BEN WEN</title> <meta name="author" content="Ben Wen"> <meta name="description" content="A website to show the world of Ben Wen "> <meta name="keywords" content="jekyll, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/mdb.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link defer rel="stylesheet" href="/assets/css/bootstrap-table.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/all.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" href="/assets/css/academicons.min.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/github.css?d41d8cd98f00b204e9800998ecf8427e" media="" id="highlight_theme_light"> <link rel="icon" href="/assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://benwzj.github.io/blog/2022/component-react/"> <link rel="stylesheet" href="/assets/css/native.css?d41d8cd98f00b204e9800998ecf8427e" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">BEN WEN</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/benwzj" rel="external nofollow noopener" target="_blank"> GitHub <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="width:1rem;height:1rem;fill:currentColor"> <g data-name="Layer 2"><g data-name="external-link"> <rect width="24" height="24" opacity="0"></rect> <path d="M20 11a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1z"></path> <path d="M16 5h1.58l-6.29 6.28a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L19 6.42V8a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2z"></path> </g></g> </svg> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">React Component Detail</h1> <p class="post-meta">March 4, 2022</p> <p class="post-tags"> <a href="/blog/2022"> <i class="fas fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/tag/component"> <i class="fas fa-hashtag fa-sm"></i> Component</a>     ·   <a href="/blog/category/react"> <i class="fas fa-tag fa-sm"></i> React</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="component-basic">Component Basic</h2> <p>Components are one of the core concepts of React. Conceptually, components are like JavaScript functions. They accept arbitrary inputs (called “props”) and return React elements describing what should appear on the screen. React lets you combine your markup, CSS, and JavaScript into custom “components”, reusable UI elements for your app. Just like with HTML tags, you can <strong>compose</strong>, order and nest components to design whole pages.</p> <h3 id="component-features">Component Features</h3> <ul> <li>Component is independent and reuseable code.</li> <li>Component can be in another Component.</li> <li>Component work as two ways: <strong>class</strong> and <strong>function</strong>.</li> <li> <strong>state</strong> and <strong>prop</strong> are key properties for components.</li> <li>Compoents’ names must start with a capital letter or they won’t work!</li> </ul> <h3 id="props">Props</h3> <ul> <li> <strong>props</strong> are a way of passing data from parent to child.</li> <li> <strong>props</strong> contains information set by the parent component (although defaults can be set) and should not be changed.</li> <li>Can pass HTML’s attributes as a props to React class. And attribute can be a OBJECT.</li> </ul> <h3 id="state">State</h3> <ul> <li>All React component have built-in state object. state object is the object in which you can store component properties.</li> <li>State is reserved only for interactivity, Static version don’t need state.</li> <li>State is private and fully controled by component. e.g. initialise, change.</li> <li>USE setState to update component state properties.</li> <li> <code class="language-plaintext highlighter-rouge">setState()</code> can cause re-render.</li> <li> <code class="language-plaintext highlighter-rouge">setState()</code> use asychronous nature. React may batch multiple <code class="language-plaintext highlighter-rouge">setState()</code> calls into a single update for performance.</li> </ul> <h3 id="event">Event</h3> <ul> <li>React Evert are writen in camelCase syntax: use <code class="language-plaintext highlighter-rouge">onClick()</code> instead of <code class="language-plaintext highlighter-rouge">onclick()</code>;</li> <li>Use curly braces: use <code class="language-plaintext highlighter-rouge">onClick={shoot}</code> instead of <code class="language-plaintext highlighter-rouge">onclick='shoot()'</code>.</li> <li>Always use arrow function, because with arrow function, keyword this will always represent the object which define it.</li> </ul> <h3 id="passing-arguments-to-event-handler-two-ways">passing Arguments to Event handler, TWO WAYS:</h3> <ul> <li>make anonymous arrow function. like: <div class="language-js highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span> <span class="o">=</span> <span class="p">{()</span><span class="o">=&gt;</span><span class="k">this</span><span class="p">.</span><span class="nf">myFunction</span><span class="p">(</span><span class="dl">'</span><span class="s1">Goal</span><span class="dl">'</span><span class="p">)}</span><span class="o">&gt;</span> <span class="nx">take</span> <span class="nx">shot</span> <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span></code></pre></div> </div> </li> <li>bind event handler to ‘this’;like: <div class="language-js highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span> <span class="o">=</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">myFunction</span><span class="p">.</span><span class="nf">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="dl">'</span><span class="s1">Goal</span><span class="dl">'</span><span class="p">)}</span><span class="o">&gt;</span> <span class="nx">take</span> <span class="nx">shot</span> <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span></code></pre></div> </div> </li> <li>handling form passing event object, you can use <code class="language-plaintext highlighter-rouge">event.target.value</code> on <code class="language-plaintext highlighter-rouge">onChange ()</code> or <code class="language-plaintext highlighter-rouge">onClick()</code>;</li> </ul> <p>example: inside component:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">myChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nf">setState</span><span class="p">({</span><span class="na">username</span> <span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>
  <span class="p">}</span>
</code></pre></div></div> <p>event element:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">onChange</span> <span class="o">=</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">myChange</span><span class="p">}</span>
</code></pre></div></div> <h2 id="class-vs-function-component">Class vs. Function Component</h2> <p>These two kinds of components are equivalent from React’s point of view. But React recommend defining components as functions instead of classes.</p> <ul> <li>The function of the Function Component is run through with each render. (But <code class="language-plaintext highlighter-rouge">useRef()</code> can return the same object for each time render)</li> <li>Class component instance keep alive. the <code class="language-plaintext highlighter-rouge">instance.render()</code> with will run with each render</li> </ul> <h3 id="syntax">Syntax:</h3> <ul> <li>A functional component is just a plain JavaScript pure function that accepts props as an argument and returns a React element(JSX). <div class="language-js highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">Welcome</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
<span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1&gt;</span><span class="err">;
</span><span class="p">}</span>
</code></pre></div> </div> </li> <li>A class component requires you to extend from React.Component and create a render function which returns a React element. <div class="language-js highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Welcome</span> <span class="kd">extends</span> <span class="nc">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
<span class="nf">render</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1&gt;</span><span class="err">;
</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div> </div> </li> </ul> <h3 id="prop">prop</h3> <p>Props are passed from outside into the components.</p> <ul> <li>For Class component, Props are passed as arguments to the constructor and also should be passed to the parent component class by calling <code class="language-plaintext highlighter-rouge">super(props)</code>. this.props are accessible throughout the life of the object.</li> <li>For Function component, props are passed as arguments into the function.</li> </ul> <h3 id="state-1">state</h3> <ul> <li>For Class component, React.Component objects have property state, so it is stateful.</li> <li>For Function components, although they are known as stateless components, but you can use hook <code class="language-plaintext highlighter-rouge">useState()</code> to manage state.</li> </ul> <h3 id="life-cycle">Life cycle</h3> <ul> <li>For Class component, React lifecycle methods can be used inside class components (for example, <code class="language-plaintext highlighter-rouge">componentDidMount</code>).</li> <li>For Function component, you can use hook <code class="language-plaintext highlighter-rouge">useEffect()</code> to manage lifecycle.</li> </ul> <h3 id="life-time">Life time</h3> <ul> <li>Functional component run from top to bottom and once the function is returned it can’t be kept alive. There are no instance object kept alive.</li> <li>Class component is instantiated and different life cycle method is kept alive and being run and invoked depending on phase of class component.</li> </ul> <h3 id="render">Render</h3> <ul> <li>For Function component, It have not instance, When it need to render, the function component gets called which returns a set of instructions for creating DOM.</li> <li>For Class component, When it need to render, instance’s render method gets called which returns a set of instructions for creating DOM.</li> </ul> <h3 id="if-you-need-to-use-regular-function-in-class-component">If you need to use regular function in class component.</h3> <p>You have to bind <code class="language-plaintext highlighter-rouge">'this'</code> to component instance. otherwise , this will be undefined.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
	<span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">myFunction</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">myFunction</span><span class="p">.</span><span class="nf">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">}</span>
<span class="nf">myFunction</span><span class="p">(){</span>
	<span class="nf">alert </span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="component-life-cycle">Component Life cycle</h2> <p>There are three phases which are: <strong>Mounting</strong>, <strong>Updating</strong>, and <strong>Unmounting</strong>.</p> <figure> <picture> <img src="/assets/img/component-lifecycle.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="mounting-four-built-in-methods-that-gets-called-in-this-order">Mounting: four built-in methods that gets called, in this order:</h3> <ol> <li> <code class="language-plaintext highlighter-rouge">constructor()</code> optional, handle the props, and pass props to <code class="language-plaintext highlighter-rouge">super(props)</code>;</li> <li> <code class="language-plaintext highlighter-rouge">static getDerivedStateFromProps()</code>, rare use</li> <li> <code class="language-plaintext highlighter-rouge">render()</code>, is required, and is the method that actually outputs the HTML to the DOM.</li> <li> <code class="language-plaintext highlighter-rouge">componentDidMount()</code>, is called after the component is rendered.</li> </ol> <h3 id="updating">Updating</h3> <p>A component is updated whenever there is a change in the component’s state or props. Five built-in methods that gets called:</p> <ol> <li><code class="language-plaintext highlighter-rouge">getDerivedStateFromProps()</code></li> <li><code class="language-plaintext highlighter-rouge">shouldComponentUpdate()</code></li> <li><code class="language-plaintext highlighter-rouge">render()</code></li> <li><code class="language-plaintext highlighter-rouge">getSnapshotBeforeUpdate()</code></li> <li> <code class="language-plaintext highlighter-rouge">componentDidUpdate()</code>, Use this as an opportunity to operate on the DOM when the component has been updated. <div class="language-js highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nf">componentDidUpdate</span><span class="p">(</span><span class="nx">prevProps</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Typical usage (don't forget to compare props):</span>
  <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">userID</span> <span class="o">!==</span> <span class="nx">prevProps</span><span class="p">.</span><span class="nx">userID</span><span class="p">)</span> <span class="p">{</span>
 <span class="k">this</span><span class="p">.</span><span class="nf">fetchData</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">userID</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> </div> <blockquote> <p>You may call <code class="language-plaintext highlighter-rouge">setState()</code> immediately in <code class="language-plaintext highlighter-rouge">componentDidUpdate()</code> but note that it must be wrapped in a condition.</p> </blockquote> </li> </ol> <h3 id="unmounting">UnMounting</h3> <p>Just this method: <code class="language-plaintext highlighter-rouge">componentWillUnmount()</code></p> <h3 id="questions">Questions</h3> <ul> <li> <p>It is easier to understand function components, which return react element. But how to understand Class component which use <code class="language-plaintext highlighter-rouge">render()</code>?</p> </li> <li> <p>Why <code class="language-plaintext highlighter-rouge">render()</code> function happen both in mounting and updating phrase?</p> </li> </ul> <h2 id="reactpurecomponent-vs-reactcomponent">React.PureComponent vs. React.Component</h2> <p>React.PureComponent is similar to React.Component. The difference between them is that</p> <ul> <li>React.PureComponent implements shouldComponentUpdate() with a shallow prop and state comparison.</li> <li>React.Component doesn’t implement shouldComponentUpdate() by default. But if you are confident you want to write it by hand, you may compare this.props with nextProps and this.state with nextState and return false to tell React the update can be skipped.</li> </ul> <h2 id="web-component-vs-react-component">Web component vs. React component</h2> <p>Web component and React component are in different scope. Web Component is a web technology, that means it is a specification of w3c. While React component is a concept in React.</p> <h3 id="what-is-web-component">What is Web Component</h3> <p>Web Components are custom elements that you can define and reuse in your Web apps. Web Component consists of three main technologies:</p> <ol> <li>Custom elements: APIs to define new HTML elements</li> <li>Shadow DOM: encapsulated DOM and styling, with composition</li> <li>HTML templates: HTML fragments that are not rendered, but stored until instantiated via JavaScript</li> </ol> <p>Web component basic approach:</p> <ol> <li>Using class syntax, create a class.</li> <li>Register your new custom element using the <code class="language-plaintext highlighter-rouge">CustomElementRegistry.define()</code> method.</li> <li>attach a shadow DOM to the custom element using <code class="language-plaintext highlighter-rouge">Element.attachShadow()</code> method.</li> <li>define an HTML template using <code class="language-plaintext highlighter-rouge">&lt;template&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;slot&gt;</code>.</li> <li>Use your custom element wherever you like on your page, just like you would any regular HTML element.</li> </ol> <p>React and Web Components are built to solve different problems. Web Components provide strong encapsulation for reusable components, while React provides a declarative library that keeps the DOM in sync with your data. The two goals are complementary. As a developer, you are free to use React in your Web Components, or to use Web Components in React, or both.</p> <p>Most people who use React don’t use Web Components, but you may want to, especially if you are using third-party UI components that are written using Web Components.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/Markdown-looks/">How to make MarkDown file looks better</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/Markdown-can-do/">What Markdown can do</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/Mathjax/">Introduce MathJax</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/BuildPersonalBrand/">Build your own personal brand</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/iteration-python/">Iteration in Python</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Ben Wen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/assets/js/jquery.min.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/js/tex-mml-chtml.js?d41d8cd98f00b204e9800998ecf8427e"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>